!function(a,b){function c(b,c){var h,f,g,e=b.nodeName.toLowerCase();return"area"===e?(f=b.parentNode,g=f.name,b.href&&g&&"map"===f.nodeName.toLowerCase()?(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h)):!1):(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.om=a.om||{},a.om.version||(a.extend(a.om,{version:"2.0",keyCode:{TAB:9,ENTER:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},lang:{_get:function(b,c,d){return b[d]?b[d]:a.om.lang[c][d]}}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_oldFocus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._oldFocus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".om-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".om-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.om,{plugin:{add:function(b,c,d){var f,e=a.om[b].prototype;for(f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var e,d=a.plugins[b];if(d&&a.element[0].parentNode)for(e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var e,d=0;null!=(e=b[d]);d++)a(e).triggerHandler("om-remove");c(b)}}a.omWidget=function(b,c,d){var f,g,e=b.split(".")[0];b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.OMWidget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)},g=new c,g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.omWidget.bridge(b,a[e][b])},a.omWidget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(f?this.each(function(){var f,d=a.data(this,c);return"options"==e?(h=d&&d.options,!1):(f=d&&a.isFunction(d[e])?d[e].apply(d,g):d,f!==d&&f!==b?(h=f,!1):void 0)}):this.each(function(){var b=a.data(this,c);b?(b._setOptions(e||{}),a.extend(b.options,e),a(b.beforeInitListeners).each(function(){this.call(b)}),b._init(),a(b.initListeners).each(function(){this.call(b)})):a.data(this,c,new d(e,this))}),h)}},a.omWidget.addCreateListener=function(b,c){var d=b.split(".");a[d[0]][d[1]].prototype.createListeners.push(c)},a.omWidget.addInitListener=function(b,c){var d=b.split(".");a[d[0]][d[1]].prototype.initListeners.push(c)},a.omWidget.addBeforeInitListener=function(b,c){var d=b.split(".");a[d[0]][d[1]].prototype.beforeInitListeners.push(c)},a.OMWidget=function(a,b){this.createListeners=[],this.initListeners=[],this.beforeInitListeners=[],arguments.length&&this._createWidget(a,b)},a.OMWidget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("om-remove._"+this.widgetName,function(){d.destroy()}),this._create(),a(this.createListeners).each(function(){this.call(d)}),this._trigger("create"),a(this.beforeInitListeners).each(function(){this.call(d)}),this._init(),a(this.initListeners).each(function(){this.call(d)})},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName)},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,this},_trigger:function(b,c){var f,e,g,h,d=this.options[b];if(c=a.Event(c),c.type=b,c.originalEvent)for(e=a.event.props.length;e;)f=a.event.props[--e],c[f]=c.originalEvent[f];for(g=[],h=arguments.length,e=2;h>e;e++)g[e-2]=arguments[e];return h>1&&(g[h-2]=arguments[1]),!(a.isFunction(d)&&d.apply(this.element,g)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){a.omWidget("om.omMouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(b.originalEvent=b.originalEvent||{},!b.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1==b.which,e="string"==typeof this.options.cancel?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),b.originalEvent.mouseHandled=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.om=a.om||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f=a.fn.position,g=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return f.apply(this,arguments);b=a.extend({},b);var k,l,m,g=a(b.of),h=g[0],i=(b.collision||"flip").split(" "),j=b.offset?b.offset.split(" "):[0,0];return 9===h.nodeType?(k=g.width(),l=g.height(),m={top:0,left:0}):h.setTimeout?(k=g.width(),l=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(b.at="left top",k=l=0,m={top:b.of.pageY,left:b.of.pageX}):(k=g.outerWidth(),l=g.outerHeight(),m=g.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");1===a.length&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),1===i.length&&(i[1]=i[0]),j[0]=parseInt(j[0],10)||0,1===j.length&&(j[1]=j[0]),j[1]=parseInt(j[1],10)||0,"right"===b.at[0]?m.left+=k:b.at[0]===e&&(m.left+=k/2),"bottom"===b.at[1]?m.top+=l:b.at[1]===e&&(m.top+=l/2),m.left+=j[0],m.top+=j[1],this.each(function(){var q,c=a(this),d=c.outerWidth(),f=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",!0))||0,h=parseInt(a.curCSS(this,"marginTop",!0))||0,n=d+g+(parseInt(a.curCSS(this,"marginRight",!0))||0),o=f+h+(parseInt(a.curCSS(this,"marginBottom",!0))||0),p=a.extend({},m);"right"===b.my[0]?p.left-=d:b.my[0]===e&&(p.left-=d/2),"bottom"===b.my[1]?p.top-=f:b.my[1]===e&&(p.top-=f/2),p.left=Math.round(p.left),p.top=Math.round(p.top),q={left:p.left-g,top:p.top-h},a.each(["left","top"],function(c,e){a.om.omPosition[i[c]]&&a.om.omPosition[i[c]][e](p,{targetWidth:k,targetHeight:l,elemWidth:d,elemHeight:f,collisionPosition:q,collisionWidth:n,collisionHeight:o,offset:j,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(p,{using:b.using}))})},a.om.omPosition={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(function(){a.offset.setOffset(this,b)}):g.call(this):null})}(jQuery),function(a){a.omWidget("om.omDraggable",a.om.omMouse,{widgetEventPrefix:"drag",options:{axis:!1,containment:!1,cursor:"auto",_scope:"default",handle:!1,helper:"original",revert:!1,scroll:!0},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.element.addClass("om-draggable"),this.options.disabled&&this.element.addClass("om-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("omDraggable")?(this.element.removeData("omDraggable").unbind(".draggable").removeClass("om-draggable om-draggable-dragging om-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".om-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?!0:!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.om.ddmanager&&(a.om.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.containment&&this._setContainment(),this._trigger("onStart",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.om.ddmanager&&!c.dropBehaviour&&a.om.ddmanager.prepareOffsets(this,b),this.helper.addClass("om-draggable-dragging"),this._mouseDrag(b,!0),a.om.ddmanager&&a.om.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("onDrag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.om.ddmanager&&a.om.ddmanager.drag(this,b),!1},_mouseStop:function(b){var d,c=!1;return a.om.ddmanager&&!this.options.dropBehaviour&&(c=a.om.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1),this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper?("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)?(d=this,a(this.helper).animate(this.originalPosition,500,function(){d._trigger("onStop",b)!==!1&&d._clear()})):this._trigger("onStop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a.om.ddmanager&&a.om.ddmanager.dragStop(this,b),a.om.omMouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".om-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(this.element[0].parentNode),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,d,f,b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{if(c=a(b.containment),d=c[0],!d)return;c.offset(),f="hidden"!=a(d).css("overflow"),this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var h,i,d=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;return this.originalPosition&&this.containment&&(this.relative_container?(i=this.relative_container.offset(),h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):h=this.containment,b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("om-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.om.plugin.call(this,b,[c,d]),"onDrag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.OMWidget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.om.plugin.add("omDraggable","cursor",{onStart:function(){var d=a("body"),e=a(this).data("omDraggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},onStop:function(){var e,d=a(this).data("omDraggable");d&&(e=d.options,e._cursor&&a("body").css("cursor",e._cursor))}}),a.om.plugin.add("omDraggable","scroll",{onStart:function(){var d=a(this).data("omDraggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},onDrag:function(b,c){var d=a(this).data("omDraggable"),e=d.options,f=!1,g=20,h=20;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(e.axis&&"x"==e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-c.pageY<g?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+h:c.pageY-d.overflowOffset.top<g&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-h)),e.axis&&"y"==e.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-c.pageX<g?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+h:c.pageX-d.overflowOffset.left<g&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-h))):(e.axis&&"x"==e.axis||(c.pageY-a(document).scrollTop()<g?f=a(document).scrollTop(a(document).scrollTop()-h):a(window).height()-(c.pageY-a(document).scrollTop())<g&&(f=a(document).scrollTop(a(document).scrollTop()+h))),e.axis&&"y"==e.axis||(c.pageX-a(document).scrollLeft()<g?f=a(document).scrollLeft(a(document).scrollLeft()-h):a(window).width()-(c.pageX-a(document).scrollLeft())<g&&(f=a(document).scrollLeft(a(document).scrollLeft()+h)))),f!==!1&&a.om.ddmanager&&!e.dropBehaviour&&a.om.ddmanager.prepareOffsets(d,c)}})}(jQuery),function(a){a.omWidget("om.omDroppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,greedy:!1,hoverClass:!1,_scope:"default"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.om.ddmanager.droppables[b._scope]=a.om.ddmanager.droppables[b._scope]||[],a.om.ddmanager.droppables[b._scope].push(this),this.element.addClass("om-droppable")},destroy:function(){var c,b=a.om.ddmanager.droppables[this.options._scope];for(c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("om-droppable om-droppable-disabled").removeData("omDroppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.OMWidget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.om.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("onDragStart",b,c.currentItem||c.element)},_deactivate:function(){a.om.ddmanager.current,this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_over:function(b){var c=a.om.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("onDragOver",b,c.currentItem||c.element))},_out:function(b){var c=a.om.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDragOut",b,c.currentItem||c.element))},_drop:function(b,c){var e,d=c||a.om.ddmanager.current;return d&&(d.currentItem||d.element)[0]!=this.element[0]?(e=!1,this.element.find(":data(omDroppable)").not(".om-draggable-dragging").each(function(){var b=a.data(this,"omDroppable");return b.options.greedy&&!b.options.disabled&&b.options._scope==d.options._scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.om.intersect(d,a.extend(b,{offset:b.element.offset()}))?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDrop",b,d.currentItem||d.element),this.element):!1):!1}}),a.om.intersect=function(a,b){if(!b.offset)return!1;var c=(a.positionAbs||a.position.absolute).left,d=c+a.helperProportions.width,e=(a.positionAbs||a.position.absolute).top,f=e+a.helperProportions.height,g=b.offset.left,h=g+b.proportions.width,i=b.offset.top,j=i+b.proportions.height;return g<c+a.helperProportions.width/2&&d-a.helperProportions.width/2<h&&i<e+a.helperProportions.height/2&&f-a.helperProportions.height/2<j},a.om.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var g,h,d=a.om.ddmanager.droppables[b.options._scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(omDroppable)").andSelf();a:for(g=0;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.om.ddmanager.droppables[b.options._scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.om.intersect(b,this)&&(d=d||this._drop.call(this,c)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.om.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.om.ddmanager.prepareOffsets(b,c),a.each(a.om.ddmanager.droppables[b.options._scope]||[],function(){var d,e,f,g;this.options.disabled||this.greedyChild||!this.visible||(d=a.om.intersect(b,this),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout",e&&(this.options.greedy&&(g=this.element.parents(":data(omDroppable):eq(0)"),g.length&&(f=a.data(g[0],"omDroppable"),f.greedyChild="isover"==e?1:0)),f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))))})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.om.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.omWidget("om.omResizable",a.om.omMouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,aspectRatio:!1,autoHide:!1,containment:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var d,e,f,g,h,b=this,c=this.options;if(this.element.addClass("om-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"om-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(a('<div class="om-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".om-resizable-handle",this.element).length?{n:".om-resizable-n",e:".om-resizable-e",s:".om-resizable-s",w:".om-resizable-w",se:".om-resizable-se",sw:".om-resizable-sw",ne:".om-resizable-ne",nw:".om-resizable-nw"}:"e,s,se"),this.handles.constructor==String)for("all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),d=this.handles.split(","),this.handles={},e=0;e<d.length;e++)f=a.trim(d[e]),g="om-resizable-"+f,h=a('<div class="om-resizable-handle '+g+'"></div>'),/sw|se|ne|nw/.test(f)&&h.css({zIndex:++c.zIndex}),"se"==f&&h.addClass("om-icon om-icon-gripsmall-diagonal-se"),this.handles[f]=".om-resizable-"+f,this.element.append(h);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(f,e),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".om-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/om-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("om-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("om-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("om-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){var b,c;return this._mouseDestroy(),b=function(b){a(b).removeClass("om-resizable om-resizable-disabled om-resizable-resizing").removeData("resizable").unbind(".resizable").find(".om-resizable-handle").remove()},this.elementIsWrapper&&(b(this.element),c=this.element,c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()),this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this
},_mouseCapture:function(b){var d,c=!1;for(d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var g,h,i,d=this.options,e=this.element.position(),f=this.element;return this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),a.browser.opera&&/relative/.test(f.css("position"))&&f.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),g=c(this.helper.css("left")),h=c(this.helper.css("top")),d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=a(".om-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("om-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var l,c=this.helper,g=(this.options,this.originalMousePosition),h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];return k?(l=k.apply(this,[b,i,j]),a.browser.msie&&a.browser.version<7,this.sizeDiff,this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(l=this._updateRatio(l,b)),l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){var c,d,e,f,g,h,i,j,k;return this.resizing=!1,c=this.options,d=this,this._helper&&(e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&d._hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("om-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var c,e,f,g,h,b=this.options;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:1/0,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:1/0},(this._aspectRatio||a)&&(c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g)),this._vBoundaries=h},_updateCache:function(a){this.options,this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var e=(this.options,this.position),f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==g&&(a.left=e.left+(f.width-a.width),a.top=null),"nw"==g&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var l,m,n,o,p,e=(this.helper,this._vBoundaries),g=(this._aspectRatio||b.shiftKey,this.axis),h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;return j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight),l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g),j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight),p=!a.width&&!a.height,p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var c,d,e,f,g;if(this.options,this._proportionallyResizeElements.length)for(c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++)e=this._proportionallyResizeElements[d],this.borderDif||(f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})),a.browser.msie&&(a(c).is(":hidden")||a(c).parents(":hidden").length)||e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})},_renderProxy:function(){var d,e,f,b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a('<div style="overflow:hidden;"></div>'),d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var e=(this.options,this.originalSize),f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var e=(this.options,this.originalSize),f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.om.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.om.resizable,{version:"1.1"}),a.om.plugin.add("omResizable","alsoResize",{start:function(){var d=a(this).data("omResizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?f(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)})},resize:function(b,c){var d=a(this).data("omResizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("resizable-alsoresize"),g={},i=e&&e.length?e:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(a,b){var c=(f[b]||0)+(h[b]||0);c&&c>=0&&(g[b]=c||null)}),a.browser.opera&&/relative/.test(b.css("position"))&&(d._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(g)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){var d=a(this).data("omResizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};d._revertToRelativePosition&&(d._revertToRelativePosition=!1,"object"!=typeof e.alsoResize||e.alsoResize.nodeType?f(e.alsoResize):a.each(e.alsoResize,function(a){f(a)})),a(this).removeData("resizable-alsoresize")}}),a.om.plugin.add("omResizable","containment",{start:function(){var j,k,l,m,n,o,p,e=a(this).data("omResizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;i&&(e.containerElement=a(i),/document/.test(h)||h==document?(e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(j=a(i),k=[],a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]},l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=e._hasScroll(i,"left")?i.scrollWidth:n,p=e._hasScroll(i)?i.scrollHeight:m,e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}))},resize:function(b){var m,n,o,p,d=a(this).data("omResizable"),e=d.options,g=(d.containerSize,d.containerOffset),i=(d.size,d.position),j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/e.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*e.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top,m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position")),o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(){var d=a(this).data("omResizable"),e=d.options,g=(d.position,d.containerOffset),h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.omWidget("om.sortable",a.om.omMouse,{widgetEventPrefix:"sort",options:{helper:"original",items:"> *",placeholder:!1},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},_mouseCapture:function(b){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var d=null,e=this;return a(b.target).parents().each(function(){return a.data(this,"sortable-item")==e?(d=a(this),!1):void 0}),a.data(b.target,"sortable-item")==e&&(d=a(b.target)),d?(this.currentItem=d,!0):!1},_mouseStart:function(b){return this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.helper.css("zIndex",1e3),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var d,e,f,g,h;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options,d=!1,this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<20?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+20:b.pageY-this.overflowOffset.top<20&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-20),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<20?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+20:b.pageX-this.overflowOffset.left<20&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-20),this.positionAbs=this._convertPositionTo("absolute"),this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e=this.items.length-1;e>=0;e--)if(f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f),h&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up",!this._intersectsWithSides(f))break;this._rearrange(b,f);break}return this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,b){return a?(this._clear(a,b),!1):void 0},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height;return this.offset.click.top,this.offset.click.left,f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_isOverAxis:function(a,b,c){return a>b&&b+c>a},_intersectsWithPointer:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return d?this.floating?f&&"right"==f||"down"==e?2:1:e&&("down"==e?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"==e&&c||"left"==e&&!c:d&&("down"==d&&b||"up"==d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_refreshItems:function(){var c,d,e,f,g,h,i;for(this.items=[],this.containers=[this],c=this.items,d=[a(this.options.items,this.element),this],e=d[1],f=d[0],g=0,h=f.length;h>g;g++)i=a(f[g]),i.data("sortable-item",e),c.push({item:i,instance:e,width:0,height:0,left:0,top:0})},refreshPositions:function(a){var b,c,d,e;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),b=this.items.length-1;b>=0;b--)c=this.items[b],c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0]||(d=c.item,a||(c.width=d.outerWidth(),c.height=d.outerHeight()),e=d.offset(),c.left=e.left,c.top=e.top);return this},_createPlaceholder:function(b){var e,c=b||this,d=c.options;d.placeholder&&d.placeholder.constructor!=String||(e=d.placeholder,d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b}}),c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder)},_createHelper:function(){var c=this.currentItem;return c.parents("body").length||a(this.currentItem[0].parentNode)[0].appendChild(c[0]),this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")},c},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent,c=b.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],b[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),(b[0]==document.body||b[0].tagName&&"html"==b[0].tagName.toLowerCase()&&a.browser.msie)&&(c={top:0,left:0}),{top:c.top+(parseInt(b.css("borderTopWidth"),10)||0),left:c.left+(parseInt(b.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var f,g,d=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),e=/(html|body)/i.test(d[0].tagName);return"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),f=b.pageX,g=b.pageY,{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(a,b){var c,e;if(this.reverting=!1,c=[],!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(e in this._storedCSS)("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])&&(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.helper.css("zIndex",1e3),this.cancelHelperRemoval){if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return!1}if(this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.OMWidget.prototype._trigger.apply(this,arguments)},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.om.sortable,{version:"1.1"})}(jQuery),function(a){var b=["collapse","min","max","close"],c=["om-panel-tool-collapse","om-panel-tool-expand","om-panel-tool-min","om-panel-tool-max","om-panel-tool-close"],d={anim:!0,speed:"fast"};a.omWidget("om.omPanel",{options:{title:"",width:"auto",height:"auto",header:!0,collapsible:!1,closable:!1,closed:!1,collapsed:!1,tools:[],loadingMessage:"default",_closeMode:"hidden",_helpMsg:!1},_create:function(){this.element.addClass("om-panel-body om-widget-content").wrap("<div class='om-widget om-panel'></div>")},_init:function(){var d,e,a=this.options,b=this.element,c=b.parent();this._renderHeader(),d=b.prev(),a.header===!1&&b.addClass("om-panel-noheader"),this._bindEvent(),this._resize(c),e=a.header!==!1?d.outerHeight():0,a.collapsed!==!1?("auto"!==a.height&&c.height(e),b.hide(),a.header!==!1&&d.find(">.om-panel-tool >.om-panel-tool-collapse").removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand")):(b.show(),"auto"!==a.height&&c.height(e+b.outerHeight()),a.header!==!1&&d.find(">.om-panel-tool >.om-panel-tool-expand").removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse")),a.closed!==!1?this._hide(c):this._show(c),this.reload()},_hide:function(a){"hidden"===this.options._closeMode?a.hide():"visibility"===this.options._closeMode&&a.addClass("om-helper-hidden-accessible")},_show:function(a){"hidden"===this.options._closeMode?a.show():"visibility"===this.options._closeMode&&a.removeClass("om-helper-hidden-accessible")},_bindEvent:function(){var b=this,c=this.element,d=this.options,e=c.prev();d.collapsible!==!1&&e.click(function(c){a(c.target).is(".om-panel-icon,.om-panel-title,.om-panel-header")&&(d.collapsed!==!1?b.expand():b.collapse())}).find(".om-panel-tool-collapse , .om-panel-tool-expand").click(function(){d.collapsed!==!1?b.expand():b.collapse()}),d.closable!==!1&&e.find(".om-panel-tool-close").click(function(){b.close()})},_renderHeader:function(){var b,d,e,f,g,h,j,i;if(this.header&&this.header.remove(),this.options.header!==!1){if(b=this,d=this.options,e=d.tools,f=this.header=a("<div class='om-panel-header'></div>").insertBefore(this.element),d._helpMsg&&f.parent().addClass("helpMsg"),d.iconCls&&a("<div class='om-icon om-panel-icon'></div>").addClass(d.iconCls).appendTo(f),a("<div class='om-panel-title'></div>").html(d.title).appendTo(f),$tool=a("<div class='om-panel-tool'></div>"),d.collapsible!==!1&&a("<div class='om-icon om-panel-tool-collapse'></div>").appendTo($tool),a.isArray(e))for(g=0,h=e.length;h>g;g++)i=e[g],(j=this._getInnerToolCls(i.id))?a("<div class='om-icon'></div>").addClass(j).click(function(a){i.handler.call(this,b,a)}).appendTo($tool):"string"==typeof i.iconCls?a("<div class='om-icon'></div>").addClass(i.iconCls).click(function(a){i.handler.call(this,b,a)}).appendTo($tool):a.isArray(i.iconCls)&&function(c){a("<div class='om-icon'></div>").addClass(c.iconCls[0]).click(function(a){c.handler.call(this,b,a)}).hover(function(){c.iconCls[1]&&a(this).toggleClass(c.iconCls[1])}).appendTo($tool)}(i);else try{a(e).appendTo($tool)}catch(k){throw"bad format of jquery selector."}d.closable!==!1&&a("<div class='om-icon om-panel-tool-close'></div>").appendTo($tool),$tool.find(">div.om-icon").hover(function(){var b=this;a.each(c,function(){a(b).hasClass(this)&&a(b).toggleClass(this+"-hover")})}),$tool.appendTo(f)}},_resize:function(a){var d,e,b=this.element,c=b.prev();a=b.parent(),d=this.options,"fit"==d.width?(d.width="100%",a.width("100%"),c.css("width",""),b.css("width","")):"auto"!==d.width?(a.width(d.width),c.outerWidth(a.width()),b.outerWidth(a.width())):(e=b.attr("style"),e&&-1!==e.indexOf("width")?(a.width(b.outerWidth()),c.outerWidth(b.outerWidth())):(a.css("width",""),c.css("width",""),b.css("width",""))),"fit"==d.height?(d.height="100%",a.height("100%"),b.outerHeight(a.height()-(this.options.header!==!1?c.outerHeight():0))):"auto"!==d.height?(a.height(d.height),b.outerHeight(a.height()-(this.options.header!==!1?c.outerHeight():0))):(e=b.attr("style"),e&&-1!==e.indexOf("height")?a.height(c.outerHeight()+b.outerHeight()):(a.css("height",""),b.css("height","")))},_getInnerToolCls:function(c){return-1!=a.inArray(c,b)?"om-panel-tool-"+c:null},_showLoadingMessage:function(){var b=this.options,c=this.element,d=c.next(".om-panel-loadingMessage"),e={width:c.innerWidth(),height:c.innerHeight(),left:c.position().left+parseInt(c.css("border-left-width")),top:c.position().top};0===d.length?"default"===b.loadingMessage?a("<div class='om-panel-loadingMessage'><div class='valignMiddle'><div class='loadingImg'></div></div></div>").css(e).appendTo(c.parent()):a("<div class='om-panel-loadingMessage'></div>").appendTo(c.parent()).html(b.loadingMessage).css(e):d.css(e).show()},_hideLoadingMessage:function(){this.element.parent().find(".om-panel-loadingMessage").hide()},setTitle:function(a){this.element.prev().find(">.om-panel-title").html(a)},setIconClass:function(b){var c=this.element.prev(),d=c.find(">.om-panel-icon");null==b&&0!==d.length?d.remove():(0==d.length&&(d=a("<div class='om-icon om-panel-icon'></div>").insertBefore(c.find(">.om-panel-title"))),this.options.iconCls&&d.removeClass(this.options.iconCls),d.addClass(b),this.options.iconCls=b)},open:function(){var a=this.element,b=this.options;if(b.closed){if(b.onBeforeOpen&&this._trigger("onBeforeOpen")===!1)return;this._show(a.parent()),b.closed=!1,b.onOpen&&this._trigger("onOpen")}},close:function(){var a=this.element,b=this.options;if(!b.closed){if(b.onBeforeClose&&this._trigger("onBeforeClose")===!1)return;this._hide(a.parent()),b.closed=!0,b.onClose&&this._trigger("onClose")}},reload:function(b){var c=this.options,d=this.element,e=this;if(!d.data("loading"))return d.data("loading",!0),(b=b||c.url)?(c.url=b,this._showLoadingMessage(),a.ajax(b,{cache:!1,success:function(a,b,f){d.html(c.preProcess?c.preProcess.call(d[0],a,b):a),d.data("loading",!1),e._hideLoadingMessage(),c.onSuccess&&e._trigger("onSuccess",null,a,b,f)},error:function(a,b,f){d.data("loading",!1),e._hideLoadingMessage(),c.onError&&e._trigger("onError",null,a,b,f)}}),void 0):(d.data("loading",!1),void 0)},resize:function(b){var d,e,c=this.options;a.isPlainObject(b)?(d=b.width||null,e=b.height||null):(d=arguments[0],e=arguments[1]),c.width=d||c.width,c.height=e||c.height,this._resize(this.element.parent())},collapse:function(){var j,a=this,b=this.element,c=b.prev(),e=b.parent(),f=b.next(".om-panel-loadingMessage"),g=this.options,h=d.anim,i=d.speed;void 0!=arguments[0]&&(h=arguments[0]),i=arguments[1]||i,g.onBeforeCollapse&&a._trigger("onBeforeCollapse")===!1||(e.stop(!0,!0),0!==c.length&&(j=c.find("> .om-panel-tool > div.om-panel-tool-collapse"),0!==j.length&&(j.removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand"),j.hasClass("om-panel-tool-collapse-hover")&&j.toggleClass("om-panel-tool-collapse-hover om-panel-tool-expand-hover"))),e.animate({height:"-="+b.outerHeight()},h?i||"normal":0,function(){b.hide(),f.hide(),"auto"===g.height&&e.css("height",""),g.onCollapse&&a._trigger("onCollapse")}),g.collapsed=!0)},expand:function(){var j,a=this,b=this.element,c=b.prev(),e=b.parent(),f=b.next(".om-panel-loadingMessage"),g=this.options,h=d.anim,i=d.speed;void 0!=arguments[0]&&(h=arguments[0]),i=arguments[1]||i,g.onBeforeExpand&&a._trigger("onBeforeExpand")===!1||(e.stop(!0,!0),0!==c.length&&(j=c.find("> .om-panel-tool > div.om-panel-tool-expand"),0!==j.length&&(j.removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse"),j.hasClass("om-panel-tool-expand-hover")&&j.toggleClass("om-panel-tool-expand-hover om-panel-tool-collapse-hover"))),"auto"===g.height&&e.height(c.outerHeight()),b.show(),b.data("loading")&&f.show(),e.animate({height:"+="+b.outerHeight()},h?i||"normal":0,function(){"auto"===g.height&&e.css("height",""),g.onExpand&&a._trigger("onExpand")}),g.collapsed=!1)},destroy:function(){var a=this.element;a.parent().after(a).remove()}})}(jQuery),function(a){a.omWidget("om.omGrid",{options:{height:462,width:"100%",colModel:!1,autoFit:!1,showIndex:!0,dataSource:!1,extraData:{},method:"GET",preProcess:!1,limit:15,pageShow:[10,20,50,100,200,500,1e3],rowClasses:["oddRow","evenRow"],singleSelect:!0,title:"",onRowSelect:function(){},onRowDeselect:function(){},onRowClick:function(){},onRowDblClick:function(){},onPageChange:function(){},onSuccess:function(){},onError:function(){},onRefresh:function(){},_onRefreshCallbacks:[],_onResizableCallbacks:[],_onResizeCallbacks:[]},_create:function(){var d,b=this.options,c=this.element.show().attr({cellPadding:0,cellSpacing:0,border:0}).empty().append("<tbody></tbody>");c.wrap('<div class="om-grid om-widget om-widget-content"><div class="bDiv" style="width:auto"></div></div>').closest(".om-grid"),a.isArray(this._getColModel())&&(this.hDiv=a('<div class="hDiv om-state-default"></div>').append('<div class="hDivBox"><table cellPadding="0" cellSpacing="0"></table></div>'),c.parent().before(this.hDiv),this.pDiv=a('<div class="pDiv om-state-default"></div>'),c.parent().after(this.pDiv),d=c.closest(".om-grid"),this.loadMask=a('<div class="gBlock"><div align="center" class="gBlock-valignMiddle" ><div class="loadingImg" style="display:block"/></div></div>').mousedown(function(){return!1}).hide(),d.append(this.loadMask),this.titleDiv=a("<div class='titleDiv'></div>"),d.prepend(this.titleDiv),this.tbody=this.element.children().eq(0),this._guid=0,b._onRefreshCallbacks.push(function(){this._refreshHeaderCheckBox()}),this._bindScrollEnvent())},_init:function(){var b=this.element,c=this.options,d=b.closest(".om-grid");this._measure(d,c),a.isArray(this._getColModel())&&(this._extraData={},this.tbody.empty(),a("table",this.hDiv).empty(),this.pDiv.empty(),this.titleDiv.empty(),this._buildTableHead(),this._buildPagingToolBar(),this._buildLoadMask(),this._bindSelectAndClickEnvent(),this._makeColsResizable(),this._buildTitle(),this._resetHeight(),this.pageData={nowPage:1,totalPages:1},this._populate())},resize:function(b){var c=this,d=this.options,e=this.element.closest(".om-grid");
b=b||{},d.width=b.width||arguments[0]||d.width,d.height=b.height||arguments[1]||d.height,this._measure(e,d),this._buildLoadMask(),this._resetWidth(),this._resetHeight(),a.each(d._onResizeCallbacks,function(a,b){b.call(c)})},_measure:function(a,b){a.outerWidth("fit"===b.width?a.parent().width():b.width),a.outerHeight("fit"===b.height?a.parent().height():b.height)},_resetHeight:function(){var a=this.element,b=a.closest(".om-grid"),c=this.hDiv.outerHeight(!0),d=this.pDiv.is(":hidden")?0:this.pDiv.outerHeight(!0),e=this.titleDiv.is(":hidden")?0:this.titleDiv.outerHeight(!0);b.children(".bDiv").outerHeight(b.height()-c-d-e)},_resetWidth:function(){var h,c=(this.options,this._getColModel()),d=-1,f=(this.element.closest(".om-grid"),a("thead",this.hDiv)),g=0;a.each(c,function(a,b){var c=b.width||60;"autoExpand"==b.width&&(c=0,d=a),f.find("th[axis='col"+a+"'] >div").width(c),g+=c}),this._fixHeaderWidth(d,g),h={},a(this._getHeaderCols()).each(function(){h[a(this).attr("abbr")]=a("div",a(this)).width()}),this.tbody.find("td[abbr]").each(function(b,c){var d=a(c).prop("abbr");null!=h[d]&&a(c).find(">div:first").width(h[d])})},_getColModel:function(){return this.options.colModel},_buildTitle:function(){var a=this.titleDiv;this.options.title?a.html("<div class='titleContent'>"+this.options.title+"</div>").show():a.empty().hide()},_fixHeaderWidth:function(b,c){var h,i,j,k,l,d=this.element.closest(".om-grid"),e=a("thead",this.hDiv),f=this._getColModel(),g=this.options;-1!=b?(h=d.width()-32,i=e.find('th[axis="col'+b+'"] div'),i.parent().hide(),j=h-e.width(),i.parent().show(),0>=j?i.css("width",60):i.css("width",j)):g.autoFit&&(h=d.width()-22,j=h-e.width(),k=1+j/c,l=e.find('th[axis^="col"] >div'),a.each(f,function(a){var b=l.eq(a);b.width(parseInt(b.width()*k))}))},_buildTableHead:function(){var j,k,l,m,n,o,p,q,b=this.options,c=this.element,e=(c.closest(".om-grid"),this._getColModel()),f=0,g=0,h=0,i=-1;for(thead=a("<thead></thead>"),tr=a("<tr></tr>").appendTo(thead),b.showIndex&&(j=a("<th></th>").attr({axis:"indexCol",align:"center"}).addClass("indexCol").append(a('<div class="indexheader" style="text-align:center;width:25px;"></div>')),tr.append(j),g=25),b.singleSelect||(j=a("<th></th>").attr({axis:"checkboxCol",align:"center"}).addClass("checkboxCol").append(a('<div class="checkboxheader" style="text-align:center;width:17px;"><span class="checkbox"/></div>')),tr.append(j),h=17),k=0,l=e.length;l>k;k++)m=e[k],n=m.width||60,o=m.align||"center","autoExpand"==n&&(n=0,i=k),p=a("<div></div>").html(m.header).css({"text-align":o,width:n}),m.wrap&&p.addClass("wrap"),q=a("<th></th>").attr("axis","col"+k).addClass("col"+k).append(p),m.name&&q.attr("abbr",m.name),m.align&&q.attr("align",m.align),f+=n,tr.append(q);c.prepend(thead),a("table",this.hDiv).append(thead),this._fixHeaderWidth(i,f),this.thead=thead,thead=null},_buildPagingToolBar:function(){var c,d,e,f,g,h,b=this.options;if(b.limit<=0)return this.pDiv.css("border-width",0).hide(),this.pager=this.pDiv,void 0;for(c=this,d=this.element,e=this.pDiv,e.show().html('<div class="pDiv2"><div class="pGroup2"></div><div class="pGroup"><div class="pFirst pButton om-icon"><span class="om-icon-seek-start"></span></div><div class="pPrev pButton om-icon"><span class="om-icon-seek-prev"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pControl"></span></div><div class="btnseparator"></div><div class="pGroup"><div class="pNext pButton om-icon"><span class="om-icon-seek-next"></span></div><div class="pLast pButton om-icon"><span class="om-icon-seek-end"></span></div></div><div class="btnseparator"></div><div class="pGroup"><div class="pReload pButton om-icon"><span class="om-icon-refresh"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div></div>'),a(".pGroup2",e).append("<select></select>"),f=0,g=0;g<c.options.pageShow.length;g++)c.options.pageShow[g]<c.options.limit?a("select",e).append("<option value='"+c.options.pageShow[g]+"'>"+c.options.pageShow[g]+"</option>"):0==f&&c.options.pageShow[g]>c.options.limit?(f=1,a("select",e).append("<option value='"+c.options.limit+"'>"+c.options.limit+"</option>"),a("select",e).append("<option value='"+c.options.pageShow[g]+"'>"+c.options.pageShow[g]+"</option>")):c.options.pageShow[g]==c.options.limit?(f=1,a("select",e).append("<option value='"+c.options.pageShow[g]+"'>"+c.options.pageShow[g]+"</option>")):a("select",e).append("<option value='"+c.options.pageShow[g]+"'>"+c.options.pageShow[g]+"</option>");a("select",e).val(c.options.limit),a("select",e).change(function(){c.options.limit=a("select",e).children("option:selected").val(),c._populate()}),h=a.om.lang._get(b,"omGrid","pageText").replace(/{totalPage}/,"<span>1</span>").replace(/{index}/,'<input type="text" size="4" value="1" />'),a(".pControl",e).html(h),d.parent().after(e),a(".pReload",e).click(function(){c._populate()}),a(".pFirst",e).click(function(){c._changePage("first")}),a(".pPrev",e).click(function(){c._changePage("prev")}),a(".pNext",e).click(function(){c._changePage("next")}),a(".pLast",e).click(function(){c._changePage("last")}),a(".pControl input",e).keydown(function(b){b.keyCode==a.om.keyCode.ENTER&&c._changePage("input")}),a(".pButton",e).hover(function(){a(this).addClass("om-state-hover")},function(){a(this).removeClass("om-state-hover")}),this.pager=e},_buildLoadMask:function(){var a=this.element.closest(".om-grid");this.loadMask.css({width:"100%",height:a.height()})},_changePage:function(b){var c,f,g,h,i,j;if(this.loading)return!0;switch(c=this.element,this.options,c.closest(".om-grid"),f=this.pageData,g=f.nowPage,h=f.totalPages,i=g,this._oldPage=g,b){case"first":i=1;break;case"prev":g>1&&(i=g-1);break;case"next":h>g&&(i=g+1);break;case"last":i=h;break;case"input":j=parseInt(a(".pControl input",c.closest(".om-grid")).val()),isNaN(j)&&(j=g),1>j?j=1:j>h&&(j=h),a(".pControl input",this.pDiv).val(j),i=j;break;default:/\d/.test(b)&&(j=parseInt(b),isNaN(j)&&(j=1),1>j?j=1:j>h&&(j=h),a(".pControl input",c.closest(".om-grid")).val(j),i=j)}return i==g?!1:(this._trigger("onPageChange",null,b,i)!==!1&&(f.nowPage=i,this._populate()),void 0)},_populate:function(){var g,h,i,j,k,b=this,c=this.element,d=c.closest(".om-grid"),e=this.options,f=a(".pPageStat",d);return e.dataSource?this.loading?!0:(g=this.pageData,h=g.nowPage||1,i=a(".gBlock",d),this.loading=!0,f.html(a.om.lang._get(e,"omGrid","loadingMsg")),i.show(),j=e.limit<=0?1e8:a("select",d).children("option:selected").val(),k=a.extend(!0,{},this._extraData,e.extraData,{start:j*(h-1),limit:j,_time_stamp_:(new Date).getTime()}),a.ajax({type:e.method,url:e.dataSource,data:k,dataType:"json",success:function(a,c,d){var g,j,f=e.onSuccess;for("function"==typeof f&&b._trigger("onSuccess",null,a,c,d),b._addData(a),g=0,j=e._onRefreshCallbacks.length;j>g;g++)e._onRefreshCallbacks[g].call(b);b._trigger("onRefresh",null,h,a.rows),i.hide(),b.loading=!1},error:function(c,d,g){f.html(a.om.lang._get(e,"omGrid","errorMsg")).css("color","red");try{var h=e.onError;"function"==typeof h&&h(c,d,g)}catch(j){}finally{return i.hide(),b.loading=!1,b.pageData.data={rows:[],total:0},!1}}}),void 0):(a(".pPageStat",d).html(e.emptygMsg),!1)},_addData:function(b){var c=this.options,d=this.element,e=d.closest(".om-grid"),g=(a(".pPageStat",e),c.preProcess),h=this.pageData;g&&(b=g(b)),h.data=b,h.totalPages=Math.ceil(b.total/a("select",e).children("option:selected").val()),this._buildPager(),this._renderDatas()},_buildPager:function(){var d,e,f,g,h,i,j,k,l,b=this.options;b.limit<=0||(this.element,d=this.pager,e=a(".pControl",d),f=this.pageData,g=f.nowPage,h=f.totalPages,i=f.data,j=b.limit*(g-1)+1,k=j-1+i.rows.length,l="",l=0===i.total?a.om.lang._get(b,"omGrid","emptyMsg"):a.om.lang._get(b,"omGrid","pageStat").replace(/{from}/,j).replace(/{to}/,k).replace(/{total}/,i.total),a("input",e).val(g),a("span",e).html(h),a(".pPageStat",d).html(l))},_renderDatas:function(){var q,r,b=this,c=this.element,d=this.options,f=(c.closest(".om-grid"),this._getHeaderCols()),g=this.pageData.data.rows||[],h=this._getColModel(),i=d.rowClasses,j=a("tbody",c).empty(),k="function"==typeof i,l=this.pageData,m=(l.nowPage-1)*d.limit,n="<td align='$' abbr='$' class='$'><div align='$' class='innerCol $' style='width:$px'>$</div></td>",o=[],p=[];this.pageData.data.rows||(this.pageData.data.rows=[]),b.hDiv.scrollLeft(0),a(f).each(function(b){o[b]=a("div",a(this)).width()}),a.each(g,function(c,d){var e=k?i(c,d):i[c%i.length],g=b._buildRowCellValues(h,d,c);p.push("<tr _grid_row_id="+b._guid++ +" class='om-grid-row "+e+"'>"),a(f).each(function(b){var f,i,d=a(this).attr("axis"),e=!1;"indexCol"==d?f=c+m+1:"checkboxCol"==d?f='<span class="checkbox"/>':"col"==d.substring(0,3)?(i=d.substring(3),f=g[i],h[i].wrap&&(e=!0)):f="",q=[this.align,this.abbr,d,this.align,e?"wrap":"",o[b],f],r=0,p.push(n.replace(/\$/g,function(){return q[r++]}))}),p.push("</tr>")}),j.html(p.join(" "))},_getHeaderCols:function(){return this.hDiv.find("th[axis]")},_buildRowCellValues:function(a,b,c){var f,h,g,i,j,k,l,d=a.length,e=[];for(f=0;d>f;f++){if(g=a[f],i=g.renderer,g.name.indexOf(".")>0)for(j=g.name.split("."),k=1,l=j.length,h=b[j[0]];l>k&&h&&void 0!=(h=h[j[k++]]););void 0==h&&(h=void 0==b[g.name]?"":b[g.name]),"function"==typeof i&&(h=i(h,b,c)),e[f]=h,h=null}return e},_bindScrollEnvent:function(){var b=this;this.tbody.closest(".bDiv").scroll(function(){b.hDiv.scrollLeft(a(this).scrollLeft())})},_bindSelectAndClickEnvent:function(){var b=this;this.tbody.unbind(),this.options.singleSelect?(this.tbody.delegate("tr.om-grid-row","click",function(c){var f,d=a(this),e=b._getRowIndex(d);d.hasClass("om-state-highlight")||(f=b._getRowIndex(b.tbody.find("tr.om-state-highlight:not(:hidden)")),-1!=f&&b._rowDeSelect(f),b._rowSelect(e)),b._trigger("onRowClick",c,e,b._getRowData(e))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(a){var c=b._getRowIndex(this);b._trigger("onRowDblClick",a,c,b._getRowData(c))})):(a("th.checkboxCol span.checkbox",this.thead).click(function(){var e,c=a(this),d=b._getTrs().size();if(c.hasClass("selected"))for(c.removeClass("selected"),e=0;d>e;e++)b._rowDeSelect(e);else for(c.addClass("selected"),e=0;d>e;e++)b._rowSelect(e)}),this.tbody.delegate("tr.om-grid-row","click",function(c){var d=a(this),e=b._getRowIndex(d);d.hasClass("om-state-highlight")?b._rowDeSelect(e):b._rowSelect(e),b._refreshHeaderCheckBox(),b._trigger("onRowClick",c,e,b._getRowData(e))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(c){var d=a(this),e=b._getRowIndex(d);d.hasClass("om-state-highlight")||(b._rowSelect(e),b._refreshHeaderCheckBox()),b._trigger("onRowDblClick",c,e,b._getRowData(e))}))},_getRowData:function(a){return this.pageData.data.rows[a]},_rowSelect:function(b){var c=this.element,f=(this.options,a("tbody",c),this._getTrs().eq(b)),g=a("td.checkboxCol span.checkbox",f);f.addClass("om-state-highlight"),g.addClass("selected"),this._trigger("onRowSelect",null,b,this._getRowData(b))},_rowDeSelect:function(b){var c=this.element,f=(this.options,a("tbody",c),this._getTrs().eq(b)),g=a("td.checkboxCol span.checkbox",f);f.removeClass("om-state-highlight"),g.removeClass("selected"),this._trigger("onRowDeselect",null,b,this._getRowData(b))},_refreshHeaderCheckBox:function(){var b=this.getSelections(),c=this._getTrs(),d=a("th.checkboxCol span.checkbox",this.thead),e=c.length;d.toggleClass("selected",e>0&&e==b.length)},_makeColsResizable:function(){var f,b=this,c=b.tbody.closest(".bDiv"),d=b.element.closest(".om-grid"),e=this.titleDiv;a('th[axis^="col"] div',b.thead).omResizable({handles:"e",containment:"document",minWidth:60,resize:function(f){var h=a(this),i=h.parent().attr("abbr"),j=a('td[abbr="'+i+'"] > div',b.tbody),k=b.thead.closest(".hDiv");h.width(f.size.width).height(""),j.width(f.size.width).height(""),c.height(d.height()-(e.is(":hidden")?0:e.outerHeight(!0))-k.outerHeight(!0)-(b.pDiv.is(":hidden")?0:b.pDiv.outerHeight(!0))),k.scrollLeft(c.scrollLeft())},start:function(){f=a(this).parent().width()},stop:function(){var j,k,g=b.options._onResizableCallbacks,h=a(this).parent(),i=b.thead.closest(".hDiv");for(f=h.width()-f,j=0,k=g.length;k>j;j++)g[j].call(b,h,f);i.scrollLeft(c.scrollLeft())}})},_getRowIndex:function(a){return this._getTrs().index(a)},_getTrs:function(){return this.tbody.find("tr.om-grid-row:not([_delete]=true)")},setData:function(a){this.options.dataSource=a,this.pageData={nowPage:1,totalPages:1},this._populate()},getData:function(){return this.pageData.data},refresh:function(){var b,c,d;if(this.loading)return!0;for(this.loading=!0,b=this.options,a(".pPageStat",this.pager).html(a.om.lang._get(b,"omGrid","loadingMsg")),this.loadMask.show(),this._buildPager(),this._renderDatas(),this._trigger("onRefresh",null,this.pageData.nowPage||1,this.pageData.data.rows),c=0,d=b._onRefreshCallbacks.length;d>c;c++)b._onRefreshCallbacks[c].call(this);this.loadMask.hide(),this.loading=!1},reload:function(a){return this.loading?!0:("undefined"!=typeof a&&(a=parseInt(a)||1,0>a&&(a=1),a>this.pageData.totalPages&&(a=this.pageData.totalPages),this.pageData.nowPage=a),this._populate(),void 0)},setSelections:function(b){var d,c=this;a.isArray(b)||(b=[b]),d=this.getSelections(),a(d).each(function(){c._rowDeSelect(this)}),a(b).each(function(){c._rowSelect(this)}),c._refreshHeaderCheckBox()},getSelections:function(a){var f,b=this,c=b._getTrs(),d=c.filter(".om-state-highlight"),e=[];return a?(f=b.getData().rows,d.each(function(a,b){e[e.length]=f[c.index(b)]})):d.each(function(a,b){e[e.length]=c.index(b)}),e},destroy:function(){var a=this.element;a.closest(".om-grid").after(a).remove()}}),a.om.lang.omGrid={loadingMsg:"...",emptyMsg:"",errorMsg:"",pageText:"{index}{totalPage}",pageStat:"{total}{from}-{to}"}}(jQuery),function(a){var c="om-accordion-panel-"+(0|65536*(1+Math.random())).toString(16).substring(1)+"-",d=0;a.omWidget("om.omAccordion",{options:{active:0,autoPlay:!1,collapsible:!1,disabled:!1,height:"auto",header:"> ul:first li",iconCls:null,interval:1e3,switchEffect:!1,switchMode:"click",width:"auto",onActivate:function(){},onBeforeActivate:function(){},onBeforeCollapse:function(){},onCollapse:function(){}},activate:function(a){var b=this.options;clearInterval(b.autoInterId),this._activate(a),this._setAutoInterId(this)},disable:function(){var d,b=this.element,c=this.options;c.autoPlay&&clearInterval(c.autoInterId),c.disabled=!0,0===(d=b.find(">.om-accordion-disable")).length&&a("<div class='om-accordion-disable'></div>").css({position:"absolute",top:0,left:0}).width(b.outerWidth()).height(b.outerHeight()).appendTo(b),d.show()},enable:function(){this.options.disabled=!1,this.element.find(">.om-accordion-disable").hide()},getActivated:function(){var c,d,b=a.data(this.element,"panels");for(c=0,d=b.length;d>c;c++)if(!b[c].omPanel("option","collapsed"))return b[c].prop("id");return null},getLength:function(){return a.data(this.element,"panels").length},reload:function(b){var c=a.data(this.element,"panels");return this.options.disabled!==!1||0===c.length?this:(b=this._correctIndex(b),c[b].omPanel("reload"),void 0)},resize:function(){var b=this.element,c=this.options,d=a.data(this.element,"panels"),e=0;this._initWidthOrHeight("width"),this._initWidthOrHeight("height"),a.each(d,function(a,b){e+=b.prev().outerHeight()}),a.each(d,function(a,d){"auto"===c.height?d.css("height",""):d.outerHeight(b.height()-e)})},setTitle:function(b,c){var d=a.data(this.element,"panels");return this.options.disabled!==!1||0===d.length?this:(b=this._correctIndex(b),d[b].omPanel("setTitle",c),void 0)},url:function(b,c){var d=a.data(this.element,"panels");c&&this.options.disabled===!1&&0!==d.length&&(b=this._correctIndex(b),d[b].omPanel("option","url",c))},_create:function(){var a=this.element,b=this.options;a.addClass("om-widget om-accordion").css("position","relative"),this._renderPanels(),b.active=this._correctIndex(b.active),this.resize(),this._buildEvent(),b.disabled!==!1&&this.disable()},_correctIndex:function(b){var h,c=this.element,d=a.data(this.element,"panels"),e=c.children().find(">div#"+b),f=d.length,g=b;return b=e.length?c.find(">.om-panel").index(e.parent()):b,b=-1==b?g:b,h=parseInt(b),h=(isNaN(h)&&"0"||h)-0,0==f||-1===h&&this.options.collapsible!==!1?-1:0>h?0:h>=f?f-1:h},_panelCreateCollapse:function(a,b){var e,f,g,c=this.element,d=this.options;return-1===d.active&&d.collapsible===!0?!0:(e=c.find(">div#"+d.active),f=c.children().index(e),f=-1==f?d.active:f,g=parseInt(f),g=(isNaN(g)&&"0"||g)-0,g=0>g?0:g>=a?a-1:g,g!==b)},_renderPanels:function(){var j,b=this.element,e=this,f=[],g=this.options,h=b.find(g.header),i=[];h.find("a").each(function(f){var l,m,n,o,h=this.getAttribute("href",2),k=h.split("#")[0];k&&(k===location.toString().split("#")[0]||(l=a("base")[0])&&k===l.href)&&(h=this.hash,this.href=h),m=a(this),i[f]={title:m.text(),iconCls:m.attr("iconCls"),onExpand:function(a){e._trigger("onActivate",a,f)},tools:[{id:"collapse",handler:function(a,b){clearInterval(g.autoInterId),e._activate(f,!0),e._setAutoInterId(e),b.stopPropagation()}}],onCollapse:function(a){e._trigger("onCollapse",a,f)},onSuccess:function(){e.resize()},onError:function(){e.resize()}},n=a(">"+h,b),o=n.prop("id"),n[0]?(o||n.prop("id",o=c+d++),n.appendTo(b)):(i[f].url=m.attr("href"),a("<div></div>").prop("id",o=m.prop("id")||c+d++).appendTo(b)),j=j||o}),j&&b.find("#"+j).prevAll().remove(),h.remove(),a.each(i,function(a,b){b.collapsed=e._panelCreateCollapse(i.length,a)}),a.each(b.children(),function(a,b){if(f.push(e._createPanel(b,i[a])),0===a){var c=f[0].prev();c.css("border-top-width",c.css("border-bottom-width"))}}),a.data(b,"panels",f)},_initWidthOrHeight:function(a){var b=this.element,c=this.options,d=this.element.attr("style"),e=c[a];"fit"==e?b.css(a,"100%"):"auto"!==e?b.css(a,e):d&&-1!=d.indexOf(a)?c[a]=b.css(a):b.css(a,"")},_createPanel:function(b,c){return a(b).omPanel(c)},_buildEvent:function(){var b=this.options,c=this;this.element.children().find(">div.om-panel-header").each(function(d){var e=a(this);e.unbind(),"mouseover"==b.switchMode?e.bind("mouseenter.omaccordions",function(){clearInterval(b.autoInterId);var f=a.data(c.element,"expandTimer");"undefined"!=typeof f&&clearTimeout(f),f=setTimeout(function(){c._activate(d,!0),c._setAutoInterId(c)},200),a.data(c.element,"expandTimer",f)}):"click"==b.switchMode&&e.bind("click.omaccordions",function(){clearInterval(b.autoInterId),c._activate(d,!0),c._setAutoInterId(c)}),e.hover(function(){a(this).toggleClass("om-panel-header-hover")})}),b.autoPlay&&(clearInterval(b.autoInterId),c._setAutoInterId(c))},_setAutoInterId:function(a){var b=a.options;b.autoPlay&&(b.autoInterId=setInterval(function(){a._activate("next")},b.interval))},_setOption:function(b,c){a.OMWidget.prototype._setOption.apply(this,arguments);var d=this.options;switch(b){case"active":this.activate(c);break;case"disabled":c===!1?this.enable():this.disable();break;case"width":d.width=c,this._initWidthOrHeight("width");break;case"height":d.height=c,this._initWidthOrHeight("height")}},_activate:function(b,c){var k,l,m,d=a.data(this.element,"panels"),e=d.length,f=this.options,g=this,h=!1,i=-1,j=!1;if(f.disabled===!1||0!==e){for(b="next"===b?(f.active+1)%e:g._correctIndex(b),f.switchEffect&&(j=!0,k="fast"),l=0;e>l;l++)a(d[l]).stop(!0,!0);m=g.getActivated(),h=!!m,h?(i=g._correctIndex(m),i==b?c===!0&&f.collapsible!==!1&&g._trigger("onBeforeCollapse",null,i)!==!1?(a(d[i]).omPanel("collapse",j,k),f.active=-1):f.active=i:-1===b?g._trigger("onBeforeCollapse",null,i)!==!1?(a(d[i]).omPanel("collapse",j,k),f.active=-1):f.active=i:g._trigger("onBeforeCollapse",null,i)!==!1&&(canAct=g._trigger("onBeforeActivate",null,b)!==!1)?(a(d[i]).omPanel("collapse",j,k),a(d[b]).omPanel("expand",j,k),f.active=b):f.active=i):"-1"===b?f.active=-1:g._trigger("onBeforeActivate",null,b)!==!1&&(a(d[b]).omPanel("expand",j,k),f.active=b)}}})}(jQuery),function(a){function b(){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}a.fn.omAjaxSubmit=function(c){function d(d){function f(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function g(){function c(){try{var a=f(q).readyState;b("state = "+a),"uninitialized"==a.toLowerCase()&&setTimeout(c,50)}catch(d){b("Server abort: ",d," (",d.name,")"),i(y),v&&clearTimeout(v),v=void 0}}var k,l,d=h.attr("target"),g=h.attr("action");j.setAttribute("target",o),e||j.setAttribute("method","POST"),g!=m.url&&j.setAttribute("action",m.url),!m.skipEncodingOverride&&(!e||/post/i.test(e))&&h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(v=setTimeout(function(){u=!0,i(x)},m.timeout)),k=[];try{if(m.extraData)for(l in m.extraData)k.push(a('<input type="hidden" name="'+l+'" />').attr("value",m.extraData[l]).appendTo(j)[0]);m.iframeTarget||(p.appendTo("body"),q.attachEvent?q.attachEvent("onload",i):q.addEventListener("load",i,!1)),setTimeout(c,15),j.submit()}finally{j.setAttribute("action",g),d?j.setAttribute("target",d):h.removeAttr("target"),a(k).remove()}}function i(c){var g,e,h,j,k,l,o,s,t;if(!r.aborted&&!C){try{A=f(q)}catch(d){b("cannot access response document: ",d),c=y}if(c===x&&r)return r.abort("timeout"),void 0;if(c==y&&r)return r.abort("server abort"),void 0;if(A&&A.location.href!=m.iframeSrc||u){q.detachEvent?q.detachEvent("onload",i):q.removeEventListener("load",i,!1),e="success";try{if(u)throw"timeout";if(h="xml"==m.dataType||A.XMLDocument||a.isXMLDoc(A),b("isXml="+h),!h&&window.opera&&(null==A.body||""==A.body.innerHTML)&&--B)return b("requeing onLoad callback, DOM not available"),setTimeout(i,250),void 0;j=A.body?A.body:A.documentElement,r.responseText=j?j.innerHTML:null,r.responseXML=A.XMLDocument?A.XMLDocument:A,h&&(m.dataType="xml"),r.getResponseHeader=function(a){var b={"content-type":m.dataType};return b[a]},j&&(r.status=Number(j.getAttribute("status"))||r.status,r.statusText=j.getAttribute("statusText")||r.statusText),k=m.dataType||"",l=/(json|script|text)/.test(k.toLowerCase()),l||m.textarea?(o=A.getElementsByTagName("textarea")[0],o?(r.responseText=o.value,r.status=Number(o.getAttribute("status"))||r.status,r.statusText=o.getAttribute("statusText")||r.statusText):l&&(s=A.getElementsByTagName("pre")[0],t=A.getElementsByTagName("body")[0],s?r.responseText=s.textContent?s.textContent:s.innerHTML:t&&(r.responseText=t.innerHTML))):"xml"==m.dataType&&!r.responseXML&&null!=r.responseText&&(r.responseXML=D(r.responseText));try{z=F(r,m.dataType,m)}catch(c){e="parsererror",r.error=g=c||e}}catch(c){b("error caught: ",c),e="error",r.error=g=c||e}r.aborted&&(b("upload aborted"),e=null),r.status&&(e=r.status>=200&&r.status<300||304===r.status?"success":"error"),"success"===e?(m.success&&m.success.call(m.context,z,"success",r),n&&a.event.trigger("ajaxSuccess",[r,m])):e&&(void 0==g&&(g=r.statusText),m.error&&m.error.call(m.context,r,e,g),n&&a.event.trigger("ajaxError",[r,m,g])),n&&a.event.trigger("ajaxComplete",[r,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,r,e),C=!0,m.timeout&&clearTimeout(v),setTimeout(function(){m.iframeTarget||p.remove(),r.responseXML=null},100)}}}var k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A,C,B,D,E,F,j=h[0],w=!!a.fn.prop;if(d)for(l=0;l<d.length;l++)k=a(j[d[l].name]),k[w?"prop":"attr"]("disabled",!1);return a(":input[name=submit],:input[id=submit]",j).length?(alert('Error: Form elements must not have name or id of "submit".'),void 0):(m=a.extend(!0,{},a.ajaxSettings,c),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(p=a(m.iframeTarget),t=p.attr("name"),null==t?p.attr("name",o):o=t):(p=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),q=p[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(c){var d="timeout"===c?"timeout":"aborted";b("aborting upload... "+d),this.aborted=1,p.attr("src",m.iframeSrc),r.error=d,m.error&&m.error.call(m.context,r,d,c),n&&a.event.trigger("ajaxError",[r,m,d]),m.complete&&m.complete.call(m.context,r,d)}},n=m.global,n&&!a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[r,m]),m.beforeSend&&m.beforeSend.call(m.context,r,m)===!1?(m.global&&a.active--,void 0):(r.aborted||(s=j.clk,s&&(t=s.name,t&&!s.disabled&&(m.extraData=m.extraData||{},m.extraData[t]=s.value,"image"==s.type&&(m.extraData[t+".x"]=j.clk_x,m.extraData[t+".y"]=j.clk_y))),x=1,y=2,m.forceSync?g():setTimeout(g,10),B=50,D=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},E=a.parseJSON||function(a){return window.eval("("+a+")")},F=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=E(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g}),void 0))}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(!this.length)return b("omAjaxSubmit: skipping submit process - no element selected"),this;if(h=this,"function"==typeof c&&(c={success:c}),e=this.attr("method"),f=this.attr("action"),g="string"==typeof f?a.trim(f):"",g=g||window.location.href||"",g&&(g=(g.match(/^([^#]+)/)||[])[1]),c=a.extend(!0,{url:g,success:a.ajaxSettings.success,method:e||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c),i={},this.trigger("form-pre-serialize",[this,c,i]),i.veto)return b("omAjaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1)return b("omAjaxSubmit: submit aborted via beforeSerialize callback"),this;if(l=this.formToArray(c.semantic),c.data){c.extraData=c.data;for(j in c.data)if(c.data[j]instanceof Array)for(m in c.data[j])l.push({name:j,value:c.data[j][m]});else k=c.data[j],k=a.isFunction(k)?k():k,l.push({name:j,value:k})}return c.beforeSubmit&&c.beforeSubmit(l,this,c)===!1?(b("omAjaxSubmit: submit aborted via beforeSubmit callback"),this):(this.trigger("form-submit-validate",[l,this,c,i]),i.veto?(b("omAjaxSubmit: submit vetoed via form-submit-validate trigger"),this):(n=a.param(l),"GET"==c.method.toUpperCase()?(c.url+=(c.url.indexOf("?")>=0?"&":"?")+n,c.data=null):c.data=n,o=[],c.resetForm&&o.push(function(){h.resetForm()}),c.clearForm&&o.push(function(){h.clearForm()}),!c.dataType&&c.target?(p=c.success||function(){},o.push(function(b){var d=c.replaceTarget?"replaceWith":"html";a(c.target)[d](b).each(p,arguments)})):c.success&&o.push(c.success),c.success=function(a,b,d){var f,g,e=c.context||c;for(f=0,g=o.length;g>f;f++)o[f].apply(e,[a,b,d||h,h])},q=a("input:file",this).length>0,r="multipart/form-data",s=h.attr("enctype")==r||h.attr("encoding")==r,c.iframe!==!1&&(q||c.iframe||s)?c.closeKeepAlive?a.get(c.closeKeepAlive,function(){d(l)}):d(l):(a.browser.msie&&"get"==e&&(t=h[0].getAttribute("method"),"string"==typeof t&&(c.method=t)),c.type=c.method,a.ajax(c)),this.trigger("form-submit-notify",[this,c]),this))},a.fn.ajaxForm=function(c){if(0===this.length){var d={s:this.selector,c:this.context};return!a.isReady&&d.s?(b("DOM not ready, queuing ajaxForm"),a(function(){a(d.s,d.c).ajaxForm(c)}),this):(b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),a(this).omAjaxSubmit(c))}).bind("click.form-plugin",function(b){var e,f,g,c=b.target,d=a(c);if(!d.is(":submit,input:image")){if(e=d.closest(":submit"),0==e.length)return;c=e[0]}f=this,f.clk=c,"image"==c.type&&(void 0!=b.offsetX?(f.clk_x=b.offsetX,f.clk_y=b.offsetY):"function"==typeof a.fn.offset?(g=d.offset(),f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top):(f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop)),setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b){var d,e,f,g,h,i,j,k,l,m,n,c=[];if(0===this.length)return c;if(d=this[0],e=b?d.getElementsByTagName("*"):d.elements,!e)return c;for(f=0,k=e.length;k>f;f++)if(j=e[f],h=j.name)if(b&&d.clk&&"image"==j.type)!j.disabled&&d.clk==j&&(c.push({name:h,value:a(j).val()}),c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}));else if(i=a.fieldValue(j,!0),i&&i.constructor==Array)for(g=0,l=i.length;l>g;g++)c.push({name:h,value:i[g]});else null!==i&&"undefined"!=typeof i&&c.push({name:h,value:i});return!b&&d.clk&&(m=a(d.clk),n=m[0],h=n.name,h&&!n.disabled&&"image"==n.type&&(c.push({name:h,value:m.val()}),c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}))),c},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var e,f,g,d=this.name;if(d)if(e=a.fieldValue(this,b),e&&e.constructor==Array)for(f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}),a.param(c)},a.fn.fieldValue=function(b){var c,d,e,f,g;for(c=[],d=0,e=this.length;e>d;d++)f=this[d],g=a.fieldValue(f,b),null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g));return c},a.fieldValue=function(b,c){var g,h,i,j,k,l,m,n,d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){if(g=b.selectedIndex,0>g)return null;for(h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++)if(m=i[l],m.selected){if(n=m.value,n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}return h}return a(b).val()},a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})},a.fn.clearFields=a.fn.clearInputs=function(){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var b=this.type,c=this.tagName.toLowerCase();a.test(b)||"textarea"==c?this.value="":"checkbox"==b||"radio"==b?this.checked=!1:"select"==c&&(this.selectedIndex=-1)})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var d,c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(d=a(this).parent("select"),b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b)})}}(jQuery),function(a){a.omWidget("om.omBorderLayout",{options:{fit:!1,spacing:5,hideCollapsBtn:!1,onBeforeDrag:function(){},onAfterDrag:function(){}},_create:function(){this.options.panels&&(this._minWidth=50,this._minHeight=28,this._buildRegion(),this._resizeRegion(!0),a(window).resize(a.proxy(this,"_resizeRegion")))},_getRegionSize:function(a){var b=this._getRegion(a),c=this._getRegionProxy(a),d={};return d.width=this._regionVisible(b)?b.outerWidth(!0):this._regionVisible(c)?c.outerWidth(!0):0,d.height=this._regionVisible(b)?b.outerHeight(!0):this._regionVisible(c)?c.outerHeight(!0):0,d},_resizeRegion:function(a){var l,m,n,o,p,q,r,s,t,u,b=this._getRegion("center"),c=this._getRegion("north"),d=this._getRegion("south"),e=this._getRegion("west"),f=this._getRegion("east"),g=this._getRegionProxy("north"),h=this._getRegionProxy("south"),i=this._getRegionProxy("west"),j=this._getRegionProxy("east"),k=this._getRegionSize("north").height;
southHeight=this._getRegionSize("south").height,westWidth=this._getRegionSize("west").width,eastWidth=this._getRegionSize("east").width,centerWidth=this._getRegionSize("center").width,layoutWidth=this.element.width(),layoutHeight=this.element.height(),westOpt=this._getPanelOpts("west"),eastOpt=this._getPanelOpts("east"),b.css({top:k,left:westWidth}),b.find(">.om-panel-body").omPanel("resize",{height:layoutHeight-k-southHeight}),a||b.find(">.om-panel-body").omPanel("resize",{width:layoutWidth-westWidth-eastWidth}),l=b.outerHeight(!0),c&&(m=layoutWidth-(westOpt.expandToTop?westWidth:0)-(eastOpt.expandToTop?eastWidth:0),c.find(">.om-panel-body").omPanel("resize",{width:m}),c.css({left:westOpt.expandToTop?westWidth:0}),g&&g.outerWidth(m).css({left:westOpt.expandToTop?westWidth:0})),d&&(n=layoutWidth-(westOpt.expandToBottom?westWidth:0)-(eastOpt.expandToBottom?eastWidth:0),d.find(">.om-panel-body").omPanel("resize",{width:n}),d.css({top:layoutHeight-d.outerHeight(!0),left:westOpt.expandToBottom?westWidth:0}),h&&h.outerWidth(n).css({left:westOpt.expandToBottom?westWidth:0})),e&&(o=westOpt.expandToTop?0:k,p=l+(westOpt.expandToBottom?southHeight:0)+(westOpt.expandToTop?k:0),e.css({top:o}),e.find(">.om-panel-body").omPanel("resize",{height:p}),i&&(i.css({top:o}),i.outerHeight(p))),f&&(q=eastOpt.expandToTop?0:k,r=l+(eastOpt.expandToBottom?southHeight:0)+(eastOpt.expandToTop?k:0),f.css({top:q}),f.find(">.om-panel-body").omPanel("resize",{height:r}),j&&(j.css({top:q}),j.outerHeight(r))),a&&(s=this._getPanelOpts("east")&&!this._getPanelOpts("east").width,t=this._getPanelOpts("west")&&!this._getPanelOpts("west").width,u=!this._getPanelOpts("center").width,(s||t||u)&&(!u&&s&&t?eastWidth=westWidth=(layoutWidth-centerWidth)/2:u&&!s&&t?centerWidth=westWidth=(layoutWidth-eastWidth)/2:u&&s&&!t?centerWidth=eastWidth=(layoutWidth-westWidth)/2:u&&s&&t&&(eastWidth=westWidth=centerWidth=layoutWidth/3)),u&&b.find(">.om-panel-body").omPanel("resize",{width:Math.floor(layoutWidth-westWidth-eastWidth)}),s&&f.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-westWidth-centerWidth)-this.options.spacing}),t&&(e.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-eastWidth-centerWidth)-this.options.spacing}),b.css({left:e.width()+this.options.spacing})))},_regionVisible:function(a){return a&&"none"!=a.css("display")},_createRegionProxy:function(b,c){var f,d=this,e="";c?(e='<div class="om-borderlayout-proxy om-borderlayout-trigger-proxy-'+b.region+'" proxy="'+b.region+'"><div class="om-borderlayout-expand-trigger"></div></div>',f=a(e),"west"==b.region||"east"==b.region?f.width(d.options.spacing):("north"==b.region||"south"==b.region)&&f.height(d.options.spacing),function(a){f.find(".om-borderlayout-expand-trigger").click(function(){d.expandRegion(a.region)})}(b)):(e='<div class="om-borderlayout-proxy om-borderlayout-proxy-'+b.region+'" proxy="'+b.region+'"><div class="om-panel-title"></div><div class="om-panel-tool"><div class="om-icon panel-tool-expand"></div></div></div>',f=a(e),function(b){f.find(".panel-tool-expand").hover(function(){a(this).toggleClass("panel-tool-expand-hover")}).click(function(){d.expandRegion(b.region)})}(b)),f.hover(function(){a(this).toggleClass("om-borderlayout-proxy-hover")}).appendTo(this.element)},_buildRegion:function(){var d,e,f,g,h,i,j,k,l,b=this,c=this.element;for(this.element.addClass("om-borderlayout"),this.options.hideCollapsBtn&&this.element.addClass("om-borderlayout-hide-collaps-btn"),this.options.fit&&c.css({width:"100%",height:"100%"}),d=0;d<this.options.panels.length;d++)e=a.extend({},this.options.panels[d]),f=this.element.find("#"+e.id),g=e.collapsible&&b.options.hideCollapsBtn,e.collapsible&&"center"!=e.region&&this._createRegionProxy(e,g),e.collapsible&&(a.extend(e,{collapsible:!1}),b.options.hideCollapsBtn||a.extend(e,{tools:[{iconCls:["panel-tool-collapse","panel-tool-collapse-hover"],handler:function(a){b.collapseRegion(a.element.parent().attr("region"))}}]})),e.closable&&(h=e.onClose,a.extend(e,{onClose:function(){h&&h.call(f[0]),b._resizeRegion()}})),f.omPanel(e),("north"==e.region||"south"==e.region)&&f.omPanel("resize",{width:c.width()}),i="0",j=this.options.spacing+"px",e.resizable&&"center"!=e.region&&(k="",handleClass={},"west"==e.region?(k="e",handleClass.width=j,handleClass.right="-"+j):"east"==e.region?(k="w",handleClass.width=j,handleClass.left="-"+j):"south"==e.region?(k="n",handleClass.height=j,handleClass.top="-"+j):"north"==e.region&&(k="s",handleClass.height=j,handleClass.bottom="-"+j),f.parent().omResizable({handles:k,helper:"om-borderlayout-resizable-helper-"+k,stop:function(a){c.find(">.om-borderlayout-mask").remove(),a.element.find(">.om-panel-body").omPanel("resize",a.size),b._resizeRegion(),b.options.onAfterDrag&&b._trigger("onAfterDrag",null,a.element)},start:function(d){var g,h,i,f=d.element.omResizable("option","helper");a("body").find("."+f).css("border-width",b.options.spacing),g=d.element.attr("region"),h=c.width()-2*b._minWidth,i=c.height()-2*b._minHeight,"west"==g?(h=c.width()-(b._getRegionSize("east").width+b._minWidth),d.element.omResizable("option","maxWidth",h)):"east"==g?(h=c.width()-(b._getRegionSize("west").width+b._minWidth),d.element.omResizable("option","maxWidth",h)):"north"==g?(i=c.height()-(b._getRegionSize("south").height+b._minHeight+b.options.spacing),d.element.omResizable("option","maxHeight",i)):"south"==g&&(i=c.height()-(b._getRegionSize("north").height+b._minHeight+b.options.spacing),d.element.omResizable("option","maxHeight",i)),a('<div class="om-borderlayout-mask"></div>').css({width:c.width(),height:c.height()}).appendTo(c),b.options.onBeforeDrag&&b._trigger("onBeforeDrag",null,d.element)},minWidth:b._minWidth,minHeight:b._minHeight}),f.parent().find(".om-resizable-handle").css(handleClass),i=("south"==e.region?j:0)+" "+("west"==e.region?j:0)+" "+("north"==e.region?j:0)+" "+("east"==e.region?j:0),g&&(l=a("<div class='om-borderlayout-collaps-trigger-"+e.region+"'></div>"),function(a){l.click(function(){b.collapseRegion(a.attr("region"))})}(f.parent()),f.parent().find(".om-resizable-handle").append(l))),f.parent().addClass("om-borderlayout-region").addClass("om-borderlayout-region-"+e.region).css("margin",i).attr("region",e.region),f.addClass("om-borderlayout-region-body"),f.prev().addClass("om-borderlayout-region-header")},_getRegion:function(a){var b=this.element.find('>[region="'+a+'"]');return b.size()>0?b:!1},_getRegionProxy:function(a){var b=this.element.find('>[proxy="'+a+'"]');return b.size()>0?b:!1},_getPanelOpts:function(a){for(var b=0;b<this.options.panels.length;b++)if(a==this.options.panels[b].region)return this.options.panels[b];return!1},collapseRegion:function(b){var d,e,c=this._getPanelOpts(b);if(c&&c.collapsible&&(d=this._getRegion(b),$body=d.find(">.om-panel-body"),d)){if(e=a.data($body[0],"omPanel"),e.options.closed)return;if(c.onBeforeCollapse&&e._trigger("onBeforeCollapse")===!1)return!1;d.hide(),c.onCollapse&&e._trigger("onCollapse"),this._getRegionProxy(b).show(),this._resizeRegion()}},expandRegion:function(b){var d,e,c=this._getPanelOpts(b);if(c&&c.collapsible&&(d=this._getRegion(b),$body=d.find(">.om-panel-body"),d)){if(e=a.data($body[0],"omPanel"),e.options.closed)return;if(c.onBeforeExpand&&e._trigger("onBeforeExpand")===!1)return!1;d.show(),c.onExpand&&e._trigger("onExpand"),this._getRegionProxy(b).hide(),this._resizeRegion()}},closeRegion:function(b){var d,e,c=this._getPanelOpts(b);if(c&&c.closable&&(d=this._getRegion(b),$body=d.find(">.om-panel-body"),d)){if(e=a.data($body[0],"omPanel"),e.options.closed)return;d.find(">.om-panel-body").omPanel("close"),this._getRegionProxy(b).hide(),this._resizeRegion()}},openRegion:function(b){var d,e,c=this._getPanelOpts(b);if(c&&c.closable&&(d=this._getRegion(b),$body=d.find(">.om-panel-body"),d)){if(e=a.data($body[0],"omPanel"),!e.options.closed)return;d.find(">.om-panel-body").omPanel("open"),this._getRegionProxy(b).hide(),this._resizeRegion()}}})}(jQuery),function(a){a.omWidget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){this._determineButtonType();var b=a("<span>").addClass("om-btn om-state-default").css("border","none"),c=a("<span>").addClass("om-btn-bg om-btn-left"),d=a("<span>").addClass("om-btn-bg om-btn-center"),e=a("<span>").addClass("om-btn-bg om-btn-right");this.element.hasClass("apusic-btn-deepblue")&&b.addClass("apusic-btn-deepblue"),this.element.addClass("om-btn-txt").css({"background-position":"left center","background-repeat":"no-repeat"}).wrap(b).before(c).after(e).wrap(d)},_init:function(){var e,b=this,c=this.options,d=this.element;"boolean"!=typeof c.disabled&&(c.disabled=d.propAttr("disabled")),("disabled"==d.attr("disabled")||"disabled"==c.disabled)&&(c.disabled=!0),this._initButton(),c.disabled&&(b._addClass("disabled"),d.css("cursor","default")),e=d.parent().parent(),e.bind("mouseenter",function(){return c.disabled?!1:(b._addClass("hover"),void 0)}).bind("mouseleave",function(){return c.disabled?!1:(b._removeClass("hover"),b._removeClass("active"),void 0)}).bind("click",function(a){return c.disabled?(a.preventDefault(),a.stopImmediatePropagation(),!1):(b.options.onClick&&b._trigger("onClick",a),void 0)}).bind("mousedown",function(){return c.disabled?!1:(b._addClass("active"),b._removeClass("focus"),c.onClick,void 0)}).bind("mouseup",function(){return c.disabled?!1:(b._addClass("focus"),b._removeClass("active"),void 0)}).bind("keydown",function(d){if(c.disabled)return!1;if((d.keyCode==a.om.keyCode.SPACE||d.keyCode==a.om.keyCode.ENTER)&&b._addClass("active"),d.keyCode==a.om.keyCode.SPACE){var e=c.onClick;if(e&&b._trigger("onClick",d)===!1)return}}).bind("keyup",function(){b._removeClass("active")}),d.bind("focus.button",function(){return c.disabled?!1:(b._addClass("focus"),void 0)}).bind("blur.button",function(){return c.disabled?!1:(b._removeClass("focus"),void 0)})},enable:function(){this._removeClass("disabled"),this.options.disabled=!1,this.element.css("cursor","pointer").removeAttr("disabled")},disable:function(){this._addClass("disabled"),this.options.disabled=!0,this.element.css("cursor","default"),("input"==this.type||"button"==this.type)&&this.element.attr("disabled","disabled")},click:function(){!this.options.disabled&&this.options.onClick&&this._trigger("onClick")},changeLabel:function(a){"a"==this.type?this.element.text(a):"input"==this.type?this.element.val(a):"button"==this.type&&this.element.html(a)},changeIcons:function(a){this.options.disabled||a&&(a.left?this.element.css("backgroundImage","url( "+a.left+" )"):null,a.right?this.element.next().attr("src",a.right):null)},destroy:function(){$el=this.element,$el.closest(".om-btn").after($el).remove()},_addClass:function(a){this.element.parent().parent().addClass("om-state-"+a)},_removeClass:function(a){this.element.parent().parent().removeClass("om-state-"+a)},_initButton:function(){var b=this.options,c=this._getLabel(),d=this.element;d.removeClass("om-btn-icon om-btn-only-icon").next("img").remove(),b.width>10&&d.parent().css("width",parseInt(b.width)-10),"a"==this.type||"button"==this.type?d.html(c):d.val(c),b.icons.left&&(c?d.addClass("om-btn-icon").css("background-image","url("+b.icons.left+")"):d.addClass("om-btn-only-icon").css("background-image","url("+b.icons.left+")")),b.icons.right&&(""!=c?a("<img>").attr("src",b.icons.right).css({"vertical-align":"baseline","padding-left":"3px"}).insertAfter(d):a("<img>").attr("src",b.icons.right).css("vertical-align","baseline").insertAfter(d))},_getLabel:function(){return this.options.label||this.element.html()||this.element.text()||this.element.val()},_determineButtonType:function(){this.element.is("input")?this.type="input":this.element.is("a")?this.type="a":this.element.is("button")&&(this.type="button")}})}(jQuery),function(a){a.omWidget("om.omButtonbar",{options:{width:null},_create:function(){this.element.addClass("om-buttonbar"),a("<span></span>").addClass("om-buttonbar-null").appendTo(this.element)},_init:function(){var c=this.options,d=this.element,e=d.attr("style")?d.attr("style"):"";e&&(e=";"==e.substr(e.length-1,e.length)?e:e+";"),c.width&&d.attr("style",e+"width:"+(c.width-2)+"px;"),a.each(c.btns,function(b,c){if(c.separtor)a('<span class="om-buttonbar-sep"></span>').appendTo(d);else{var e=c.id||d.attr("id")+"_"+b,f=a('<button type="button"></button>').attr("id",e).appendTo(d);a.fn.omButton&&f.omButton(c)}})}})}(jQuery),function(a){a.omWidget("om.omCalendar",{options:{date:new Date,startDay:0,pages:1,minDate:!1,maxDate:!1,popup:!0,showTime:!1,onSelect:function(){},disabledDays:[],disabledFn:function(){},disabled:!1,readOnly:!1,editable:!0,dateFormat:!1},disable:function(){this.options.popup&&(this.hide(),this.options.disabled=!0,this.element.attr("disabled",!0).unbind(".omCalendar").next().addClass("om-state-disabled").unbind())},enable:function(){this.options.popup&&(this.options.disabled=!1,this.element.attr("disabled",!1).next().removeClass("om-state-disabled"),this._buildStatusEvent())},getDate:function(){return this.options.date},setDate:function(a){this.options.date=a,this._render({date:a})},_create:function(){var b=this.element,c=this.options;this.cid=this._stamp(b),c.popup?(b.wrap("<span></span>").after('<span class="om-calendar-trigger"></span>').parent().addClass("om-calendar om-widget om-state-default"),this.con=a("<div></div>").appendTo(document.body).css({top:"0px",position:"absolute",background:"white",visibility:"hidden","z-index":"2000"}),this._buildBodyEvent(),this._buildStatusEvent()):this.con=this.element,this.con.addClass("om-calendar-list-wrapper om-widget om-clearfix om-widget-content")},_init:function(){var b=this.element,c=this.options;this.con.addClass("multi-"+c.pages),this._buildParam(),c.popup&&b.val()&&(c.date=a.omCalendar.parseDate(b.val(),c.dateFormat||this._defaultFormat)||new Date),this._render(),c.readOnly||!c.editable?b.attr("readonly","readOnly").unbind():b.removeAttr("readonly"),c.disabled?this.disable():this.enable()},_render:function(b){var d,e,f,i,j,c=0,g=this.element,h=this.options;for(this.ca=[],this._parseParam(b),this.con.html(""),c=0,f=[this.year,this.month];c<h.pages;c++)0===c?d=!0:(d=!1,f=this._computeNextMonth(f)),e=c==h.pages-1,this.ca.push(new a.om.omCalendar.Page({year:f[0],month:f[1],prevArrow:d,nextArrow:e,showTime:self.showTime},this)),this.ca[c]._render();h.pages>1&&(i=g.find(".om-cal-box"),j=[],a.each(i,function(b,c){j.push(a(c).css("height"))}),j.sort(),i.css("height",j[j.length-1]))},_stamp:function(a){return(void 0===a.attr("id")||""===a.attr("id"))&&a.attr("id","K_"+(new Date).getTime()),a.attr("id")},_buildStatusEvent:function(){var b=this;this.element.unbind(".omCalendar").bind("click.omCalendar",function(){b.toggle()}).bind("focus.omCalendar",function(){a(this).parent().addClass("om-state-hover om-state-active")}).bind("blur.omCalendar",function(){a(this).parent().removeClass("om-state-hover om-state-active")}).next().unbind().click(function(){b.element.trigger("focus"),b.show()}).mouseover(function(){a(this).parent().addClass("om-state-hover")}).mouseout(function(){!b.isVisible()&&a(this).parent().removeClass("om-state-hover")})},_buildBodyEvent:function(){var b=this;a(document).bind("mousedown.omCalendar",this.globalEvent=function(){b.hide()}),b.con.mousedown(function(a){a.stopPropagation()})},toggle:function(){this.isVisible()?this.hide():this.show()},isVisible:function(){return"hidden"==this.con.css("visibility")?!1:!0},show:function(){var b,c,d,a=this.element.parent();this.con.css("visibility",""),b=a.offset().left,c=a.offsetHeight||a.outerHeight(),d=a.offset().top+c,this.con.css("left",b.toString()+"px"),this.con.css("top",d.toString()+"px")},hide:function(){this.con.css("visibility","hidden")},destroy:function(){var b=this.element;a("body").unbind(".omCalendar",this.globalEvent),this.options.popup&&(b.parent().after(b).remove(),this.con.remove())},_buildParam:function(){var a=this.options;return a.startDay&&(a.startDay=(7-a.startDay)%7),!a.dateFormat&&(this._defaultFormat=a.showTime?"yy-mm-dd H:i:s":"yy-mm-dd"),this.EV=[],this},_parseParam:function(b){b&&a.extend(this.options,b),this._handleDate()},_templetShow:function(a,b){var c,d,e,f,g,h;if(b instanceof Array){for(c="",e=0;e<b.length;e++)c+=arguments.callee(a,b[e]);a=c}else if(d=a.match(/{\$(.*?)}/g),void 0!==b&&null!==d)for(e=0,f=d.length;f>e;e++)h=d[e].replace(/({\$)|}/g,""),g=void 0!==b[h]?b[h]:"",a=a.replace(d[e],g);return a},_handleDate:function(){var a=this.options.date;this.day=a.getDate(),this.month=a.getMonth(),this.year=a.getFullYear()},_getHeadStr:function(b,c){return b.toString()+a.om.lang.omCalendar.year+(Number(c)+1).toString()+a.om.lang.omCalendar.month},_monthAdd:function(){var a=this;return 11==a.month?(a.year++,a.month=0):a.month++,a.options.date.setFullYear(a.year,a.month,1),this},_monthMinus:function(){var a=this;return 0===a.month?(a.year--,a.month=11):a.month--,a.options.date.setFullYear(a.year,a.month,1),this},_computeNextMonth:function(a){var b=a[0],c=a[1];return 11==c?(b++,c=0):c++,[b,c]},_handleOffset:function(){var i,b=this,c=a.om.lang.omCalendar,d=[c.Su,c.Mo,c.Tu,c.We,c.Th,c.Fr,c.Sa],e="<span>{$day}</span>",f=this.options.startDay,g="",h=[];for(i=0;7>i;i++)h[i]={day:d[(i-f+7)%7]};return g=b._templetShow(e,h),{day_html:g}}}),a.extend(a.om.omCalendar,{Page:function(b,c){var d=a.om.lang.omCalendar;this.father=c,this.month=Number(b.month),this.year=Number(b.year),this.prevArrow=b.prevArrow,this.nextArrow=b.nextArrow,this.node=null,this.timmer=null,this.id="",this.EV=[],this.html=['<div class="om-cal-box" id="{$id}">','<div class="om-cal-hd om-widget-header">','<a href="javascript:void(0);" class="om-prev {$prev}"><span class="om-icon om-icon-seek-prev">Prev</span></a>','<a href="javascript:void(0);" class="om-title">{$title}</a>','<a href="javascript:void(0);" class="om-next {$next}"><span class="om-icon om-icon-seek-next">Next</span></a>',"</div>",'<div class="om-cal-bd">','<div class="om-whd">',c._handleOffset().day_html,"</div>",'<div class="om-dbd om-clearfix">',"{$ds}","</div>","</div>",'<div class="om-setime om-state-default hidden">',"</div>",'<div class="om-cal-ft {$showtime}">','<div class="om-cal-time om-state-default">',"00:00 &hearts;","</div>","</div>",'<div class="om-selectime om-state-default hidden">',"</div>","</div><!--#om-cal-box-->"].join(""),this.nav_html=["<p>",d.month,'<select value="{$the_month}">','<option class="m1" value="1">01</option>','<option class="m2" value="2">02</option>','<option class="m3" value="3">03</option>','<option class="m4" value="4">04</option>','<option class="m5" value="5">05</option>','<option class="m6" value="6">06</option>','<option class="m7" value="7">07</option>','<option class="m8" value="8">08</option>','<option class="m9" value="9">09</option>','<option class="m10" value="10">10</option>','<option class="m11" value="11">11</option>','<option class="m12" value="12">12</option>',"</select>","</p>","<p>",d.year,'<input type="text" value="{$the_year}" onfocus="this.select()"/>',"</p>","<p>",'<button class="ok">',d.ok,'</button><button class="cancel">',d.cancel,"</button>","</p>"].join(""),this.Verify=function(){var a=function(a){return/^\d+$/i.test(a)?(a=Number(a),!(1>a||a>31)):!1},b=function(a){return/^\d+$/i.test(a)?(a=Number(a),!(100>a||a>1e4)):!1},c=function(a){return/^\d+$/i.test(a)?(a=Number(a),!(1>a||a>12)):!1};return{isDay:a,isYear:b,isMonth:c}},this._renderUI=function(){var d,b=this,c={},e=b.father.options;return b.HTML="",c.prev="",c.next="",c.title="",c.ds="",b.prevArrow||(c.prev="hidden"),b.nextArrow||(c.next="hidden"),b.father.showTime||(c.showtime="hidden"),c.id=b.id="om-cal-"+Math.random().toString().replace(/.\./i,""),c.title=b.father._getHeadStr(b.year,b.month),b.createDS(),c.ds=b.ds,b.father.con.append(b.father._templetShow(b.html,c)),b.node=a("#"+b.id),e.showTime&&(d=b.node.find(".om-cal-ft"),d.removeClass("hidden"),b.timmer=new a.om.omCalendar.TimeSelector(d,b.father)),this},this._buildEvent=function(){var b=this,d=a("#"+b.id),e=b.father.options;b.EV[0]=d.find("div.om-dbd").bind("mousedown",function(c){var f,g,h,d=a(c.target);d.filter(".om-null, .om-state-disabled").length>0||(f=Number(d.html()),g=new Date(e.date),g.setFullYear(b.year,b.month,f),b.father.dt_date=g,e.showTime||b.father._trigger("onSelect",c,g),e.popup&&!e.showTime&&(b.father.hide(),isNaN(b.father.dt_date)||(h=a.omCalendar.formatDate(b.father.dt_date,e.dateFormat||b.father._defaultFormat),a(b.father.element).val(h).focus().blur())),b.father._render({date:g}))}).find("a").bind("mouseover",function(){a(this).addClass("om-state-hover om-state-nobd")}).bind("mouseout",function(){a(this).removeClass("om-state-hover").not(".om-state-highlight, .om-state-active").removeClass("om-state-nobd")}),b.EV[1]=d.find("a.om-prev").bind("click",function(){return b.father._monthMinus()._render(),!1}),b.EV[2]=d.find("a.om-next").bind("click",function(){return b.father._monthAdd()._render(),!1}),b.EV[3]=d.find("a.om-title").bind("click",function(c){try{b.timmer.hidePopup()}catch(e){}var g=(a(c.target),b.father._templetShow(b.nav_html,{the_month:b.month+1,the_year:b.year}));return d.find(".om-setime").html(g).removeClass("hidden").find("option:[value="+(b.month+1)+"]").attr("selected","selected"),this.blur(),d.find("input").bind("keydown",function(c){var f,g,e=a(c.target);if(c.keyCode==a.om.keyCode.UP&&(e.val(Number(e.val())+1),e[0].select()),c.keyCode==a.om.keyCode.DOWN&&(e.val(Number(e.val())-1),e[0].select()),c.keyCode==a.om.keyCode.ENTER){if(f=d.find(".om-setime select").val(),g=d.find(".om-setime input").val(),d.find(".om-setime").addClass("hidden"),!b.Verify().isYear(g))return;if(!b.Verify().isMonth(f))return;b.father._render({date:b._computeDate(b,g,f)})}}),!1}).bind("mouseover",function(){a(this).addClass("om-state-hover")}).bind("mouseout",function(){a(this).removeClass("om-state-hover")}),b.EV[4]=d.find(".om-setime").bind("click",function(c){var d,e,f,g;if(c.preventDefault(),d=a(c.target),e=a(this),d.hasClass("ok")){if(f=e.find("select").val(),g=e.find("input").val(),e.addClass("hidden"),!b.Verify().isYear(g))return;if(!b.Verify().isMonth(f))return;f=f-e.parent().prevAll(".om-cal-box").length-1,b.father._render({date:b._computeDate(b,g,f)})}else d.hasClass("cancel")&&e.addClass("hidden")})},this._computeDate=function(a,b,c){var d=new Date(a.father.options.date.getTime());return d.setFullYear(b,c),d},this._getNode=function(){var a=this;return a.node},this._getNumOfDays=function(a,b){return 32-new Date(a,b-1,32).getDate()},this.createDS=function(){var g,j,b=this,c=b.father.options,d="",e=(new Date(b.year+"/"+(b.month+1)+"/01").getDay()+c.startDay+7)%7,f=b._getNumOfDays(b.year,b.month+1)+e,i=[];for(g=0;g<c.disabledDays.length;g++)i[g]=c.disabledDays[g]%7;for(g=0;f>g;g++)j=new Date(b.year+"/"+Number(b.month+1)+"/"+(g+1-e).toString()),d+=e>g?'<a href="javascript:void(0);" class="om-null" >0</a>':a.inArray((g+c.startDay)%7,i)>=0?'<a href="javascript:void(0);" class="om-state-disabled">'+(g-e+1)+"</a>":c.disabledFn(j)===!1?'<a href="javascript:void(0);" class="om-state-disabled">'+(g-e+1)+"</a>":c.minDate instanceof Date&&new Date(b.year+"/"+(b.month+1)+"/"+(g+1-e)).getTime()<c.minDate.getTime()+1?'<a href="javascript:void(0);" class="om-state-disabled">'+(g-e+1)+"</a>":c.maxDate instanceof Date&&new Date(b.year+"/"+(b.month+1)+"/"+(g+1-e)).getTime()>c.maxDate.getTime()?'<a href="javascript:void(0);" class="om-state-disabled">'+(g-e+1)+"</a>":g==e+(new Date).getDate()-1&&(new Date).getFullYear()==b.year&&(new Date).getMonth()==b.month?'<a href="javascript:void(0);" class="om-state-highlight om-state-nobd">'+(g-e+1)+"</a>":g==e+c.date.getDate()-1&&b.month==c.date.getMonth()&&b.year==c.date.getFullYear()?'<a href="javascript:void(0);" class="om-state-active om-state-nobd">'+(g-e+1)+"</a>":'<a href="javascript:void(0);">'+(g-e+1)+"</a>";if(0!==f%7)for(g=0;7-f%7>g;g++)d+='<a href="javascript:void(0);" class="om-null">0</a>';b.ds=d},this._render=function(){var a=this;a._renderUI(),a._buildEvent()}}}),a.extend(a.om.omCalendar,{TimeSelector:function(b,c){var d=c.options.date,e=a.om.lang.omCalendar;this.father=c,this.fcon=b.parent(".om-cal-box"),this.popupannel=this.fcon.find(".om-selectime"),"undefined"==typeof d&&(c.options.date=new Date),this.time=c.options.date,this.status="s",this.ctime=a('<div class="om-cal-time om-state-default">'+e.time+'<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><!--{{arrow--><div class="cta"><button class="u om-icon om-icon-triangle-1-n"></button><button class="d om-icon om-icon-triangle-1-s"></button></div><!--arrow}}--></div>'),this.button=a('<button class="ct-ok om-state-default">'+e.ok+"</button>"),this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],this.m_a=["00","10","20","30","40","50"],this.s_a=["00","10","20","30","40","50"],this.parseSubHtml=function(a){var c,b="";for(c=0;c<a.length;c++)b+='<a href="javascript:void(0);" class="om-cal-item">'+a[c]+"</a>";return b+='<a href="javascript:void(0);" class="x">x</a>'},this.showPopup=function(a){var c,d,b=this;switch(this.popupannel.html(a),this.popupannel.removeClass("hidden"),c=b.status,d="om-state-active om-state-nobd",b.ctime.find("span").removeClass(d),c){case"h":b.ctime.find(".h").addClass(d);break;case"m":b.ctime.find(".m").addClass(d);break;case"s":b.ctime.find(".s").addClass(d)}},this.hidePopup=function(){this.popupannel.addClass("hidden")},this._render=function(){var a=this,b=a.get("h"),c=a.get("m"),d=a.get("s");return a.father._time=a.time,a.ctime.find(".h").html(b),a.ctime.find(".m").html(c),a.ctime.find(".s").html(d),a},this.set=function(a,b){var c=this;switch(b=Number(b),a){case"h":c.time.setHours(b);break;case"m":c.time.setMinutes(b);break;case"s":c.time.setSeconds(b)}c._render()},this.get=function(a){var b=this,c=b.time;switch(a){case"h":return c.getHours();case"m":return c.getMinutes();case"s":return c.getSeconds()}},this.add=function(){var a=this,b=a.status,c=a.get(b);c++,a.set(b,c)},this.minus=function(){var a=this,b=a.status,c=a.get(b);c--,a.set(b,c)},this._timeInit=function(){var c=this;b.html("").append(c.ctime),b.append(c.button),c._render(),c.popupannel.bind("click",function(b){var e,d=a(b.target);d.hasClass("x")?c.hidePopup():d.hasClass("om-cal-item")&&(e=Number(d.html()),c.set(c.status,e),c.hidePopup())}),c.button.bind("click",function(b){var f,d=c.father.options,e="undefined"==typeof c.father.dt_date?d.date:c.father.dt_date;e.setHours(c.get("h")),e.setMinutes(c.get("m")),e.setSeconds(c.get("s")),c.father._trigger("onSelect",b,e),d.popup&&(f=a.omCalendar.formatDate(e,d.dateFormat||c.father._defaultFormat),a(c.father.element).val(f),c.father.hide())}),c.ctime.bind("keyup",function(b){(b.keyCode==a.om.keyCode.UP||b.keyCode==a.om.keyCode.LEFT)&&(b.preventDefault(),c.add()),(b.keyCode==a.om.keyCode.DOWN||b.keyCode==a.om.keyCode.RIGHT)&&(b.preventDefault(),c.minus())}),c.ctime.find(".u").bind("click",function(){c.hidePopup(),c.add()}),c.ctime.find(".d").bind("click",function(){c.hidePopup(),c.minus()}),c.ctime.find(".h").bind("click",function(){var a=c.parseSubHtml(c.h_a);c.status="h",c.showPopup(a)}),c.ctime.find(".m").bind("click",function(){var a=c.parseSubHtml(c.m_a);c.status="m",c.showPopup(a)}),c.ctime.find(".s").bind("click",function(){var a=c.parseSubHtml(c.s_a);c.status="s",c.showPopup(a)})},this._timeInit()}}),a.omCalendar=a.omCalendar||{},a.extend(a.omCalendar,{leftPad:function(a,b,c){var d=new String(a);for(c||(c=" ");d.length<b;)d=c+d;return d.toString()}}),a.extend(a.omCalendar,{getShortDayName:function(b){return a.omCalendar.dayMaps[b][0]},getDayName:function(b){return a.omCalendar.dayMaps[b][1]},getShortMonthName:function(b){return a.omCalendar.monthMaps[b][0]},getMonthName:function(b){return a.omCalendar.monthMaps[b][1]},dayMaps:[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],monthMaps:[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],formatCodes:{d:{g:"this.getDate()",s:"this.setDate({param})",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},dd:{g:"$.omCalendar.leftPad(this.getDate(), 2, '0')",s:"this.setDate(parseInt('{param}', 10))",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},m:{g:"(this.getMonth() + 1)",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},mm:{g:"$.omCalendar.leftPad(this.getMonth() + 1, 2, '0')",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},y:{g:"('' + this.getFullYear()).substring(2, 4)",s:"this.setFullYear(parseInt('20{param}', 10))",r:"(\\d{2})"},yy:{g:"this.getFullYear()",s:"this.setFullYear(parseInt('{param}', 10))",r:"(\\d{4})"},h:{g:"$.omCalendar.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"(0[0-9]|1[0-1])"},H:{g:"$.omCalendar.leftPad(this.getHours(), 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"([0-1][0-9]|2[0-3])"},g:{g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-1])"},G:{g:"this.getHours()",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-9]|2[0-3])"},i:{g:"$.omCalendar.leftPad(this.getMinutes(), 2, '0')",s:"this.setMinutes(parseInt('{param}', 10))",r:"([0-5][0-9])"},s:{g:"$.omCalendar.leftPad(this.getSeconds(), 2, '0')",s:"this.setSeconds(parseInt('{param}', 10))",r:"([0-5][0-9])"},u:{g:"$.omCalendar.leftPad(this.getMilliseconds(), 3, '0')",s:"this.setMilliseconds(parseInt('{param}', 10))",r:"(\\d{1,3})"},D:{g:"$.omCalendar.getShortDayName(this.getDay())",s:"",r:""},DD:{g:"$.omCalendar.getDayName(this.getDay())",s:"",r:""},M:{g:"$.omCalendar.getShortMonthName(this.getMonth())",s:"",r:""},MM:{g:"$.omCalendar.getMonthName(this.getMonth())",s:"",r:""},a:{g:"(this.getHours() < 12 ? 'am' : 'pm')",s:"",r:""},A:{g:"(this.getHours() < 12 ? 'AM' : 'PM')",s:"",r:""}}}),a.extend(a.omCalendar,{formatDate:function(b,c){if(!b||!c)return null;if("[object Date]"!==Object.prototype.toString.call(b))return null;var d,e,f="",g=!1;for(d=0;d<c.length;d++)e=c.charAt(d),fi_next=c.charAt(d+1),"'"!=e?(!g&&a.omCalendar.formatCodes[e+fi_next]?(e=new Function("return "+a.omCalendar.formatCodes[e+fi_next].g).call(b),d++):!g&&a.omCalendar.formatCodes[e]&&(e=new Function("return "+a.omCalendar.formatCodes[e].g).call(b)),f+=e):g=!g;return f},parseDate:function(b,c){var e,f,h,d,g,i,j;if(!b||!c)return null;if("[object String]"!==Object.prototype.toString.call(b))return null;for(d=[],g=null,e=0;e<c.length;e++){if(f=c.charAt(e),fi_next=c.charAt(e+1),a.omCalendar.formatCodes[f+fi_next])g=a.omCalendar.formatCodes[f+fi_next],e++;else{if(!a.omCalendar.formatCodes[f])continue;g=a.omCalendar.formatCodes[f]}if(h=b.match(new RegExp(g.r)),!h)return null;if(d.push(g.s.replace("{param}",h[0])),b=b.substring(h.index+h[0].length),i=c.charAt(e+1),(""!=i||""!=b)&&i!==b.charAt(0)&&void 0===a.omCalendar.formatCodes[i])return null}return j=new Date,new Function(d.join(";")).call(j),j}}),a.om.lang.omCalendar={year:"",month:"",Su:"",Mo:"",Tu:"",We:"",Th:"",Fr:"",Sa:"",cancel:"",ok:"",time:""}}(jQuery),function(a){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var c,b=this.length;for(c=0;b>c;c++)if(this[c]===a)return c;return-1}),a.omWidget("om.omCombo",{options:{optionField:"text",valueField:"value",width:"auto",disabled:!1,readOnly:!1,editable:!0,lazyLoad:!1,listMaxHeight:300,listAutoWidth:!1,autoFilter:!0,filterStrategy:"first",filterDelay:500,forceSelection:!1,multi:!1,multiSeparator:","},_init:function(){var d,e,a=this.options,b=this.textInput,c=a.dataSource;a.inputField||(a.inputField=a.optionField),"undefined"!=typeof a.value&&(a.lazyLoad=!1),"auto"!=a.width&&(d=b.parent().width(a.width),b.width(d.innerWidth()-b.next().outerWidth()-b.outerWidth()+b.width())),a.multi&&(a.editable=this.options.editable=!1),this._refeshEmptyText(a.emptyText),a.disabled?b.attr("disabled",!0):b.removeAttr("disabled"),a.readOnly||!a.editable?b.attr("readonly","readOnly"):b.removeAttr("readonly"),a.lazyLoad?this.dataHasLoaded=!1:(this._toggleLoading("add"),c&&"string"==typeof c?this._ajaxLoad(c):c&&"object"==typeof c?(this._loadData(c),this._toggleLoading("remove")):(this.dataHasLoaded=!0,this._toggleLoading("remove"))),e=a.disabled||a.readOnly,e?this.expandTrigger.addClass("om-state-disabled"):this._bindEvent()
},_create:function(){var b=this.element,c=a('<span class="om-combo om-widget om-state-default"></span>').insertAfter(b).wrapInner(b);this.textInput=b.clone().removeAttr("id").removeAttr("name").appendTo(c),this.expandTrigger=a('<span class="om-combo-trigger"></span>').appendTo(c),b.hide(),this.dropList=a(a('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children()[0]).hide()},setData:function(a){var b=this,c=b.textInput,d=b.element;b.options.value="",d.val(""),c.val(""),b._toggleLoading("add"),"string"==typeof a?b._ajaxLoad(a):(b._loadData(a),b._toggleLoading("remove"))},getData:function(){var a=this.options.dataSource;return"object"==typeof a?a:null},value:function(a){if("undefined"==typeof a){var b=this.element.val();return b?b:""}return this._setValue(a+""),this},disable:function(){var a=this.element;a.attr("disabled",!0).unbind(),this.options.disabled=!0,this.expandTrigger.addClass("om-state-disabled").unbind()},enable:function(){var a=this.element;a.removeAttr("disabled").unbind(),this.options.disabled=!1,this.expandTrigger.removeClass("om-state-disabled").unbind(),this._bindEvent()},destroy:function(){var b=this.element;a(document).unbind("mousedown.omCombo",this.globalEvent),b.parent().after(b).remove(),this.dropList.parent().remove()},_bindEvent:function(){var b=this,c=b.options,d=b.textInput,e=b.element,f=b.dropList,g=b.expandTrigger,h=c.emptyText,i=!1,j=d.parent("span");j.mouseenter(function(){c.disabled||j.addClass("om-state-hover")}).mouseleave(function(){j.removeClass("om-state-hover")}).mousedown(function(a){a.stopPropagation()}),d.focus(function(){i||(i=!0,a(".om-droplist").hide(),j.addClass("om-state-focus"),b._refeshEmptyText(h),b.dataHasLoaded||g.hasClass("om-loading")||(b._toggleLoading("add"),"object"==typeof c.dataSource?(b._loadData(c.dataSource),b._toggleLoading("remove")):"string"==typeof c.dataSource?b._ajaxLoad(c.dataSource):(b.dataHasLoaded=!0,b._toggleLoading("remove"))),!c.disabled&&!c.readOnly&&b._showDropList())}).blur(function(){var g,k,l,m,n;i=!1,j.removeClass("om-state-focus"),d.removeClass("om-combo-focus"),c.disabled||c.readOnly||c.multi||(b.hasManualInput&&(b.hasManualInput=!1,g=d.val(),""!==g?(k=a.data(e,"allInputText"),l=a.data(e,"allValues"),m=k.indexOf(g),m>-1?b._setValue(l[m]):c.forceSelection?(n=e.val(),m=l.indexOf(n),m>-1?d.val(k[m]):d.val("")):e.val(d.val())):e.val("")),b._refeshEmptyText(h))}).keyup(function(e){var g=e.keyCode,h=a.om.keyCode;switch(g){case h.DOWN:b._selectNext();break;case h.UP:b._selectPrev();break;case h.ENTER:b._backfill(b.dropList.find(".om-state-hover"));break;case h.ESCAPE:f.hide();break;case h.TAB:break;default:b.hasManualInput=!0,!c.disabled&&!c.readOnly&&c.editable&&c.autoFilter&&(window._omcomboFilterTimer&&clearTimeout(window._omcomboFilterTimer),window._omcomboFilterTimer=setTimeout(function(){a(document).attr("activeElement").id==d.attr("id")&&f.show(),b._doFilter(d)},c.filterDelay))}}),f.mousedown(function(a){a.stopPropagation()}),g.click(function(){!g.hasClass("om-loading")&&d.focus()}).mousedown(function(){!g.hasClass("om-loading")&&j.addClass("om-state-active")}).mouseup(function(){!g.hasClass("om-loading")&&j.removeClass("om-state-active")}),a(document).bind("mousedown.omCombo",this.globalEvent=function(){f.hide()})},_showDropList:function(){var g,k,l,m,n,o,p,q,b=this,c=b.options,d=b.textInput,e=b.element,f=b.dropList.scrollTop(0).css("height","auto"),h=e.val(),i=f.find(".om-combo-list-row"),j=b._getAllOptionsBeforeFiltered().removeClass("om-helper-hidden om-state-hover");if(!(j.size()<=0)){if(i.removeClass("om-combo-selected"),void 0!==h&&""!==h)if(k=a.data(e,"allValues"),c.multi){for(l=h.split(c.multiSeparator),m=0;m<l.length;m++)n=k.indexOf(l[m]),n>-1&&a(f.find(".om-combo-list-row").get(n)).addClass("om-combo-selected");valueItem=l[0]}else n=k?k.indexOf(h):-1,n>-1&&(g=a(f.find(".om-combo-list-row").get(n)).addClass("om-combo-selected"));o=f.parent(),p=d.parent(),c.listAutoWidth?a.browser.msie&&"7.0"==a.browser.version&&!a.support.style?o.width(f.show().outerWidth()):o.width(f.outerWidth()):o.width(p.outerWidth()),"auto"!=c.listMaxHeight&&f.show().height()>c.listMaxHeight&&f.height(c.listMaxHeight).css("overflow-y","auto"),q=p.offset(),o.css({left:q.left,top:q.top+p.outerHeight()}),f.show(),g&&f.scrollTop(a(g).offset().top-f.offset().top)}},_toggleLoading:function(a){this.options.disabled||("add"==a?this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading"):"remove"==a&&this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s"))},_ajaxLoad:function(b){var c=this,d=this.options;a.ajax({url:b,method:"POST",dataType:"json",success:function(a,b){c.dataHasLoaded=!0;var e=d.onSuccess;return e&&c._trigger("onSuccess",null,a,b)===!1?(d.dataSource=a,void 0):(c._loadData(a),c._toggleLoading("remove"),void 0)},error:function(a,e,f){if(c.dataHasLoaded=!0,!d.onError)throw c._toggleLoading("remove"),new Error('An error occurred while load records from URL "'+b+'",the error message is:'+f.message);c._toggleLoading("remove"),c._trigger("onError",null,a,e,f)}})},_loadData:function(b){var e,f,g,h,i,j,k,l,m,c=this.options,d=this.element;c.dataSource=b,this.dataHasLoaded=!0,e=c.inputField,f=[],"string"==typeof e?a(b).each(function(){f.push(this[e])}):a(b).each(function(a){f.push(e(this,a))}),a.data(d,"allInputText",f),g=c.valueField,h=[],"string"==typeof g?a(b).each(function(){h.push(""+this[g])}):a(b).each(function(a){h.push(""+g(this,a))}),a.data(d,"allValues",h),i=this.dropList.empty(),c.listProvider?(j=c.listProvider(i,b),j&&j.each(function(){a(this).addClass("om-combo-list-row")})):(k=c.optionField,l="",m=this,"string"==typeof k?a(b).each(function(){l+=m._wrapText(this[c.optionField])}):a(b).each(function(a){l+=m._wrapText(c.optionField(this,a))}),l&&(a(l).appendTo(i),i.show().css("height","auto"),"auto"!=c.listMaxHeight&&i.height()>c.listMaxHeight&&i.height(c.listMaxHeight).css("overflow-y","auto"),i.hide(),d.parent().hasClass("om-state-hover")&&m._showDropList())),c.value&&this._setValue(""+c.value),this._bindEventsToList()},_bindEventsToList:function(){var b=this,c=b._getAllOptionsBeforeFiltered();c.hover(function(){c.removeClass("om-state-hover"),a(this).addClass("om-state-hover")},function(){a(this).removeClass("om-state-hover")}).mousedown(function(){b._backfill(this)})},_wrapText:function(a){return'<div class="om-combo-list-row">'+a+"</div>"},_setValue:function(b){var h,i,j,k,l,c=this.textInput,d=this.element,e=!0,f=d.val(),g=this.options;for(b==f&&(e=!1),h=a.data(d,"allValues"),i=[],j=[],g.multi?j=b.split(g.multiSeparator):j.push(b),k=0;k<j.length;k++)l=h?h.indexOf(j[k]):-1,l>-1?i.push(a.data(d,"allInputText")[l]):g.forceSelection?(d.val(""),b=""):i.push(b);d.val(b),g.multi?c.val(i.join(g.multiSeparator)):c.val(i.join("")),g.value=b,g.onValueChange&&e&&this._trigger("onValueChange",null,c,b,f),this._refeshEmptyText(g.emptyText)},_findHighlightItem:function(){var c,a=this.dropList,b=a.find(".om-state-hover");return b.length>0?b:(c=a.find(".om-combo-selected"),c.length>0?c[0]:c)},_selectPrev:function(){var f,b=this._findHighlightItem(),c=this._getAllOptionsAfterFiltered(),d=c.index(b),e=a(c[d]);0===d?d=c.length:-1==d&&(d=c.length),f=a(c[d-1]),this._highLisghtAndScrollTo(e,f)},_selectNext:function(){var c,d,e,f,b=this.dropList;return"none"==b.css("display")?(this._showDropList(),void 0):(c=this._getAllOptionsAfterFiltered(),d=c.index(this._findHighlightItem()),e=a(c[d]),d==c.length-1&&(d=-1),f=a(c[d+1]),this._highLisghtAndScrollTo(e,f),void 0)},_highLisghtAndScrollTo:function(a,b){var c=this.dropList;a.removeClass("om-state-hover"),b.addClass("om-state-hover"),b.position().top<=0?c.scrollTop(c.scrollTop()+b.position().top):b.position().top+b.outerHeight()>c.height()&&c.scrollTop(c.scrollTop()+b.position().top+b.outerHeight()-c.height())},_backfill:function(b){var c,d,e,f,g,h,i,j,k;if(0!==b.length&&(c=this,d=c.element,e=c.dropList,f=c.options,g=f.multi,g?a(b).toggleClass("om-combo-selected").removeClass("om-state-hover"):(this._getAllOptionsBeforeFiltered().removeClass("om-combo-selected"),a(b).addClass("om-combo-selected")),"none"!=e.css("display"))){for(h=[],i=e.find(".om-combo-selected"),j=0;j<i.length;j++)k=a(i[j]).index(),k>-1&&h.push(a.data(d,"allValues")[k]);this._setValue(h.join(g?f.multiSeparator:"")),g||e.hide()}},_getAllOptionsBeforeFiltered:function(){return this.dropList.find(".om-combo-list-row")},_getAllOptionsAfterFiltered:function(){var a=this.dropList;return a.find(".om-combo-list-row").not(a.find(".om-helper-hidden"))},_doFilter:function(){var f,b=this,c=b.textInput,d=b.element,e=b.options;records=e.dataSource,filterStrategy=e.filterStrategy,text=c.val(),needShow=!1,items=b._getAllOptionsBeforeFiltered(),allInputText=a.data(d,"allInputText"),a(records).each(function(c){b._filetrPass(filterStrategy,text,records[c],allInputText[c])?(a(items.get(c)).removeClass("om-helper-hidden"),needShow=!0):a(items.get(c)).addClass("om-helper-hidden")}),f=this.dropList.css("height","auto"),"auto"!=e.listMaxHeight&&f.height()>e.listMaxHeight&&f.height(e.listMaxHeight).css("overflow-y","auto"),needShow||f.hide()},_filetrPass:function(a,b,c,d){if(""===b)return!0;if("function"==typeof a)return a(b,c);if("first"===a)return 0===d.indexOf(b);if("anywhere"===a)return d.indexOf(b)>-1;if("last"===a){var e=d.lastIndexOf(b);return e>-1&&e+b.length==d.length}return!1},_refeshEmptyText:function(a){var b=this.textInput;a&&(""===b.val()?b.val(a).addClass("om-empty-text"):(b.val()===a&&b.val(""),b.removeClass("om-empty-text")))}})}(jQuery),function(a,b){var c="om-dialog om-widget om-widget-content om-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.omWidget("om.omDialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){var b,d,e,f,g,i,j;this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle,b=this,b.element.parent().bind("om-remove.omDialog",b.__removeBind=function(){b.element.remove()}),d=b.options,e=d.title||"&#160;",f=a.om.omDialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&c.keyCode&&c.keyCode===a.om.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),b.element.show().removeAttr("title").addClass("om-dialog-content om-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("om-dialog-titlebar om-widget-header om-corner-all om-helper-clearfix").prependTo(g),j=a('<a href="#"></a>').addClass("om-dialog-titlebar-close om-corner-tr").attr("role","button").hover(function(){j.addClass("om-state-hover")},function(){j.removeClass("om-state-hover")}).focus(function(){j.addClass("om-state-focus")}).blur(function(){j.removeClass("om-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i),(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("om-icon-closethick").text(d.closeText).appendTo(j),a("<span></span>").addClass("om-dialog-title").attr("id",f).html(e).prependTo(i),i.find("*").add(i).disableSelection(),d.draggable&&a.om.omDraggable&&b._makeDraggable(),d.resizable&&a.fn.omResizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("om-dialog-content om-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var d,e,c=this,f=this.options,g=f.onBeforeClose,h=f.onClose;if(!g||!1!==c._trigger("onBeforeClose",b))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.om-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){h&&c._trigger("onClose",b)}):(c.uiDialog.hide(),h&&c._trigger("onClose",b)),a.om.omDialog.overlay.resize(),c.options.modal&&(d=0,a(".om-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.om.omDialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var f,d=this,e=d.options;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("onFocus",c):(e.zIndex>a.om.omDialog.maxZ&&(a.om.omDialog.maxZ=e.zIndex),d.overlay&&(a.om.omDialog.maxZ+=1,d.overlay.$el.css("z-index",a.om.omDialog.overlay.maxZ=a.om.omDialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.om.omDialog.maxZ+=1,d.uiDialog.css("z-index",a.om.omDialog.maxZ),d.element.attr(f),d._trigger("onFocus",c),d)},open:function(){var b,c,d,e;if(!this._isOpen)return b=this,c=b.options,d=b.uiDialog,b.overlay=c.modal?new a.om.omDialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keypress.om-dialog",function(b){if(b.keyCode===a.om.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".om-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,e=c.onOpen,e&&b._trigger("onOpen"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("om-dialog-buttonpane om-helper-clearfix"),g=a("<div></div>").addClass("om-dialog-buttonset").appendTo(e);c.uiDialog.find(".om-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){"click"!==a&&(a in f?e[a](b):e.attr(a,b))}),a.fn.omButton&&e.omButton()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var f,c=this,d=c.options,e=a(document);c.uiDialog.omDraggable({cancel:".om-dialog-content, .om-dialog-titlebar-close",handle:".om-dialog-titlebar",containment:"document",cursor:"move",onStart:function(e,g){f="auto"===d.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("om-dialog-dragging"),c._trigger("onDragStart",b(e),g)},onDrag:function(a,d){c._trigger("onDrag",b(a),d)},onStop:function(g,h){d.position=[g.position.left-e.scrollLeft(),g.position.top-e.scrollTop()],a(this).removeClass("om-dialog-dragging").height(f),c._trigger("onDragStop",b(g),h),a.om.omDialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";e.uiDialog.omResizable({cancel:".om-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:h,start:function(b,c){a(this).addClass("om-dialog-resizing"),e._trigger("onResizeStart",b,d(c))},resize:function(a,b){e._trigger("onResize",a,d(b))},stop:function(b,c){a(this).removeClass("om-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("onResizeStop",b,d(c)),a.om.omDialog.overlay.resize()}}).css("position",g).find(".om-resizable-se").addClass("om-icon om-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var e,c=[],d=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")}),b=a.extend({},a.om.omDialog.prototype.options.position,b)):b=a.om.omDialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option",f)},_setOption:function(b,d){var g,h,e=this,f=e.uiDialog;switch(b){case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("om-dialog-disabled"):f.removeClass("om-dialog-disabled");break;case"draggable":g=f.is(":data(draggable)"),g&&!d&&f.omDraggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":h=f.is(":data(resizable)"),h&&!d&&f.omResizable("destroy"),h&&"string"==typeof d&&f.omResizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".om-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.OMWidget.prototype._setOption.apply(e,arguments)},_size:function(){var c,d,f,b=this.options,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c),"auto"===b.height?a.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),f=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(f,d))):this.element.height(Math.max(b.height-c,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option","minHeight",this._minHeight())}}),a.extend(a.om.omDialog,{version:"2.0",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.om.omDialog.overlay.create(b)}}),a.extend(a.om.omDialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.om.omDialog.overlay.instances.length&&a(document).bind(a.om.omDialog.overlay.events,function(b){return a(b.target).zIndex()<a.om.omDialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&c.keyCode&&c.keyCode===a.om.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.om.omDialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("om-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c,d;b.parent().unbind(this.__removeBind),c=a.inArray(b,this.instances),-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove(),d=0,a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.om.omDialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.om.omDialog.overlay.width(),height:a.om.omDialog.overlay.height()})}}),a.extend(a.om.omDialog.overlay.prototype,{destroy:function(){a.om.omDialog.overlay.destroy(this.$el)}})}(jQuery);var swfobject=function(){function a(){var a,c,d;if(!P){try{a=E.getElementsByTagName("body")[0].appendChild(q("span")),a.parentNode.removeChild(a)}catch(b){return}for(P=!0,c=H.length,d=0;c>d;d++)H[d]()}}function b(a){P?a():H[H.length]=a}function c(a){if(typeof D.addEventListener!=w)D.addEventListener("load",a,!1);else if(typeof E.addEventListener!=w)E.addEventListener("load",a,!1);else if(typeof D.attachEvent!=w)r(D,"onload",a);else if("function"==typeof D.onload){var b=D.onload;D.onload=function(){b(),a()}}else D.onload=a}function d(){G?e():f()}function e(){var c,d,a=E.getElementsByTagName("body")[0],b=q(x);b.setAttribute("type",A),c=a.appendChild(b),c?(d=0,function(){if(typeof c.GetVariable!=w){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,setTimeout(arguments.callee,10),void 0;a.removeChild(b),c=null,f()}()):f()}function f(){var b,c,d,e,f,k,l,m,n,o,q,a=I.length;if(a>0)for(b=0;a>b;b++)if(c=I[b].id,d=I[b].callbackFn,e={success:!1,id:c},U.pv[0]>0){if(f=p(c))if(!s(I[b].swfVersion)||U.wk&&U.wk<312)if(I[b].expressInstall&&h()){for(k={},k.data=I[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align")),l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else u(c,!0),d&&(q=g(c),q&&typeof q.SetVariable!=w&&(e.success=!0,e.ref=q),d(e))}function g(a){var d,b=null,c=p(a);return c&&"OBJECT"==c.nodeName&&(typeof c.SetVariable!=w?b=c:(d=c.getElementsByTagName(x)[0],d&&(b=d))),b}function h(){return!Q&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){var e,f,g,h;Q=!0,N=d||null,O={success:!1,id:c},e=p(c),e&&("OBJECT"==e.nodeName?(L=k(e),M=null):(L=e,M=c),a.id=B,(typeof a.width==w||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==w||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),E.title=E.title.slice(0,47)+" - Flash Player Installation",f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+D.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+E.title,typeof b.flashvars!=w?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState&&(h=q("div"),c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()),l(a,b,c))}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var c,d,e,f,b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else if(c=a.getElementsByTagName(x)[0],c&&(d=c.childNodes))for(e=d.length,f=0;e>f;f++)(1!=d[f].nodeType||"PARAM"!=d[f].nodeName)&&8!=d[f].nodeType&&b.appendChild(d[f].cloneNode(!0));return b}function l(a,b,c){var d,f,g,h,i,j,k,l,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==w&&(a.id=c),U.ie&&U.win){f="";for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));h="";for(i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",J[J.length]=a.id,d=p(a.id)}else{j=q(x),j.setAttribute("type",A);for(k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var c,b=p(a);if(b){for(c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=E.getElementById(a)}catch(c){}return b}function q(a){return E.createElement(a)}function r(a,b,c){a.attachEvent(b,c),K[K.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){var e,f,g;U.ie&&U.mac||(e=E.getElementsByTagName("head")[0],e&&(f=c&&"string"==typeof c?c:"screen",d&&(R=null,S=null),R&&S==f||(g=q("style"),g.setAttribute("type","text/css"),g.setAttribute("media",f),R=e.appendChild(g),U.ie&&U.win&&typeof E.styleSheets!=w&&E.styleSheets.length>0&&(R=E.styleSheets[E.styleSheets.length-1]),S=f),U.ie&&U.win?R&&typeof R.addRule==x&&R.addRule(a,b):R&&typeof E.createTextNode!=w&&R.appendChild(E.createTextNode(a+" {"+b+"}"))))}function u(a,b){if(T){var c=b?"visible":"hidden";P&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=w?encodeURIComponent(a):a}var L,M,N,O,R,S,w="undefined",x="object",y="Shockwave Flash",z="ShockwaveFlash.ShockwaveFlash",A="application/x-shockwave-flash",B="SWFObjectExprInst",C="onreadystatechange",D=window,E=document,F=navigator,G=!1,H=[d],I=[],J=[],K=[],P=!1,Q=!1,T=!0,U=function(){var j,a=typeof E.getElementById!=w&&typeof E.getElementsByTagName!=w&&typeof E.createElement!=w,b=F.userAgent.toLowerCase(),c=F.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof F.plugins!=w&&typeof F.plugins[y]==x)i=F.plugins[y].description,i&&(typeof F.mimeTypes==w||!F.mimeTypes[A]||!!F.mimeTypes[A].enabledPlugin)&&(G=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof D.ActiveXObject!=w)try{j=new ActiveXObject(z),j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();return function(){U.w3&&((typeof E.readyState!=w&&"complete"==E.readyState||typeof E.readyState==w&&(E.getElementsByTagName("body")[0]||E.body))&&a(),P||(typeof E.addEventListener!=w&&E.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(E.attachEvent(C,function(){"complete"==E.readyState&&(E.detachEvent(C,arguments.callee),a())}),D==top&&function(){if(!P){try{E.documentElement.doScroll("left")}catch(b){return setTimeout(arguments.callee,0),void 0}a()}}()),U.wk&&function(){return P?void 0:/loaded|complete/.test(E.readyState)?(a(),void 0):(setTimeout(arguments.callee,0),void 0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){var b,c,d,e,f,a=K.length;for(b=0;a>b;b++)K[b][0].detachEvent(K[b][1],K[b][2]);for(c=J.length,d=0;c>d;d++)n(J[d]);for(e in U)U[e]=null;U=null;for(f in swfobject)swfobject[f]=null;swfobject=null})}(),{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,I[I.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){var b,p,q,r,t,v;if(d+="",e+="",b={},m&&typeof m===x)for(p in m)b[p]=m[p];if(b.data=a,b.width=d,b.height=e,q={},k&&typeof k===x)for(r in k)q[r]=k[r];if(j&&typeof j===x)for(t in j)typeof q.flashvars!=w?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f))v=l(b,q,c),b.id==c&&u(c,!0),o.success=!0,o.ref=v;else{if(g&&h())return b.data=g,i(b,q,c,n),void 0;u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var c,d,b=E.location.search||E.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Q){var a=p(B);a&&L&&(a.parentNode.replaceChild(L,a),M&&(u(M,!0),U.ie&&U.win&&(L.style.display="block")),N&&N(O)),Q=!1}}}}();!function(a){function b(b,c){var f,d=b+"Queue",e=a("#"+d+" .om-fileupload-queueitem").length;return null==c||isNaN(c)||0>c||c>=e?!1:(f=a("#"+d+" .om-fileupload-queueitem:eq("+c+")"),f.attr("id").replace(b,""))}a.omWidget("om.omFileUpload",{options:{swf:"/operamasks-ui/ui/om-fileupload.swf",action:"",actionData:{},height:30,width:120,buttonImg:null,multi:!1,autoUpload:!1,fileDataName:"Filedata",method:"POST",queueSizeLimit:999,removeCompleted:!0,fileExt:"*.*",fileDesc:null,sizeLimit:null,onSelect:function(){},onQueueFull:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},upload:function(a){var c=this.element,d=c.attr("id"),e=null,g=(c.attr("id")+"Queue",c.attr("id")+"Uploader");("undefined"==typeof a||(e=b(d,a))!==!1)&&document.getElementById(g).startFileUpload(e,!1)},cancel:function(a){var c=this.element,e=(c.attr("id"),null),g=(c.attr("id")+"Queue",c.attr("id")+"Uploader");if("undefined"!=typeof a){if(isNaN(a))e=a;else if((e=b(c.attr("id"),a))===!1)return;document.getElementById(g).cancelFileUpload(e,!0,!0,!1)}else document.getElementById(g).clearFileUploadQueue(!1)},_setOption:function(b,c){var e,f,g,h,i,d=document.getElementById(this.element.attr("id")+"Uploader");if("actionData"==b){e="";for(f in c)e+="&"+f+"="+c[f];for(g=document.cookie.split(";"),h=0;h<g.length;h++)""!==g[h]&&(e+="&"+g[h]);return c=encodeURI(e.substr(1)),d.updateSettings(b,c),void 0}i=["buttonImg","buttonText","fileDesc","fileExt","height","action","sizeLimit","width"],-1!=a.inArray(b,i)&&d.updateSettings(b,c)},_create:function(){var e,f,g,h,i,j,k,b=this,c=this.element,d=a.extend({},this.options);for(d.wmode="opaque",d.expressInstall=null,d.displayData="percentage",d.folder="",d.simUploadLimit=1,d.scriptAccess="sameDomain",d.queueID=!1,d.onInit=function(){},d.onSelectOnce=function(){},d.onClearQueue=function(){},d.id=this.element.attr("id"),a(c).data("settings",d),e=location.pathname,e=e.split("/"),e.pop(),e=e.join("/")+"/",f={},f.omFileUploadID=d.id,f.pagepath=e,d.buttonImg&&(f.buttonImg=escape(d.buttonImg)),f.buttonText=encodeURI(a.om.lang._get(d,"omFileUpload","buttonText")),d.rollover&&(f.rollover=!0),f.action=d.action,f.folder=escape(d.folder),g="",h=document.cookie.split(";"),i=0;i<h.length;i++)g+="&"+h[i];
if(d.actionData)for(j in d.actionData)g+="&"+j+"="+d.actionData[j];f.actionData=escape(encodeURI(g.substr(1))),f.width=d.width,f.height=d.height,f.wmode=d.wmode,f.method=d.method,f.queueSizeLimit=d.queueSizeLimit,f.simUploadLimit=d.simUploadLimit,d.hideButton&&(f.hideButton=!0),d.fileDesc&&(f.fileDesc=d.fileDesc),d.fileExt&&(f.fileExt=d.fileExt),d.multi&&(f.multi=!0),d.autoUpload&&(f.autoUpload=!0),d.sizeLimit&&(f.sizeLimit=d.sizeLimit),d.checkScript&&(f.checkScript=d.checkScript),d.fileDataName&&(f.fileDataName=d.fileDataName),d.queueID&&(f.queueID=d.queueID),d.onInit()!==!1&&(c.css("display","none"),c.after('<div id="'+c.attr("id")+'Uploader"></div>'),swfobject.embedSWF(d.swf,d.id+"Uploader",d.width,d.height,"9.0.24",d.expressInstall,f,{quality:"high",wmode:d.wmode,allowScriptAccess:d.scriptAccess},{},function(a){"function"==typeof d.onSWFReady&&a.success&&d.onSWFReady()}),0==d.queueID?a("#"+c.attr("id")+"Uploader").after('<div id="'+c.attr("id")+'Queue" class="om-fileupload-queue"></div>'):a("#"+d.queueID).addClass("om-fileupload-queue")),"function"==typeof d.onOpen&&c.bind("omFileUploadOpen",d.onOpen),c.bind("omFileUploadSelect",{action:d.onSelect,queueID:d.queueID},function(c,d,e){var f,g,h;b._trigger("onSelect",c,d,e)!==!1&&(f=.01*Math.round(100*(e.size/1024)),g="KB",f>1e3&&(f=.01*Math.round(100*.001*f),g="MB"),h=f.toString().split("."),f=h.length>1?h[0]+"."+h[1].substr(0,2):h[0],fileName=e.name.length>20?e.name.substr(0,20)+"...":e.name,queue="#"+a(this).attr("id")+"Queue",c.data.queueID&&(queue="#"+c.data.queueID),a(queue).append('<div id="'+a(this).attr("id")+d+'" class="om-fileupload-queueitem">                            <div class="cancel" onclick="$(\'#'+a(this).attr("id")+"').omFileUpload('cancel','"+d+'\')">                            </div>                            <span class="fileName">'+fileName+" ("+f+g+')</span><span class="percentage"></span>                            <div class="om-fileupload-progress">                                <div id="'+a(this).attr("id")+d+'ProgressBar" class="om-fileupload-progressbar"><!--Progress Bar--></div>                            </div>                        </div>'))}),c.bind("omFileUploadSelectOnce",{action:d.onSelectOnce},function(c,e){b._trigger("onSelectOnce",c,e),d.autoUpload&&a(this).omFileUpload("upload")}),c.bind("omFileUploadQueueFull",{action:d.onQueueFull},function(c,d){b._trigger("onQueueFull",c,d)!==!1&&alert(a.om.lang.omFileUpload.queueSizeLimitMsg+d+".")}),c.bind("omFileUploadCancel",{action:d.onCancel},function(c,d,e,f,g,h){if(b._trigger("onCancel",c,d,e,f)!==!1&&g){var i=1==h?0:250;a("#"+a(this).attr("id")+d).fadeOut(i,function(){a(this).remove()})}}),c.bind("omFileUploadClearQueue",{action:d.onClearQueue},function(c,e){var f=d.queueID?d.queueID:a(this).attr("id")+"Queue";e&&a("#"+f).find(".om-fileupload-queueitem").remove(),b._trigger("onClearQueue",c,e)!==!1&&a("#"+f).find(".om-fileupload-queueitem").each(function(){var b=a(".om-fileupload-queueitem").index(this);a(this).delay(100*b).fadeOut(250,function(){a(this).remove()})})}),k=[],c.bind("omFileUploadError",{action:d.onError},function(c,d,e,f){if(b._trigger("onError",c,d,e,f)!==!1){var g=new Array(d,e,f);k.push(g),a("#"+a(this).attr("id")+d).find(".percentage").text(" - "+f.type+" Error"),a("#"+a(this).attr("id")+d).find(".om-fileupload-progress").hide(),a("#"+a(this).attr("id")+d).addClass("om-fileupload-error")}}),"function"==typeof d.onUpload&&c.bind("omFileUploadUpload",d.onUpload),c.bind("omFileUploadProgress",{action:d.onProgress,toDisplay:d.displayData},function(c,d,e,f){b._trigger("onProgress",c,d,e,f)!==!1&&(a("#"+a(this).attr("id")+d+"ProgressBar").animate({width:f.percentage+"%"},250,function(){100==f.percentage&&a(this).closest(".om-fileupload-progress").fadeOut(250,function(){a(this).remove()})}),"percentage"==c.data.toDisplay&&(displayData=" - "+f.percentage+"%"),"speed"==c.data.toDisplay&&(displayData=" - "+f.speed+"KB/s"),null==c.data.toDisplay&&(displayData=" "),a("#"+a(this).attr("id")+d).find(".percentage").text(displayData))}),c.bind("omFileUploadComplete",{action:d.onComplete},function(c,e,f,g,h){b._trigger("onComplete",c,e,f,unescape(g),h)!==!1&&(a("#"+a(this).attr("id")+e).find(".percentage").text(" - Completed"),d.removeCompleted&&a("#"+a(c.target).attr("id")+e).fadeOut(250,function(){a(this).remove()}),a("#"+a(c.target).attr("id")+e).addClass("completed"))}),"function"==typeof d.onAllComplete&&c.bind("omFileUploadAllComplete",{action:d.onAllComplete},function(a,c){b._trigger("onAllComplete",a,c)!==!1&&(k=[])})}}),a.om.lang.omFileUpload={queueSizeLimitMsg:"",buttonText:""}}(jQuery),function(a){function b(a,b){var d,e,c=a._getColModel();for(d=0,e=c.length;e>d;d++)if(c[d].name==b.name)return d}function c(a,b,c){var d=0;a.push(c.replace(/\$/g,function(){return b[d++]}))}function d(a){var h,i,j,b,c,d,f,g,k,l,m,n,o;for(a._colModel=[],b=a._getColModel(),c=[],d=[],f=1,g=1,k=b.length,l=0;k>l;l++)c[l]=[];for(l=0,m=k;m>l;l++)for(h=b[l],n=0,o=h.length;o>n;n++)i=h[n],f=i.rowspan||1,g=i.colspan||1,j=e(c,l,f,g),i.name&&d.push({header:i,colIndex:j});for(d.sort(function(a,b){return a.colIndex-b.colIndex}),l=0;d[l]&&a._colModel.push(d[l++].header););}function e(a,b,c,d){for(var f,g,e=0;a[b][e]&&++e;);for(f=b;b+c>f;f++)for(g=e;e+d>g;g++)a[f][g]=!0;return e}a.omWidget.addBeforeInitListener("om.omGrid",function(){var e=this._getColModel();!a.isArray(e)||e.length<=0||!a.isArray(e[0])||(d(this),this.hDiv.addClass("hDiv-group-header"),a.extend(this,{_getColModel:function(){return this._colModel},_getHeaderCols:function(){var b=[],c=this.options,d=this.hDiv,e=d.find("th[axis^='col']");return a(e).each(function(){b.push(this)}),b.sort(function(a,b){return a.axis.slice(3)-b.axis.slice(3)}),!c.singleSelect&&b.unshift(d.find("th[axis='checkboxCol']")[0]),c.showIndex&&b.unshift(d.find("th[axis='indexCol']")[0]),c.rowDetailsProvider&&b.unshift(d.find("th[axis='expenderCol']")[0]),a(b)},_buildTableHead:function(){var l,m,n,o,p,q,r,s,t,u,v,w,d=this.options,e=this.element,g=(e.closest(".om-grid"),d.colModel),h=0,i=-1,j="<th class='$' $ $ $ $ $><div class='$' style='text-align:$; $'>$</div></th>",k=["<thead>"];for(p=0,q=g.length;q>p;p++){for(k.push("<tr>"),0==p&&(d.showIndex&&k.push("<th class='indexCol data-header-"+q+"' align='center' axis='indexCol' rowspan="+q+"><div class='indexheader' style='text-align:center;width:25px;' /></th>"),d.singleSelect||k.push("<th class='checkboxCol data-header-"+q+"' align='center' axis='checkboxCol' rowspan="+q+"><div class='checkboxheader' style='text-align:center;width:17px;'><span class='checkbox'/></div></th>")),n=g[p],r=0,s=n.length;s>r;r++)m=n[r],t=m.width||60,u=m.align||"center",v=m.name,m.name&&"autoExpand"==t&&(t=0,i=b(this,m)),w=m.wrap?"wrap":"",w+=(m.name?" data-header-":" group-header-")+(m.rowspan?m.rowspan:1),l=[w,m.align?"align="+m.align:"",v?"axis=col"+b(this,m):"",v?"abbr="+v:"",m.rowspan?"rowspan="+m.rowspan:"",m.colspan?"colspan="+m.colspan:"",m.wrap?"wrap":"",u,v?"width:"+t+"px":"",m.header],c(k,l,j),m.name&&(h+=t);k.push("</tr>")}k.push("</thead>"),a("table",this.hDiv).html(k.join("")),o=a("thead",this.hDiv),this._fixHeaderWidth(i,h),this.thead=o,o=null}}))})}(jQuery),function(a){function b(b){var e,f,h,j,l,n,o,c=a(this),d=b.element,i=b._getColModel(),m=b.options;g(b)&&(b._allEditMode||c.attr("_insert"))&&(b._triggered&&b._editView.editing&&q(c)==b._editView.rowId||b._rowAdding||(n=b._getTrs().index(c),o=b._getRowData(n),m.onBeforeEdit&&m.onBeforeEdit.call(b,n,o)===!1||(k(b,c),e=b._editView.editRow,f=e.find(">.grid-edit-form"),h=d.parent().scrollLeft(),b._getHeaderCols().each(function(g){var m,q,r,t,u,w,v,x,y,z,k=a(this).attr("axis"),n=c.find("td:eq("+g+")");if("col"!=k.substring(0,3))return a.isEmptyObject(b._editComps)&&e.css("padding-left",parseInt(e.css("padding-left"))+n.outerWidth()),void 0;switch(r=k.substring(3),m=i[r],t=m.editor,b._triggered?q=m.editor.name||m.name:(!t||t&&(t.editable===!1||a.isFunction(t.editable)&&t.editable()===!1)?(u=t&&t.renderer,m.editor=t={},t.type="text",u&&(t.renderer=u,t.type="custom"),t.editable=!1):(t.type=t.type||"text",t.editable=!0,t.rules&&(b._validate=!0)),q=m.editor.name||m.name,t.options=t.options||{},b._editComps[q]={}),j=b._editComps[q],l=void 0==(l=s(b,c,m))?"":l,!b._triggered&&t.editable&&t.rules&&(b._errorHolders[q]=a("<div class='errorContainer' style='display:none'></div>").appendTo(d.parent())),v=j.instance,x=t.type,v||(w=a("<div style='position:absolute'></div>").css({left:n.position().left+h,top:3}).appendTo(f).addClass("grid-edit-wrapper"),v=j.instance=a("<input></input>").attr({name:q,id:q}).appendTo(w),"text"!=x&&"custom"!=x&&("omDateTime"==x?v["omCalendar"](t.options):v[x](t.options)),"omCalendar"==x||"omCombo"==x||"omDateTime"==x?(y=v.parent(),"omCalendar"==x||"omDateTime"==x?(v.val(l).width(n.outerWidth()-24),v.width(n.outerWidth(!0)-(y.outerWidth(!0)-v.width()))):(v.next("input").attr({id:v.prop("id"),name:v.prop("name")}),v.attr({id:"",name:""}),v.next("input").width(n.outerWidth(!0)-(y.outerWidth(!0)-v.next("input").width())))):("text"==x&&(v.addClass("grid-edit-text"),t.editable||v.attr("readonly","readonly").addClass("readonly-text")),"custom"==x&&(v=j.instance=w.html(t.renderer.call(b,l,o))),v.width(n.outerWidth(!0)-(v.outerWidth(!0)-v.width()))),j.model=m,j.type=x,j.id=m.name,"custom"!=x&&(z="omCombo"==x?v.next():v,z.blur(function(){var c=b._errorHolders[q];c&&c.hide()}))),x){case"omCalendar":v=v.val(l).omCalendar();break;case"omDateTime":v=v.val(l).omCalendar({date:new Date,showTime:!0});break;case"omNumberField":v.val(l).trigger("blur");break;case"omCombo":v.omCombo("value",l);break;case"text":v.val(l);break;case"custom":v.html(t.renderer.call(b,l,o))}}),!b._triggered&&b._validate&&u(b),b._validator&&b._validator.form(),b._triggered=!0)))}function c(a){a._changeData={update:{},insert:{},"delete":{}}}function d(a){return!g(a)||!j(a)}function e(a){var b=a.element,c=b.parent(),d=a._editView,f=(d.view,d.editBtn),g=d.editRow,h={};return h.top=g.height(),h.left=b.width()<c.width()?b.width()/2-f.width()/2:c.scrollLeft()+c.width()/2-f.width()/2,h}function f(){g(this)&&(c(this),h(this),this._triggered&&(i(this),this._editView.view.hide(),this._editView.editing=!1,this.hDiv.scrollLeft(0),this.element.parent().scrollLeft(0)))}function g(a){return!a._allEditMode||a._globalEditable}function h(a){var b=a.getData().rows;a._rowIdDataMap={},a._getTrs().each(function(c,d){a._rowIdDataMap[q(d)]=b[c]})}function i(b){b._validator&&(b._validator.resetForm(),a.each(b._errorHolders,function(a,b){b.empty().hide()}))}function j(b){var c=b._changeData;return!(a.isEmptyObject(c.update)&&a.isEmptyObject(c.insert)&&a.isEmptyObject(c["delete"]))}function k(b,c){var g,h,l,n,p,d=b.element,f=d.next(".grid-edit-view"),i=a(c).position(),j=d.parent().scrollTop(),k=b.options;0==f.length&&(f=a("<div class='grid-edit-view'><div class='body-wrapper'><div class='grid-edit-row'><form class='grid-edit-form'></form></div><div class='gird-edit-btn'><input type='button' class='ok' value=''/><input type='button' class='cancel' value=''/></div></div></div>").width(d.outerWidth()).insertAfter(d),g=f.find(".gird-edit-btn"),h=g.prev(".grid-edit-row"),b._editView={view:f,editRow:h,editBtn:g},l=e(b),g.css({left:l.left,top:l.top}),n=g.find("input.ok").omButton(),p=g.find("input.cancel").omButton(),n.click(function(){var a,c;(!b._validator||b._validator.form())&&(a=d.find("tr[_grid_row_id='"+b._editView.rowId+"']"),o(b,a),f.hide(),b._editView.editing=!1,n.blur(),b._rowAdding&&(b._refreshHeaderCheckBox(),b._rowAdding=!1),c=b._getTrs().index(a),k.onAfterEdit&&k.onAfterEdit.call(b,c,b._getRowData(c)))}),p.click(function(){b.cancelEdit(this)})),b._editView.rowId=q(c),b._editView.editing?f.animate({top:i.top+j},"fast"):(f.css({top:i.top+j}),b._editView.editing=!0,f.show(),b._colWidthResize&&(m(b),b._colWidthResize=!1))}function l(){if(g(this)&&this._triggered)if(this._editView.editing){this.element.parent().scrollLeft(0);var a=this;setTimeout(function(){m(a)},0)}else this._colWidthResize=!0}function m(b,c,d){var k,l,f=b.element,g=b._editView,h=g.view,i=f.parent().scrollLeft(),j=g.editBtn;h.width(f.outerWidth()),b._getHeaderCols().each(function(e,f){var g=a(f).attr("abbr"),h=a(f),j=c&&c.prop("abbr")===h.prop("abbr");j&&(k=!0),(!c||k)&&a.each(b._editComps,function(a,b){var k,e=b.instance,f=b.type;if(g==b.id){if(!j&&c)return e.closest("div.grid-edit-wrapper").css("left","+="+d),!1;j||e.closest("div.grid-edit-wrapper").width(h.outerWidth()).css("left",h.position().left+i),"omCalendar"==f||"omCombo"==f||"omDateTime"==f?(k=e.parent(),"omCalendar"==f||"omDateTime"==f?(e.width(h.outerWidth()-24),e.width(h.outerWidth(!0)-(k.outerWidth(!0)-e.width()))):e.next("input").width(h.outerWidth(!0)-(k.outerWidth(!0)-e.next("input").width()))):e.width(h.outerWidth(!0)-(e.outerWidth(!0)-e.width()))}})}),l=e(b),c?j.animate({left:l.left,top:l.top},"fast"):j.css({left:l.left,top:l.top})}function n(a,b){return g(this)&&this._triggered&&this._editView.editing?(m(this,a,b),void 0):(this._colWidthResize=!0,void 0)}function o(b,c){var d=a(c),f=(b._editView.editRow,b._editComps),g=q(d),h=b._getTrs().index(d),i=b._getRowData(h);a.each(f,function(e,f){var l,m,n,j=f.model.name,k=r(b,d,f);d.attr("_insert")?b._changeData.insert[g][j]=k:(l=t(b,c)[j],n=b._changeData.update[g],String(k)===String(l)?(p(d,f.model,!1),n&&delete n[j],a.isEmptyObject(n)&&delete b._changeData.update[g]):(p(d,f.model,!0),n=b._changeData.update[g]=n||{},n[j]=k)),m=f.model.renderer?f.model.renderer(k,i,h):void 0==k?"":k,d.find("td[abbr='"+j+"'] >div").html(m)})}function p(a,b,c){a.find("td[abbr='"+b.name+"']").toggleClass("grid-cell-dirty",c)}function q(b){return a(b).attr("_grid_row_id")}function r(a,b,c){var d,e=t(a,b),f=c.instance;switch(c.type){case"omCalendar":d=f.val();case"omDateTime":d=f.val();case"omNumberField":d=f.val();break;case"omCombo":d=f.omCombo("value");break;case"text":d=f.val();break;case"custom":if(c.model.editor.getValue)return c.model.editor.getValue.call(f,e,c.model.name)}return d}function s(a,b,c){var d,f,e=c.name;return b.attr("_insert")?d=t(a,b)[e]:(f=a._changeData.update[q(b)],d=f&&null!=f[e]?f[e]:t(a,b)[e]),d}function t(b,c){var d=q(c);return a(c).attr("_insert")?b._changeData.insert[d]:b._rowIdDataMap[d]}function u(b){var c=b._editView.editRow.find(">.grid-edit-form"),d={},e=d.rules={},f=d.messages={},g=b._getColModel();a.each(g,function(b,c){var g,h,i,j,k,l,d=c.editor.rules;if(d)for(g=e[c.editor.name||c.name]={},h=f[c.editor.name||c.name]={},d.length>0&&!a.isArray(d[0])&&(i=[],i.push(d),d=i),j=0,k=d.length;k>j;j++)l=d[j][0],g[l]=void 0==d[j][1]?!0:d[j][1],d[j][2]&&(h[l]=d[j][2])}),a.extend(d,{onkeyup:function(a){this.element(a)},errorPlacement:function(){},showErrors:function(c,d){d&&d.length>0?a.each(d,function(c,d){var h,i,e=a(d.element),f=e.attr("name"),g=b._errorHolders[f];g&&(h=e.offset(),i=b.element.offset(),g.css({left:h.left-i.left+e.outerWidth(),top:h.top-i.top+e.outerHeight()}).html(d.message),e.is(":focus")&&g.show())}):a.each(this.currentElements,function(c,d){var e=b._errorHolders[a(d).attr("name")];e&&e.empty().hide()});var e=b._editView.editBtn.find("input.ok"),f=!0;a.each(b._errorHolders,function(a,b){return b.is(":empty")?void 0:f=!1}),f?e.omButton("enable"):e.omButton("disable"),this.defaultShowErrors()}}),b._validator=c.validate(d),a.each(b._editComps,function(a,c){var e,f,g,d=c.model.editor;d.editable&&d.rules&&(e=d.name||c.model.name,f=b._errorHolders[e],g="omCombo"==c.type?c.instance.next("input"):c.instance,g.mouseover(function(){f&&!f.is(":empty")&&f.show()}).mouseout(function(){f&&f.hide()}))})}var v=Object.prototype.hasOwnProperty;a.omWidget.addInitListener("om.omGrid",function(){var p,r,s,h=this,k=h.element,m=h.options,o=this._getColModel();for(h._triggered=!1,h._globalEditable=!1,m.editMode=m.editMode||"all",h._allEditMode="all"==m.editMode,p=0,r=o.length;r>p&&(h._globalEditable=o[p].editor?!0:!1,!h._globalEditable);p++);g(h)&&(h._editComps={},h._errorHolders={},h._colWidthResize,m._onRefreshCallbacks.push(f),m._onResizableCallbacks.push(n),m._onResizeCallbacks.push(l),this.tbody.delegate("tr.om-grid-row","dblclick",function(){b.call(this,h)}),this.tbody.delegate("tr.om-grid-row","click",function(){h._triggered&&h._editView.editing&&(h._validator?h._validator.valid()&&b.call(this,h):b.call(this,h))}),k.parent().scroll(function(){h._triggered&&(s&&clearTimeout(s),s=setTimeout(function(){var a=e(h);h._editView.editBtn.animate({left:a.left,top:a.top},h._editView.editing?"fast":0),s=null},300))}),a.extend(this,{cancelEdit:function(b){var c=this._editView,d=this.options;g(this)&&this._triggered&&(!this._triggered||c.editing)&&(c.view.hide(),c.editing=!1,this._rowAdding&&(this.deleteRow(this._getTrs().index(this.tbody.find("tr[_grid_row_id='"+h._editView.rowId+"']"))),this._rowAdding=!1),i(this),b&&a(b).blur(),d.onCancelEdit&&d.onCancelEdit.call(this))},cancelChanges:function(){this.cancelEdit(),d(this)||(c(this),i(this),this.refresh())},editRow:function(a){g(this)&&b.call(this._getTrs().eq(a)[0],this)},deleteRow:function(b){if(!(!g(this)||this._triggered&&this._editView.editing)){var c=this._getTrs(),d=this;a.isArray(b)||(b=[b]),b.sort(function(a,b){return b-a}),a(b).each(function(a,b){var e=c.eq(b),f=e.next(),g=q(e);e.attr("_insert")?(delete d._changeData.insert[g],e.remove(),f.hasClass("rowExpand-rowDetails")&&f.remove()):(d._changeData["delete"][g]=d._rowIdDataMap[g],e.attr("_delete","true").hide(),f.hasClass("rowExpand-rowDetails")&&f.hide())}),this._refreshHeaderCheckBox()}},getChanges:function(b){var f,g,h,i,c={update:[],insert:[],"delete":[]},d=b?b:"update",e=this._changeData;if("update"===d){g=e[d];for(f in g)v.call(g,f)&&c[d].push(a.extend(!0,{},this._rowIdDataMap[f],g[f]));d=b?b:"insert"}if("insert"===d){h=e[d];for(f in h)v.call(h,f)&&c[d].push(h[f]);d=b?b:"delete"}if("delete"===d){i=e[d];for(f in i)v.call(i,f)&&c[d].push(i[f])}return b?c[b]:c},insertRow:function(b,c,d){var i,j,k,l,m,n,o,q,r,p,e=this.options,f=this._getColModel(),h=this.element;if(g(this)&&!this._rowAdding){for(a.isPlainObject(b)&&(c=b,b=0),b===!0&&(c={},b=0,d=!0),i=this._getTrs(),j={},b="begin"==b||void 0==b?0:"end"==b?i.length:b,k=0,l=f.length;l>k;k++)j[f[k].name]="";this._changeData.insert[this._guid]=a.extend(!0,j,c),m=this._buildRowCellValues(f,j,b),n=[],o=e.rowClasses,isRowClassesFn="function"==typeof o,rowCls=isRowClassesFn?o(b,j):o[b%o.length],tdTmp="<td align='$' abbr='$' class='grid-cell-dirty $'><div align='$' class='$' style='width:$px'>$</div></td>",n.push("<tr class='om-grid-row "+rowCls+"' _grid_row_id="+this._guid++ +" _insert='true'>"),this._getHeaderCols().each(function(){var e,g,h,i,c=a(this).attr("axis"),d=!1;"indexCol"==c?e="<a class='om-icon'></a>":"checkboxCol"==c?e='<span class="checkbox"/>':"col"==c.substring(0,3)?(i=c.substring(3),e=m[i],f[i].wrap&&(d=!0)):e="",g=[this.align,this.abbr,c,this.align,d?"wrap":"",a("div",a(this)).width(),e],h=0,n.push(tdTmp.replace(/\$/g,function(){return g[h++]}))}),n.push("</tr>"),p=a(n.join(" ")),0==b?p.prependTo(h.find(">tbody")):(q=i.eq(b-1),r=q.next(),q=r.hasClass("rowExpand-rowDetails")?r:q,q.after(p)),d||(this.editRow(b),this._rowAdding=!0)}},saveChanges:function(){var b,e,f,g,h;if(this.cancelEdit(),!d(this)){b=this._changeData.update,e=this.element.find("tr.om-grid-row"),f=[];for(g in b)v.call(b,g)&&a.extend(!0,this._rowIdDataMap[g],b[g]);h=this,e.each(function(b,c){var d=a(c);d.attr("_delete")?d.remove():f.push(t(h,c))}),this.pageData.data.rows=f,c(this),i(this),this.refresh()}},onBeforeEdit:function(){},onAfterEdit:function(){},onCancelEdit:function(){},getData:function(){var a=this.pageData.data,b=this._getTrs(),c=this;return g(this)&&j(this)&&(a={total:a.total},a.rows=[],b.each(function(b){a.rows.push(c._getRowData(b))})),a},_getRowData:function(b){var f,g,h,c=this._getTrs().eq(b),e=q(c);return d(this)?this.pageData.data.rows[b]:(c.attr("_insert")?f=this._changeData.insert[e]:(g=this._rowIdDataMap[e],h=this._changeData.update,f=g,h[e]&&(f=a.extend(!0,{},g,h[e]))),f)}}))})}(jQuery),function(a){a.omWidget.addInitListener("om.omGrid",function(){var g,h,i,j,k,b=this,c=this.options,d=c.rowDetailsProvider,e=c.colModel,f=this.thead;d&&e.length>0&&(f.find("th:first").before('<th align="center" axis="expenderCol" class="expenderCol" rowspan='+(a.isArray(e[0])?e.length:1)+'><div style="text-align: center; width: 14px;"></div></th>'),g=-1,h=0,e=this._getColModel(),a(e).each(function(a){"autoExpand"==e[a].width?g=a:h+=e[a].width}),i=f.find('th[axis="expenderCol"]').width(),-1!=g?f.find('th[axis="col'+g+'"] >div').css("width","-="+i):c.autoFit&&(j=i/h,f.find('th[axis^="col"] >div').each(function(b){a(this).css("width","-="+parseInt(e[b].width*j))})),k=this._getHeaderCols().size(),this.tbody.delegate("td.expenderCol >div","click",function(){var h,e=a(this),f=e.closest("tr"),g=f.next("tr");return g.hasClass("rowExpand-rowDetails")?g.toggle():(h=b._getTrs().index(f),rowData=b._getRowData(h),rowDetails=d?d(rowData,h):"&#160;",f.after('<tr class="rowExpand-rowDetails"><td colspan="'+(k-1)+'"><div class="rowExpand-rowDetails-content">'+rowDetails+"</div></td></tr>")),e.toggleClass("rowExpand-expanded").parent().attr("rowspan",e.hasClass("rowExpand-expanded")?2:1),!1}))})}(jQuery),function(a){function b(b,c){var d=b._oldPage,e=b.pageData.nowPage;return"input"===c?d!=a(".pControl input",b.element.closest(".om-grid")).val():"reload"===c?!0:d!=e}var c=[{cls:"pFirst",type:"first"},{cls:"pPrev",type:"prev"},{cls:"pNext",type:"next"},{cls:"pLast",type:"last"},{cls:"pReload",type:"reload"}];a.omWidget.addInitListener("om.omGrid",function(){var h,i,d=this,e=this._getColModel(),f=this._getHeaderCols().filter("[axis^='col']"),g=this.pDiv;for(a(f).each(function(b){var g,c=e[b].sort;c&&(g=a(this).click(function(){var j,k,a=e[b].name,h=g.hasClass("asc")?"asc":g.hasClass("desc")?"desc":null,i="asc"==h?"desc":"asc";switch(f.removeClass("asc desc"),g.addClass(i),j=d._extraData,delete j.sortBy,delete j.sortDir,c){case"serverSide":return j.sortBy=a,j.sortDir=i,d.reload(),void 0;case"clientSide":c=function(b,c){var d=b[a],e=c[a];return d==e?0:d>e?1:-1}}k=d.pageData.data,k.rows=null==h?k.rows.sort(c):k.rows.reverse(),d.refresh()}),g.children().first().append('<img class="om-grid-sortIcon" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></img>'))}),h=0,i=c.length;i>h;h++)!function(h){g.find("."+c[h].cls).click(function(){var g=b(d,c[h].type);f.each(function(b){var c=a(this);g&&(c.hasClass("asc")||c.hasClass("desc"))&&"serverSide"!==e[b].sort&&c.removeClass("asc desc")})})}(h);a(".pControl input",g).keydown(function(c){var g=b(d,"input");c.keyCode==a.om.keyCode.ENTER&&f.each(function(b){var c=a(this);g&&(c.hasClass("asc")||c.hasClass("desc"))&&"serverSide"!==e[b].sort&&c.removeClass("asc desc")})}),this.clearSort=function(){var a=this._extraData;a.sortBy=void 0,a.sortDir=void 0,this._getHeaderCols().removeClass("asc desc")}})}(jQuery),function(a){a.omWidget("om.omItemSelector",{options:{width:"300px",height:"300px",dataSource:[],value:[],clientFormatter:!1,autoSort:!1,preProcess:function(a){return a},onError:jQuery.noop,onSuccess:jQuery.noop,onBeforeItemSelect:jQuery.noop,onBeforeItemDeselect:jQuery.noop,onItemSelect:jQuery.noop,onItemDeselect:jQuery.noop},_create:function(){this.element.addClass("om-itemselector om-widget").html('<table style="height:100%;width:100%" cellpadding="0" cellspacing="0"><tr><td class="om-itemselector-leftpanel"></td><td class="om-itemselector-toolbar"></td><td class="om-itemselector-rightpanel"></td></tr></table>');var b=a("td",this.element),c=a("<thead></thead>"),d=a("<th></th>").attr({axis:"checkboxCol",align:"center"}).append(a('<div class="header"><span class="checkbox"/><span class="om-itemselector-title"/></div>'));a("<tr></tr>").append(d).appendTo(c),this.leftPanel=a('<table cellspacing="0" cellpadding="0"></table>').append(c).append('<tr><td><div class="om-itemselector-up"><span class="upbtn"/></div><div class="om-itemselector-items"><dl></dl></div><div class="om-itemselector-down"><span class="downbtn"/></div></tr></td>').appendTo(b.eq(0)),this.toolbar=a("<div></div>").appendTo(b.eq(1)),this.rightPanel=this.leftPanel.clone().appendTo(b.eq(2))},_init:function(){var d,b=this.options,c=b.dataSource;this.leftPanel.find(".om-itemselector-title").html(a.om.lang._get(b,"omItemSelector","availableTitle")),this.rightPanel.find(".om-itemselector-title").html(a.om.lang._get(b,"omItemSelector","selectedTitle")),this.element.css({width:b.width,height:b.height}),this._buildToolbar(),this._resizePanel(),this._bindEvents(),"string"==typeof c?(d=this,a.ajax({url:c,method:"GET",dataType:"json",success:function(a,c){d._trigger("onSuccess",null,a,c)!==!1&&(a=b.preProcess(a),b.dataSource=a,d._buildList())},error:function(a,b,c){d._trigger("onError",null,a,b,c)}})):this._buildList(),this._refreshPageButton(this.leftPanel),this._refreshPageButton(this.rightPanel)},_buildToolbar:function(){var d,e,f,b="",c=["add","space","remove"];for(d=0,e=c.length;e>d;d++)f=c[d],b+='<div class="om-icon om-itemselector-tbar-'+f+'" title="'+(a.om.lang._get({},"omItemSelector",f+"IconTip")||"")+'"></div>';this.toolbar.html(b)},_resizePanel:function(){var b=this,c=b.leftPanel,d=b.rightPanel,e=a(".om-itemselector-items",c),f=a(".om-itemselector-items",d),g=c.parent().innerHeight()-e.offset().top+c.offset().top,h=(a("tr",b.element).innerWidth()-b.toolbar.outerWidth())/2,i=c.outerWidth(h).innerWidth();e.outerHeight(g).width(i),f.outerHeight(g).width(i),b.element.data("dltop",a(".om-itemselector-items >dl",c).offset().top)},_buildList:function(){var c,d,e,f,b=this.options;dataSource=b.dataSource,value=b.value,fmt=b.clientFormatter,leftHtml="",rightHtml="",inArray=function(a,b){for(var c=0,d=b.length;d>c;c++)if(a.value===b[c])return!0;return!1},buildHtml=fmt?function(a,b){return'<dt _index="'+a+'"><span class="checkbox"/>'+fmt(b,a)+"</dt>"}:function(a,b){return'<dt _index="'+a+'"><span class="checkbox"/>'+b.text+"</dt>"},a.isArray(dataSource)&&jQuery.isArray(value)&&a.each(dataSource,function(a,b){inArray(b,value)?rightHtml+=buildHtml(a,b):leftHtml+=buildHtml(a,b)}),a(".om-itemselector-items>dl",this.leftPanel).html(leftHtml),a(".om-itemselector-items>dl",this.rightPanel).html(rightHtml),c=a(".om-itemselector-items"),d=a(">dl>dt",c).outerHeight(),e=c.outerHeight(),f=d-e%d,c.outerHeight(e+f)},_bindEvents:function(){var b=this,c=b.toolbar;b.leftPanel.delegate(".om-itemselector-items>dl>dt","click.omItemSelector",function(){a(this).toggleClass("om-state-highlight"),b._refreshHeaderCheckbox(b.leftPanel)}),b.rightPanel.delegate(".om-itemselector-items>dl>dt","click",function(){a(this).toggleClass("om-state-highlight"),b._refreshHeaderCheckbox(b.rightPanel)}),this.leftPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){a(".om-itemselector-items>dl>dt",b.element).removeClass("om-state-highlight"),a(this).addClass("om-state-highlight"),b._moveItemsToTarget(".om-state-highlight",!0)}),this.rightPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){a(".om-itemselector-items>dl>dt",b.element).removeClass("om-state-highlight"),a(this).addClass("om-state-highlight"),b._moveItemsToTarget(".om-state-highlight",!1)}),a(".om-itemselector-tbar-add",c).click(function(){b._moveItemsToTarget(".om-state-highlight",!0)}),a(".om-itemselector-tbar-remove",c).click(function(){b._moveItemsToTarget(".om-state-highlight",!1)}),a(".header span.checkbox",b.leftPanel).click(function(){var c=b.leftPanel,d=a(".om-itemselector-items>dl>dt",c);a(this).toggleClass("selected"),a("div.om-itemselector-up:visible",c).length>0&&(d=a(b._getPageItems(c,d))),a(this).hasClass("selected")?d.addClass("om-state-highlight"):d.removeClass("om-state-highlight")}),a(".header span.checkbox",b.rightPanel).click(function(){var c=b.rightPanel,d=a(".om-itemselector-items>dl>dt",c);a(this).toggleClass("selected"),a("div.om-itemselector-up:visible",c).length>0&&(d=a(b._getPageItems(c,d))),a(this).hasClass("selected")?d.addClass("om-state-highlight"):d.removeClass("om-state-highlight")}),b.element.delegate("div.om-itemselector-up:not([disabled])","click",function(){b._page(a(this),!0),b._refreshHeaderCheckbox(a(this).parentsUntil("table").last().parent())}),b.element.delegate("div.om-itemselector-down:not([disabled])","click",function(){b._page(a(this),!1),b._refreshHeaderCheckbox(a(this).parentsUntil("table").last().parent())})},_page:function(a,b){var h,c=b?a.next():a.prev(),d=c.children("dl"),e=c.outerHeight()-2,f=d.outerHeight(),g=d.offset().top,i=this.element.data("dltop")+20;b?(d.offset({top:g+e}),h=c.next(),((g=d.offset().top)>0||d.outerHeight()-g-i>e)&&h.removeAttr("disabled").removeClass("om-itemselector-down-disabled"),g>0&&e>g&&a.attr("disabled","disabled").addClass("om-itemselector-up-disabled")):(d.offset({top:g-e}),h=c.prev(),h.removeAttr("disabled").removeClass("om-itemselector-up-disabled"),(g=d.offset().top)<0&&e>=f+g-i&&a.attr("disabled","disabled").addClass("om-itemselector-down-disabled"))},_refreshHeaderCheckbox:function(b){var d,c=a(".om-itemselector-items>dl>dt",b);c=a(this._getPageItems(b,c)),d=c.filter(".om-state-highlight").length,a(".header span.checkbox",b).toggleClass("selected",d>0&&c.length===d)},_refreshPageButton:function(b){var c=a(".om-itemselector-items",b),d=a(".om-itemselector-items >dl",b),e=a(".om-itemselector-up",b),f=a(".om-itemselector-down",b),g=c.outerHeight(),h=d.outerHeight(),i=d.offset().top,j=this.element.data("dltop")+20;h>20&&j-i>=h&&(d.offset({top:i+g}),i=d.offset().top),h>g?(e.is(":hidden")&&(c.outerHeight(g-2*e.outerHeight()),e.show(),f.show()),i>0&&g>i?e.attr("disabled","disabled").addClass("om-itemselector-up-disabled"):e.removeAttr("disabled").removeClass("om-itemselector-up-disabled"),i>0||h+i-j>g?f.removeAttr("disabled").removeClass("om-itemselector-down-disabled"):f.attr("disabled","disabled").addClass("om-itemselector-down-disabled")):e.is(":visible")&&(c.outerHeight(g+2*e.outerHeight()),e.hide(),f.hide())},_getPageItems:function(b,c){var d=a(".om-itemselector-items",b),e=d.outerHeight(),f=a(">dl",d),g=[],h=d.next(":visible").length>0,i=c.outerHeight(),j=e/i,k=f.offset().top,l=this.element.data("dltop");return k=h?l-k+20:l-k,g=a.grep(c,function(a,b){return j*(k/e+1)-1>b&&b>=j*(k/e)})},select:function(b){a.isArray(indexes)||(indexes=[indexes]);for(var c=0,d=b.length;d>c;c++)a('.om-itemselector-items>dl>dt[_index="'+b[c]+'"]').addClass("om-state-highlight")},_moveItemsToTarget:function(b,c){var g,h,i,d=this,e=c?this.leftPanel:this.rightPanel,f=a(".om-itemselector-items>dl>dt"+b,e);if(0!=f.size()){if(g=c?this.rightPanel:this.leftPanel,h=this.options,i=[],f.each(function(){i.push(h.dataSource[a(this).attr("_index")])}),c){if(d._trigger("onBeforeItemSelect",null,i)===!1)return;f.appendTo(a(".om-itemselector-items>dl",g)).removeClass("om-state-highlight"),d._trigger("onItemSelect",null,i)}else{if(d._trigger("onBeforeItemDeselect",null,i)===!1)return;f.appendTo(a(".om-itemselector-items>dl",g)).removeClass("om-state-highlight"),d._trigger("onItemDeselect",null,i)}d._refreshHeaderCheckbox(e),d._refreshPageButton(e),d._refreshPageButton(g)}},value:function(b){if(0==arguments.length){var c=this.options,d=a(".om-itemselector-items>dl>dt",this.rightPanel),e=[];return d.each(function(){e.push(c.dataSource[a(this).attr("_index")].value)}),e}a.isArray(b)&&(this.options.value=b,this._buildList())}}),a.om.lang.omItemSelector={availableTitle:"",selectedTitle:"",addIconTip:"",removeIconTip:""}}(jQuery),function(a){a.omWidget("om.omMenu",{options:{contextMenu:!1,maxWidth:200,minWidth:100,dataSource:"local"},show:function(b){var e,f,i,j,k,c=this,d=c.options,g=c.element,h=a(b).offset();for(d.contextMenu?(e=b.pageY,f=b.pageX,b.preventDefault(),b.stopPropagation(),b.cancelBubble=!0):(i=parseInt(a(b).css("borderBottomWidth").replace("px","")),e=h.top+a(b).height()+("NaN"!=i?i:0)+1,f=h.left+1),j=g.parent();"static"==j.css("position")&&"BODY"!=j[0].nodeName;)j=j.parent();e-=j.offset().top,f-=j.offset().left,f+g.outerWidth()>document.documentElement.clientWidth&&(f=f-g.outerWidth()-20),a(g).css({top:e,left:f}).show(),a(g).children("ul.om-menu").show(),k=.7*a(g).width(),a(g).children("ul.om-menu").children().each(function(b,c){a(c).find("span:first").hasClass("om-menu-item-sep")?a(c).find("span:first").width("98%"):a(c).find("span:first").width()>k&&a(c).find("span:first").width(a(c).attr("aria-haspopup")?k-15:k)
})},hide:function(){this._hide()},disableItem:function(a){this.element.find("#"+a).addClass("om-state-disabled").unbind(".menuItem")},enableItem:function(a){var b=this,c=b.element,d=c.find("#"+a);d.removeClass("om-state-disabled"),b._bindLiEvent(d)},destroy:function(){for(var c,b=a(document);c=this.globalEvent.pop();)b.unbind(".omMenu",c)},_create:function(){var e,a=this,b=a.options,c=a.element,d=b.dataSource;c.addClass("om-menu-container om-menu-content om-corner-all"),c.css("position","absolute"),d&&("local"!=d?"string"==typeof d?a._ajaxLoad(c,d):"object"==typeof d&&(c.append(a._appendNodes.apply(a,[d])),a._bindEvent()):(e=c.children("ul").addClass("om-menu"),a._parseDomMenu(e),a._bindEvent()))},_init:function(){var b=this.options,c=this.element;c.css({minWidth:b.minWidth-10,maxWidth:b.maxWidth-10}),a.browser.msie&&"6.0"==a.browser.version&&c.css("width",b.minWidth+30),a.browser.msie&&"7.0"==a.browser.version&&c.css("width",b.maxWidth-10)},_ajaxLoad:function(b,c){var d=this;a.ajax({url:c,method:"POST",dataType:"json",success:function(a){b.append(d._appendNodes.apply(d,[a])),d._bindEvent()}})},_appendNodes:function(b,c){var i,d=this,e=[],f=void 0==c?"om-menu":"om-menu-content",g=void 0==c?"block":"none",h=void 0==c?"om-menu-icon":"om-menu-icon om-menu-icon-child";return e.push('<ul class="'+f+' om-corner-all" style="display:'+g+';">'),i=[],a(b).each(function(b,c){null!=c.children?(c.disabled===!0||"true"==c.disabled?i.push('<li id="'+c.id+'" aria-haspopup="true"  class="om-state-disabled">'):i.push('<li id="'+c.id+'"  aria-haspopup="true">'),i.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),c.icon?i.push('<img class="'+h+'" src="'+c.icon+'">'):null,c.icon?i.push("<span>"+c.label+"</span>"):i.push('<span style="margin-left:2em;">'+c.label+"</span>"),i.push('<span class="ui-icon-span" role="popup"></span>'),i.push("</a>"),i.push(d._appendNodes(c.children,b++)),i.push("</li>")):(c.disabled===!0||"true"==c.disabled?i.push('<li id="'+c.id+'"  class="om-state-disabled">'):i.push('<li id="'+c.id+'" >'),i.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),c.icon?i.push('<img class="'+h+'" src="'+c.icon+'">'):null,c.icon?i.push("<span>"+c.label+"</span>"):i.push('<span style="margin-left:2em;">'+c.label+"</span>"),i.push("</a>"),i.push("</li>")),("true"==c.seperator||1==c.seperator)&&i.push('<li class="om-menu-sep-li"  ><span class="om-menu-item-sep">&nbsp;</span></li>');var e=a(d.element).attr("id")+"_"+c.id;a(d.element).data(e,c)}),e.push(i.join("")),e.push("</ul>"),e.join("")},_parseDomMenu:function(b){var c,d,e,f;for("true"==b.parent().attr("aria-haspopup")&&b.addClass("om-menu-content om-corner-all"),b.css("display","none"),c=b.children(),d=0;d<c.length;d++)e=a(c[d]),f=e.children("ul"),f.length>0&&(e.attr("aria-haspopup","true"),e.find("span[role='popup']").addClass("ui-icon-span"),this._parseDomMenu(f)),e.find("a").addClass("om-corner-all om-menu-indicator"),e.find("img").addClass("om-menu-icon")},_showChildren:function(b){var d,e,c=this;b&&b.length>0&&(d=b.children("ul").eq(0),d.css({minWidth:this.options.minWidth,top:b.position().top}),e=b.width(),2*e+b.offset().left>document.documentElement.clientWidth&&(e=-e),d.css("left",e),d.show(),d.children().each(function(b,e){a(e).find("span:first").hasClass("om-menu-item-sep")?a(e).find("span:first").width("98%"):(d.width()>c.options.maxWidth?(d.width(c.options.maxWidth),width=.6*c.options.maxWidth):(void 0==d.attr("hasShow")&&(d.width(d.find("li:eq(0)>a:eq(0)").width()+15),d.attr("hasShow",!0)),width=.6*d.width()),a(e).find("span:first").width(width))}))},_hideChildren:function(a){a.children("ul").eq(0).hide()},_bindLiEvent:function(b){var c=this,d=c.element,e=c.options;a(b).bind("mouseenter.menuItem",function(){var b=a(this),d=b.parent().width();b.addClass("om-menu-item-hover"),a.browser.msie&&"9.0"==a.browser.version&&b.parent().width(d),b.attr("aria-haspopup")&&setTimeout(function(){c._showChildren(b)},200)}).bind("mouseleave.menuItem",function(){var b=a(this);b.removeClass("om-menu-item-hover"),setTimeout(function(){b.children("ul").hide()},200)}).bind("mousedown.menuItem",function(b){var f=a(d).data(a(d).attr("id")+"_"+this.id);e.onSelect&&c._trigger("onSelect",b,f)})},_bindEvent:function(){var g,h,i,b=this,c=b.element,d=c.find("ul"),e=c.find("li"),f=a(document);for(h=0;h<e.length;h++)a(e[h]).hasClass("om-state-disabled")||b._bindLiEvent(e[h]);for(i=0;i<d.length;i++)a(d[i]).bind("mouseleave.menuContainer",function(){var b=a(this);"true"==b.parent().attr("aria-haspopup")&&b.hide()});this.globalEvent=[],f.bind("mousedown.omMenu",g=function(){b._hide()}),this.globalEvent.push(g),f.bind("keyup.omMenu",g=function(d){var e=d.keyCode,f=a.om.keyCode;switch(e){case f.DOWN:b._selectNext();break;case f.UP:b._selectPrev();break;case f.LEFT:b._hideRight();break;case f.RIGHT:b._showRight();break;case f.ENTER:"block"==c.css("display")&&b._backfill(c),b._hide();break;case f.ESCAPE:b._hide()}}),this.globalEvent.push(g),f.bind("keydown.omMenu",g=function(a){a.keyCode>=37&&a.keyCode<=40&&a.preventDefault()}),this.globalEvent.push(g)},_hide:function(){var b=this,c=b.element;c.find("ul").css("display","none"),c.find("li.om-menu-item-hover").each(function(b,c){a(c).removeClass("om-menu-item-hover")}),c.hide()},_findNext:function(a){for(var b,d,c=a;0!==(b=a.next("li")).length;){if(!b.hasClass("om-menu-sep-li")&&!b.hasClass("om-state-disabled"))return b;a=b}for(d=c.parent().find("li:first");0!==d.length&&d!=c;){if(!d.hasClass("om-menu-sep-li")&&!d.hasClass("om-state-disabled"))return d;d=d.next("li")}},_findPrev:function(a){for(var b,d,e,c=a;0!==(b=a.prev("li")).length;){if(!b.hasClass("om-menu-sep-li")&&!b.hasClass("om-state-disabled"))return b;a=b}for(d=c.parent().children(),e=d.eq(d.length-1);0!==e.length&&e!=c;){if(!e.hasClass("om-menu-sep-li")&&!e.hasClass("om-state-disabled"))return e;e=e.prev("li")}},_selectNext:function(){var c,a=this,b=a.element,d=b.find("li.om-menu-item-hover"),e=d.eq(d.length-1);if(0==d.length){for(c=b.find("li").eq(0);c.hasClass("om-state-disabled");)c=c.next("li");c.addClass("om-menu-item-hover")}else{if(c=a._findNext(e),c.length<=0)return;c.addClass("om-menu-item-hover"),e.removeClass("om-menu-item-hover")}this._hideChildren(e),this._showChildren(c)},_selectPrev:function(){var f,g,a=this,b=a.element,d=b.find("li.om-menu-item-hover"),e=d.eq(d.length-1),c=b.find("ul.om-menu > li");if(0==d.length){for(f=c.eq(c.length-1),g=1;f.hasClass("om-state-disabled");)f=c.eq(c.length-g++);(c=f).addClass("om-menu-item-hover")}else{if(c=a._findPrev(e),c.length<=0)return;c.addClass("om-menu-item-hover"),e.removeClass("om-menu-item-hover")}this._hideChildren(e),this._showChildren(c)},_hideRight:function(){var a=this,b=a.element,c=b.find("li.om-menu-item-hover"),d=c.eq(c.length-1);d.removeClass("om-menu-item-hover"),a._hideChildren(d)},_showRight:function(){var c,a=this,b=a.element,d=b.find("li.om-menu-item-hover"),e=d.eq(d.length-1);"true"==e.attr("aria-haspopup")&&(c=e.children("ul").find("li").eq(0),c.addClass("om-menu-item-hover")),a._showChildren(c)},_backfill:function(a){var b=a.find("li.om-menu-item-hover");b.eq(b.length-1).mousedown()}})}(jQuery),function(a){var c='<div class="om-messageBox om-widget om-widget-content om-corner-all" tabindex="-1"><div class="om-messageBox-titlebar om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageBox-title"></span><a href="#" class="om-messageBox-titlebar-close om-corner-tr"><span class="om-icon om-icon-closethick"></span></a></div><div class="om-messageBox-content om-widget-content"><table><tr vailgn="top"><td class="om-messageBox-imageTd"><div class="om-messageBox-image"/>&nbsp;</td><td class="om-message-content-html"></td></tr></table></div><div class="om-messageBox-buttonpane om-widget-content om-corner-bottom om-helper-clearfix"><div class="om-messageBox-buttonset"></div></div></div>',d=function(){if(a.browser.msie&&a.browser.version<7){var b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return c>b?a(window).height():b}return a(document).height()},e=function(){if(a.browser.msie){var b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return c>b?a(window).width():b}return a(document).width()},f=function(a,b,c,d){a.hasClass("om-messageBox-waiting")||(c?c(d):jQuery.noop(),a.remove(),b.remove())},g=function(b){var k,l,m,n,g=b.onClose,h=a(c).appendTo(document.body).css("z-index",1500).position({of:window,collision:"fit"}).omDraggable({containment:"document",cursor:"move",handle:".om-messageBox-titlebar"}).hide().keydown(function(b){b.keyCode&&b.keyCode===a.om.keyCode.ESCAPE&&(f(h,i,null,!1),b.preventDefault())}),i=a('<div class="om-widget-overlay"/>').appendTo(document.body).show().css({height:d(),width:e()}),j=h.find("span.om-messageBox-title").html(b.title).next().hover(function(){a(this).addClass("om-state-hover")},function(){a(this).removeClass("om-state-hover")}).focus(function(){a(this).addClass("om-state-focus")}).blur(function(){a(this).removeClass("om-state-focus")}).click(function(){return f(h,i,null,!1),!1}).bind("mousedown mouseup",function(){a(this).toggleClass("om-state-mousedown")});switch(h.find("div.om-messageBox-image").addClass("om-messageBox-image-"+b.type),k=b.content,"prompt"==b.type&&(k=k||"",k+='<br/><input id="om-messageBox-prompt-input" type="text"/>'),h.find("td.om-message-content-html").html(k),l=h.find("div.om-messageBox-buttonset"),b.type){case"confirm":l.html('<button id="confirm"></button><button id="cancel"></button>'),a.fn.omButton&&(l.find("button#confirm").omButton({width:60,onClick:function(){f(h,i,g,!0)}}),l.find("button#cancel").omButton({width:60,onClick:function(){f(h,i,g,!1)}}));break;case"prompt":l.html('<button id="confirm"></button><button id="cancel"></button>'),a.fn.omButton&&(l.find("button#confirm").omButton({width:60,onClick:function(){var c=g?g(a("#om-messageBox-prompt-input").val()):jQuery.noop();c!==!1&&(h.remove(),i.remove())}}),l.find("button#cancel").omButton({width:60,onClick:function(){f(h,i,g,!1)}}));break;case"waiting":h.addClass("om-messageBox-waiting"),i.addClass("om-messageBox-waiting"),j.hide(),l.parent().hide(),h.find(">.om-messageBox-content").addClass("no-button om-corner-bottom");break;default:l.html('<button id="confirm"></button>'),a.fn.omButton&&l.find("button#confirm").omButton({width:60,onClick:function(){f(h,i,g,!0)}})}m=a("button",l),m.width("100%"),h.show(),n=m.first()[0],n?n.focus():h.focus()};a.omMessageBox={alert:function(a){a=a||{},a.title=a.title||"",a.type=a.type||"alert",g(a)},confirm:function(a){a=a||{},a.title=a.title||"",a.type="confirm",g(a)},prompt:function(a){a=a||{},a.title=a.title||"",a.type="prompt",g(a)},waiting:function(b){return"close"===b?(a(".om-messageBox-waiting").remove(),void 0):(b=b||{},b.title=b.title||"",b.type="waiting",g(b),void 0)}}}(jQuery),function(a){a.omMessageTip={show:function(b){function c(b){g=setTimeout(function(){a.omMessageTip._close(f)},b)}var d,e,f,g;return b=a.extend({title:"",content:"&#160;",type:"alert"},b),d='<div class="om-messageTip om-widget om-corner-all" tabindex="-1"><div class="om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageTip-title">'+b.title+'</span><a href="#" class="om-messageTip-titlebar-close om-corner-tr"><span class="om-icon-closethick"></span></a></div><div class="om-messageTip-content om-widget-content om-corner-bottom"><div class="om-messageTip-image om-messageTip-image-'+b.type+'"></div><div class="om-messageTip-content-body">'+b.content+"</div></div></div>",e=a(d).appendTo(document.body).css("z-index",3e3).hide(),f={d:e,l:b.onClose},e.find("a.om-messageTip-titlebar-close").bind("mouseenter mouseleave",function(){a(this).toggleClass("om-state-hover")}).bind("focus blur",function(){a(this).toggleClass("om-state-focus")}).bind("mousedown mouseup",function(){a(this).toggleClass("om-state-mousedown")}).click(function(){return a.omMessageTip._close(f),!1}),e.slideDown("slow"),b.timeout&&c(b.timeout),e.bind("mouseover",function(){clearTimeout(g)}).bind("mouseout",function(){g&&c(b.timeout)}),e},_close:function(a){a.d.slideUp("slow"),a.l&&a.l(),setTimeout(function(){a.d.remove()},1e3)}}}(jQuery),function(a){var b=function(a,b,c){var e,d=a.indexOf(".");if(isNaN(a)&&"."!=a)for(;isNaN(a);)a=a.substring(0,a.length-1);return c.allowNegative||-1==a.indexOf("-")||(e=a.split("-"),a=e.join("")),!c.allowDecimals&&-1!=d||"."===a.charAt(a.length-1)?a.substring(0,d):(-1!=d&&(a=a.substring(0,d+c.decimalPrecision+1)),a.length>0?parseFloat(a):"")};a.omWidget("om.omNumberField",{options:{allowDecimals:!0,allowNegative:!0,decimalPrecision:2,disabled:!1,onBlur:function(){},readOnly:!1},_create:function(){var c=this.options,d=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled"),this.element.keypress(function(b){var c,d,e;null==b.which&&(null!=b.charCode||null!=b.keyCode)&&(b.which=null!=b.charCode?b.charCode:b.keyCode),c=b.which,8===c||46==c&&-1==b.button||0===c||(d=String.fromCharCode(c),a.data(this,"character",d),e=a.data(this,"allowed"),(-1===e.indexOf(d)||-1!==a(this).val().indexOf("-")&&"-"==d||-1!==a(this).val().indexOf(".")&&"."==d)&&b.preventDefault())}).focus(function(){a(this).addClass("om-state-focus")}).blur(function(e){a(this).removeClass("om-state-focus");var f=a.data(this,"character");this.value=b(this.value,f,c),d._trigger("onBlur",e,this.value)}).keydown(function(a){d._checkLast(this),229===a.which&&a.preventDefault()}).keyup(function(){d._checkLast(this)}).bind("cut paste",function(){return!1})},_init:function(){var b=this.element,c=this.options;"boolean"!=typeof c.disabled&&(c.disabled=b.attr("disabled")),c.readOnly&&b.attr("readonly","readonly"),a.data(b[0],"character"),this._buildAllowChars(),c.disabled?this.disable():this.enable()},_checkLast:function(b){var c=b.value,d=c.length;(c&&-1===a.data(b,"allowed").indexOf(c.charAt(d-1))||c.indexOf(".")!=c.lastIndexOf(".")||c.indexOf("-")!=c.lastIndexOf("-"))&&(b.value=c=c.substring(0,d-- -1))},_buildAllowChars:function(){var b="0123456789";this.options.allowDecimals&&(b+="."),this.options.allowNegative&&(b+="-"),this.options.readOnly&&(b=""),a.data(this.element[0],"allowed",b)},disable:function(){this.element.attr("disabled",!0).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",!1).removeClass("om-numberfield-disabled")}})}(jQuery),function(a){a.omWidget("om.omProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100},min:0,_create:function(){var b=this.element;b.addClass("om-progressbar om-widget om-widget-content om-corner-all"),this.textDiv=a("<div class='om-progressbar-text'></div>").appendTo(b),this.valueDiv=a("<div class='om-progressbar-value om-widget-header om-corner-left'></div>").appendTo(b)},_init:function(){var a=this.element.width();"number"==typeof this.options.width&&(a=this.options.width,this.element.width(a)),this.textDiv.width(Math.floor(a)),this.oldValue=this._value(),this._refreshValue()},value:function(a){return void 0===a?this._value():(this.options.value=a,this._refreshValue(),void 0)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this,b=a.value(),c=a.options.onChange,d=a._percentage(),e=a.options.text,f="";a.valueDiv.toggle(b>a.min).toggleClass("om-corner-right",b===a.options.max).width(d.toFixed(0)+"%"),"function"==typeof e?f=e.call(b,b):"string"==typeof e&&(f=e.replace("{value}",b)),a.textDiv.html(f),a.oldValue!==b&&(c&&a._trigger("onChange",null,b,a.oldValue),a.oldValue=b)}})}(jQuery),function(a){a.omWidget("om.omScrollbar",{options:{thick:8},_create:function(){var b=this.options;this._vScrollbar=a("<div class='om-widget om-scrollbar om-corner-all'></div>").width(b.thick).appendTo("body").hide(),this._vScrollbar.type="v",this._hScrollbar=a("<div class='om-widget om-scrollbar om-corner-all'></div>").height(b.thick).appendTo("body").hide(),this._hScrollbar.type="h"},_init:function(){this.element.css("overflow","hidden"),this._buildEvent()},destroy:function(){this._vScrollbar.remove(),this._hScrollbar.remove()},_buildEvent:function(){var e,b=this,c=this.element,d=[this._vScrollbar,this._hScrollbar];a(d).each(function(e,f){f._hover=!1,f._enable=!0;var g=f.type,h=0;f.omDraggable({axis:"v"===g?"y":"x",containment:c,onStart:function(){h="v"===g?c.scrollTop():c.scrollLeft()},onDrag:function(a){var e=a.position,i=a.originalPosition;"v"==g?c.scrollTop(h+b._getInt((e.top-i.top)*c.innerHeight()/f.outerHeight())):c.scrollLeft(h+b._getInt((e.left-i.left)*c.innerWidth()/f.outerWidth()))}}).hover(function(){a(d).each(function(a,b){b._hover=!0,clearTimeout(b._timer)}),a(this).addClass("scrollbar-state-hover")},function(){a(d).each(function(a,c){c._hover=!1,b._setTimer(c.type)}),a(this).removeClass("scrollbar-state-hover")})}),e=a.browser.mozilla?"DOMMouseScroll":"mousewheel",c.bind(e,function(a){b._mousewheelListener.call(b,a)}),a(d).each(function(a,c){c.bind(e,function(a){b._mousewheelListener.call(b,a)})}),c.hover(function(){a(d).each(function(a,c){c._hover=!0,clearTimeout(c._timer),b._resize(c),c._enable&&c.fadeIn("fast")})},function(){a(d).each(function(a,c){c._hover=!1,b._setTimer(c.type)})})},_mousewheelListener:function(a){var c,d,e,f,g,h,i,j,b=this;b._vScrollbar._enable&&(c=0,c=a.wheelDelta?-a.wheelDelta:40*a.detail,d=10*(c/120),e=b._vScrollbar,f=b.element,g=f.offset().top+b._getInt(f.css("border-top-width"))+b._getInt(f.css("padding-top"))+b._getInt(f.css("padding-top-width")),h=e.position().top-g,i=f.height(),j=i-e.outerHeight(),0>d+h?(e.css("top",g),f.scrollTop(0)):d+h>j?(e.css("top",g+j),f.scrollTop(f[0].scrollHeight-f.height())):(e.css("top","+="+d),f.scrollTop(f.scrollTop()+parseInt(d*f.innerHeight()/e.outerHeight()))),a.preventDefault())},_getScrollbar:function(a){return"h"===a?this._hScrollbar:this._vScrollbar},_setTimer:function(a){var b=this;clearTimeout(this._getScrollbar(a)._timer),function(a){setTimeout(function(){var c=b._getScrollbar(a);c._hover||c.fadeOut("fast")},200)}(a)},refresh:function(){var b=[this._vScrollbar,this._hScrollbar],c=this;a(b).each(function(a,b){c._resize(b)})},_resize:function(a){var b=this.element,c=a.type,d=0,e=b.offset(),f=b.width(),g=b.height(),h=b.outerWidth(),i=b.outerHeight(),j=this._getInt(b.css("border-left-width")),k=this._getInt(b.css("border-right-width")),l=this._getInt(b.css("border-top-width")),m=this._getInt(b.css("border-bottom-width")),n=this._getInt(b.css("padding-left")),o=this._getInt(b.css("padding-top"));"v"===c?(d=b[0].scrollHeight,d>g?(a._enable=!0,a.outerHeight(this._getInt(g*b.innerHeight()/d)),a.css({left:e.left+h-a.outerWidth()-k,top:e.top+l+o+this._getInt(b.scrollTop()*g/d)})):a._enable=!1):"h"===c&&(d=b[0].scrollWidth,d>b.innerWidth()?(a._enable=!0,a.outerWidth(this._getInt((n+f)*f/d)),a.css({left:e.left+j+n+this._getInt(b.scrollLeft()*f/d),top:e.top+i-a.outerHeight()-m})):a._enable=!1),a._enable?a.fadeIn("fast"):a.fadeOut("fast")},_getInt:function(a){return parseInt(a)||0}})}(jQuery),function(a){a.omWidget("om.omSlider",{options:{autoPlay:!0,interval:5e3,directionNav:!1,pauseOnHover:!0,controlNav:!0,activeNavCls:"nav-selected",effect:"fade",animSpeed:400,startSlide:0,delay:200,onBeforeSlide:function(){},onAfterSlide:function(){}},slideTo:function(a){opts=this.element.data("omSlider:opts"),this._slideTo(this.element,a)},next:function(){opts=this.element.data("omSlider:opts"),this._next(this.element)},prev:function(){opts=this.element.data("omSlider:opts"),this._prev(this.element)},destroy:function(){var b=this.element,c=this.options,d=this._getSliderVars(b);clearTimeout(d.slideTimer),clearInterval(d.autoPlayTimer),d.customNav&&a(c.controlNav).children().unbind(".omSlider").removeData("sid").removeClass(c.activeNavCls)},_getSliderVars:function(a){return a.data("omSlider:vars")},_runSlideEffect:function(b,c,d){var m,n,e=this,f=this._getSliderVars(b),g=b.find("ul.om-slider-content:first"),h=g.children(),i=this.options,j=0,k=0,l=d?d:i.effect;return"random"==i.effect&&g.addClass("om-slider-effect-"+l),g.stop(),"slide-v"!=l&&"slide-h"!=l?!1:(m="slide-v"==l,"random"==i.effect&&(n=0,h.each(function(b){return b===f.currentSlide?!1:(n-=m?a(this).height():a(this).width(),void 0)}),g.css(m?"top":"left",n)),h.each(function(b){return b==c?!1:(m?j-=a(this).height():k-=a(this).width(),void 0)}),f.running=!0,g.animate({top:j,left:k},i.animSpeed,function(){f.running=!1,e._trigger("onAfterSlide",null,c)}),void 0)},_runFadeEffect:function(b,c){var d=this,e=this._getSliderVars(b),f=b.find("ul.om-slider-content:first").children(),g=this.options;f.each(function(b){var f=a(this);b==c?(e.running=!0,f.fadeIn(g.animSpeed,function(){e.running=!1,d._trigger("onAfterSlide",null,c)})):b==e.currentSlide&&f.fadeOut(g.animSpeed)})},_runNoEffect:function(b,c){var d=this,e=this._getSliderVars(b),g=(this.options,b.find("ul.om-slider-content:first").children());g.each(function(b){var f=a(this);b==c?(f.show(),d._trigger("onAfterSlide",null,c)):b==e.currentSlide&&f.hide()})},_toggleControlNav:function(b,c){var g,d=this._getSliderVars(b),e=this.options,f=b;d.customNav&&(f=a("body")),g=f.find(d.controlNav).children(),g.each(function(b){a(this).toggleClass(e.activeNavCls,b==c)})},_slideTo:function(a,b){var g,h,c=this._getSliderVars(a),d=a.find("ul.om-slider-content:first"),e=this.options,f=this;if(!(isNaN(b)||0>b||b>=c.totalSlides))return this._trigger("onBeforeSlide",null,b)===!1?!1:("random"==e.effect?(g=["fade","slide-h","slide-v"],h=g[Math.floor(3*Math.random())],d.removeClass().addClass("om-slider-content"),d.removeAttr("style"),d.find("li").removeAttr("style"),"slide-h"==h||"slide-v"==h?f._runSlideEffect(a,b,h):f._runFadeEffect(a,b)):"slide-h"==e.effect||"slide-v"==e.effect?f._runSlideEffect(a,b):"fade"==e.effect||e.effect===!0?f._runFadeEffect(a,b):f._runNoEffect(a,b),c.controlNav&&f._toggleControlNav(a,b),c.currentSlide=b,a)},_next:function(a){var b=this._getSliderVars(a),c=0;return b.currentSlide+2<=b.totalSlides&&(c=b.currentSlide+1),this._slideTo(a,c)},_prev:function(a){var b=this._getSliderVars(a),c=b.totalSlides-1;return 0!=b.currentSlide&&(c=b.currentSlide-1),this._slideTo(a,c)},_processDirectionNav:function(b){var c=this._getSliderVars(b),d=a('<div class="om-slider-directionNav">').appendTo(b),e=this;a('<a class="om-slider-prevNav"></a>').appendTo(d).click(function(){return c.running?!1:(e._prev(b),void 0)}),a('<a class="om-slider-nextNav"></a>').appendTo(d).click(function(){return c.running?!1:(e._next(b),void 0)}),b.hover(function(){d.show()},function(){d.hide()})},_processControlNav:function(b){var f,g,h,i,c=this._getSliderVars(b),d=this.options,e=this;if(d.controlNav===!0||"classical"===d.controlNav){for(g=a('<ul class="om-slider-nav-classical"></ul>'),c.controlNav=".om-slider-nav-classical",f=0;f<c.totalSlides;f++)h=a("<li>"+(f+1)+"</li>"),h.data("sid",f),i=0,h.click(function(){e._slideTo(b,a(this).data("sid"))}),h.hover(function(){if(c.running||c.stop)return!1;var f=a(this);return f.hasClass(d.activeNavCls)?!1:(c.slideTimer=i=setTimeout(function(){e._slideTo(b,f.data("sid"))},d.delay),void 0)},function(){clearTimeout(i)}),g.append(h);b.append(g)}else if("dot"===d.controlNav){for(g=a('<div class="om-slider-nav-dot"></div>'),c.controlNav=".om-slider-nav-dot",f=0;f<c.totalSlides;f++)h=a('<a href="javascript:void(0)">'+(f+1)+"</a>"),h.data("sid",f),i=0,h.click(function(){e._slideTo(b,a(this).data("sid"))}),h.hover(function(){if(c.running||c.stop)return!1;var f=a(this);return f.hasClass(d.activeNavCls)?!1:(c.slideTimer=i=setTimeout(function(){e._slideTo(b,f.data("sid"))},d.delay),void 0)},function(){clearTimeout(i)}),g.append(h);g.appendTo(b).css({marginLeft:-1*g.width()/2})}else a(d.controlNav).length>0&&(c.controlNav=d.controlNav,c.customNav=!0,g=a(d.controlNav),g.children().each(function(f){var h,g=a(this);g.data("sid",f),h=0,g.bind("click.omSlider",function(){e._slideTo(b,a(this).data("sid"))}),g.bind("mouseover.omSlider",function(){if(c.running||c.stop)return!1;var f=a(this);return f.hasClass(d.activeNavCls)?!1:(c.slideTimer=h=setTimeout(function(){e._slideTo(b,f.data("sid"))},d.delay),void 0)}).bind("mouseout.omSlider",function(){clearTimeout(h)})}))},_create:function(){function b(b,d){if(!(isNaN(d)||0>d||d>=g.totalSlides)){var h=b.find("ul.om-slider-content:first"),i=h.children(),j=0,k=0;"slide-h"==f.effect?(i.each(function(b){return b==d?!1:(k-=a(this).width(),void 0)}),setTimeout(function(){h.css({left:k,top:j})},0)):"slide-v"==f.effect?(i.each(function(b){return b==d?!1:(j-=a(this).height(),void 0)}),setTimeout(function(){h.css({left:k,top:j})},0)):h.children().eq(d).show(),g.controlNav&&e._toggleControlNav(b,d),f.autoPlay&&(g.autoPlayTimer=c=setInterval(function(){e._next(b)},f.interval)),f.pauseOnHover&&b.hover(function(){g.paused=!0,clearInterval(c)},function(){g.paused=!1,f.autoPlay&&(g.autoPlayTimer=c=setInterval(function(){e._next(b)},f.interval))}),f.directionNav&&e._processDirectionNav(b)}}var h,c=0,d=this.element,e=this,f=this.options,g={currentSlide:0,totalSlides:0,running:!1,paused:!1,stop:!1,controlNav:".om-slider-nav-classical"};d.data("omSlider",d).data("omSlider:vars",g).data("omSlider:opts",f).addClass("om-slider"),f.startSlide>0&&(g.currentSlide=f.startSlide),h=d.children(),h.wrapAll('<ul class="om-slider-content"></ul>').wrap('<li class="om-slider-item"></li>'),("slide-v"==f.effect||"slide-h"==f.effect)&&d.find(".om-slider-content").addClass("om-slider-effect-"+f.effect),g.totalSlides=h.length,this._processControlNav(d),f.startSlide>0&&("slide-h"==f.effect||"slide-v"==f.effect)?a(window).load(function(){b(d,f.startSlide)}):b(d,f.startSlide)}})}(jQuery),function(a){var b="om-suggestion-list-row",c="om-state-hover";a.omWidget("om.omSuggestion",{options:{disabled:!1,readOnly:!1,minChars:1,delay:500,cacheSize:10,method:"GET",listMaxHeight:300,queryName:"key",crossDomain:!1,preProcess:function(a,b){return b},onBeforeSuggest:function(){},onSuggesting:function(){},onSuccess:function(){},onError:function(){},onSelect:function(){}},_create:function(){this.element.addClass("om-suggestion om-widget om-state-default om-state-nobg"),this.dropList=a('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children().first().hide()},_init:function(){var c=this,d=this.options,e=this.element.attr("autocomplete","off"),f=this.dropList;d.minChars<0&&(d.minChars=0),d.cacheSize<0&&(d.cacheSize=0),d.delay<0&&(d.delay=0),d.disabled?this.disable():this.enable(),d.readOnly?e.attr("readonly","readonly"):e.removeAttr("readonly"),e.focus(function(){a(this).addClass("om-state-focus")}).blur(function(){a(this).removeClass("om-state-focus")}).keydown(function(b){b.keyCode==a.om.keyCode.TAB&&f.hide()}).keyup(function(g){var j,h=g.keyCode,i=a.om.keyCode;switch(h){case i.DOWN:"none"!==f.css("display")?c._selectNext():f.find("."+b).size()>0&&f.show();break;case i.UP:"none"!==f.css("display")?c._selectPrev():f.find("."+b).size()>0&&f.show();break;case i.ENTER:if("none"===f.css("display"))return;return f.hide(),c._triggerOnSelect(g),!1;case i.ESCAPE:f.hide();break;case i.TAB:break;default:if(d.disabled||d.readOnly)return!1;d.delay>0?(j=a.data(e,"delayTimer"),j&&clearTimeout(j),j=setTimeout(function(){c._suggest()},d.delay),a.data(e,"delayTimer",j)):c._suggest()}}).mousedown(function(a){a.stopPropagation()}),f.mousedown(function(a){a.stopPropagation()}),a(document).bind("mousedown.omSuggestion",this.globalEvent=function(){f.hide()})},clearCache:function(){a.removeData(this.element,"cache")},showMessage:function(b){var e,f,c=this.element,d=this.dropList.empty().css("height","auto");return a("<div>"+b+"<div>").appendTo(d),d.parent().css("left",c.offset().left).css("top",c.offset().top+c.outerHeight()),e=this.options.listWidth,e?"auto"!==e&&d.parent().width(e):d.parent().width(c.outerWidth()),d.show(),f=this.options.listMaxHeight,"auto"!==f&&d.height()>f&&d.height(f).css("overflow","auto"),this},disable:function(){return this.options.disabled=!0,this.element.attr("disabled","disabled").addClass("om-state-disabled")},enable:function(){return this.options.disabled=!1,this.element.removeAttr("disabled").removeClass("om-state-disabled")},setData:function(a){var b=this.options;a&&(b.dataSource=a),b.cacheSize>0&&this.clearCache()},getData:function(){var b=a.data(this.element,"records");return b||null},getDropList:function(){return this.dropList},destroy:function(){a(document).unbind("mousedown.omSuggestion",this.globalEvent),this.dropList.parent().remove()},_clear:function(){return this.element.val(""),this.dropList.find("."+b).removeClass(c)},_selectNext:function(){var a=this.dropList,b=a.find("."+c).index(),d=this._clear();b+=1,b>=d.size()&&(b=0),this._scrollToAndSelect(d,b,a)},_selectPrev:function(){var a=this.dropList,b=a.find("."+c).index(),d=this._clear();b-=1,0>b&&(b=d.size()-1),this._scrollToAndSelect(d,b,a)},_scrollToAndSelect:function(b,d,e){var f,g,h;b.size()<1||(f=a(b.get(d)).addClass(c),g=f.position().top,0>=g?e.scrollTop(e.scrollTop()+g):(h=g+f.outerHeight()-e.height(),h>0&&e.scrollTop(e.scrollTop()+h)),this._select(d))},_select:function(b){var e,f,c=this.element,d=a.data(c,"records");d.valueField?(e=d.data[b],f=e[d.valueField]):(e=d[b],f=e),c.val(f),a.data(c,"lastStr",f)},_suggest:function(){var e,f,g,h,i,j,b=this.element,c=b.val(),d=a.data(b,"lastStr");if(!d||d!==c)if(a.data(b,"lastStr",c),e=this.options,f=a.data(b,"cache"),c.length>0&&c.length>=e.minChars){if(f&&(g=f[c]))return a.data(b,"records",g),this._buildDropList(g,c),void 0;if(e.onBeforeSuggest&&this._trigger("onBeforeSuggest",null,c)===!1)return this.dropList.empty().hide(),void 0;h=this,i={url:e.dataSource,type:e.method,dataType:e.crossDomain?"jsonp":"json",data:{},success:function(d,f){var i,j,k,l,g=e.onSuccess;g&&h._trigger("onSuccess",null,d,f)===!1||(i=e.preProcess,i&&(d=i(c,d)),"undefined"==typeof d&&(d=[]),e.cacheSize>0&&(j=a.data(b,"cache")||{___keys:[]},k=j.___keys,k.length==e.cacheSize&&(l=k[0],j.___keys=k.slice(1),j[l]=void 0),j[c]=d,j.___keys.push(c),a.data(b,"cache",j)),a.data(b,"records",d),h._buildDropList(d,c))},error:function(a,b,c){var d=e.onError;d&&h._trigger("onError",null,a,b,c)}},i.data[e.queryName]=c,a.ajax(i),j=e.onSuggesting,j&&h._trigger("onSuggesting",null,c)}else this.dropList.empty().hide()},_buildDropList:function(d){var k,l,m,f=this.element,g=this.dropList.empty().css("height","auto"),h=d.valueField?!1:!0,i=this.options.clientFormatter,j=this;h?i?a(d).each(function(a){j._addRow(i(this,a),g)}):a(d).each(function(){j._addRow(this,g)}):i&&a(d.data).each(function(a){j._addRow(i(this,a),g)}),k=g.find("."+b),k.size()>0&&(g.parent().css("left",parseInt(f.offset().left)).css("top",f.offset().top+f.outerHeight()),l=this.options.listWidth,l?"auto"!==l&&g.parent().width(l):g.parent().width(f.outerWidth()),k.mouseover(function(){k.removeClass(c),a(this).addClass(c)}).mousedown(function(a){var b=g.find("."+c).index();j._select(b),g.hide(),j._triggerOnSelect(a)}),g.show(),m=this.options.listMaxHeight,"auto"!==m&&g.height()>m&&g.height(m).css("overflow","auto"),g.scrollTop(0))},_addRow:function(c,d){a('<div class="'+b+'">'+c+"</div>").appendTo(d)},_triggerOnSelect:function(b){var e,g,h,f,d=this.options.onSelect;if(d){if(e=this.dropList.find("."+c).index(),0>e)return;f=a.data(this.element,"records"),f.valueField?(g=f.data[e],h=g[f.valueField]):(g=f[e],h=g),this._trigger("onSelect",b,g,h,e)}}})}(jQuery),function(){function a(a,b){return b.content&&$(a).html(b.content),$(a).omPanel(b)}function b(){return $.browser.msie&&7==parseInt($.browser.version)}var c="om-tabs-"+(0|65536*(1+Math.random())).toString(16).substring(1)+"-",d=0,e="om-tabs-activated om-state-active",f="om-tabs-scroll-disabled";$.omWidget("om.omTabs",{options:{width:"auto",height:"auto",border:!0,tabWidth:"auto",tabHeight:27,scrollable:!0,closable:!1,position:"top",switchMode:"click",autoPlay:!1,interval:1e3,active:0,lazyLoad:!1,tabMenu:!1,onBeforeActivate:function(){},onActivate:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeCloseAll:function(){},onCloseAll:function(){},onAdd:function(){},onBeforeAdd:function(){},onLoadComplete:function(){}},add:function(a){this._add(a)
},close:function(a){this._close(a)},closeAll:function(){this._closeAll()},activate:function(a){this._activate(a)},getAlter:function(a){return this._getAlter(a)},getActivated:function(){return this._getActivated()},getLength:function(){return this._getLength()},setDataSource:function(a){void 0!==a.index&&(a.url||a.content)&&this._setDataSource(a)},reload:function(a,b,c){this._reload(a,b,c)},doLayout:function(){this._doLayout()},_create:function(){this._makeSketch(),this._collectItems(),this.history=[]},_init:function(){this._render(),this._afterRender(),this._buildEvent()},_makeSketch:function(){this.element.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom" />').find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all" />'),this.$menu=$("<div></div>").appendTo($("body"))},_collectItems:function(){var b=this,e=this.element,f=this.options,g=[],h=[];e.find(">div.om-tabs-headers a").each(function(){var k,l,m,n,o,p,i=this.getAttribute("href",2),j=i.split("#")[0];j&&(j===location.toString().split("#")[0]||(k=$("base")[0])&&j===k.href)&&(i=this.hash,this.href=i),l=$(this),m=l.attr("tabId")||l.attr("id")||c+d++,l.attr("tabId",m),n={tabId:m,title:l.text(),_closeMode:"visibility",header:!1,closed:!0,onSuccess:function(){b._trigger("onLoadComplete",null,n.tabId)},onError:function(){b._trigger("onLoadComplete",null,n.tabId)}},o=$(">"+i,e)[0],!o&&0!=i.indexOf("#")&&(f.lazyLoad===!1?n.url=i:h.push({tabId:m,url:i,loaded:!1})),p=new a(o||$("<div></div>")[0],n),g.push(p)}),$lis=e.find(">div.om-tabs-headers ul li"),$('<span class="left-placeholder"></span>').insertBefore($lis.eq(0)),$('<span class="right-placeholder"></span>').insertAfter($lis.eq($lis.length-1)),h.length>0&&(this.loadInfo=h),this.items=g},_render:function(){var f,g,a=this,b=this.element,c=this.options,d=this.items,e=b.find(">div.om-tabs-headers");"number"==typeof c.active&&(c.active<0&&(c.active=0),c.active>d.length-1&&(c.active=d.length-1)),c.border!==!1&&b.children(":first").addClass("header-no-border"),"fit"==c.width?b.outerWidth(b.parent().width()):"auto"!=c.width&&(b.css("width",c.width),f=isNaN(c.width)&&-1!=c.width.indexOf("%"),b.children(":first").outerWidth(f?"100%":c.width)),"fit"==c.height?b.outerHeight(b.parent().height()):"auto"!=c.height&&b.css("height",c.height),c.closable&&c.tabMenu&&$.fn.omMenu&&(g=b.attr("id"),this.menu=this.$menu.omMenu({contextMenu:!0,dataSource:[{id:g+"_001",label:""},{id:g+"_002",label:""},{id:g+"_003",label:""}],onSelect:function(b){b.id==g+"_001"?a.close(a.getAlter($(a.$currentLi).find("a.om-tabs-inner").attr("tabid"))):b.id==g+"_002"?e.find("ul li").each(function(b,c){var d=$(a.$currentLi).find("a.om-tabs-inner").attr("tabid"),e=$(c).find("a.om-tabs-inner").attr("tabid");d!==e&&a.close(a.getAlter(e))}):b.id==g+"_003"&&a.closeAll()}})),this._renderHeader(),this._renderBody()},_renderHeader:function(){var f,a=this.element,c=this.options,d=this.history;$headers=a.find(">div.om-tabs-headers"),$lis=$headers.find("ul li"),$lis.addClass("om-state-default om-corner-top"),$lis.each(function(a){var f=$(this).find("a:first");b()&&f.attr("hideFocus","true"),f.addClass("om-tabs-inner"),a===c.active||c.active===f.attr("tabId")?($(this).addClass(e),c.activeTabId=f.attr("tabId"),c.active=a,$.inArray(c.activeTabId,d)||d.push(c.activeTabId)):$(this).removeClass(e),f.css({width:c.tabWidth,height:c.tabHeight}),$('<span class="lileft"></span>').insertBefore(f),c.closable===!0||$.isArray(c.closable)&&-1!==$.inArray(a,c.closable)?(f.next(".om-icon-close").length<=0&&$('<a class="om-icon om-icon-close"></a>').insertAfter(f),$('<span class="liright"></span>').insertAfter(f.next(".om-icon-close"))):(f.next().remove(),$('<span class="liright"></span>').insertAfter(f))}),f=$lis.find("a.om-tabs-inner").height(),$lis.parent().css({height:++f,"line-height":f+"px"}),$headers.height(f),this._checkScroller()&&this._enableScroller()},_renderBody:function(){var e,f,g,a=this.element,b=this.options,c=this.items,d=a.find(">div.om-tabs-panels");for(d.children().detach(),"auto"!==b.height&&(e=a.innerHeight(),f=a.find(">div.om-tabs-headers").outerHeight(),d.css("height",e-f)),a.toggleClass("om-tabs-noborder",!b.border),g=c.length;g--;)c[g].addClass("om-state-nobd").parent().prependTo(d)},_afterRender:function(){var e,f,g,a=this.element,b=this.options,c=this.items,d=c.length;for(a.children().each(function(){$(this).is(".om-tabs-headers,.om-tabs-panels")||$(this).remove()}),b.lazyLoad?(e=$(c[b.active]),f=e.omPanel("option","tabId"),g=this._getUnloadedUrl(f),e.omPanel("open"),e.omPanel("reload",g),this._removeLoadInfo(f)):$(c).omPanel("reload");d--;)e=$(c[d]),d==b.active?e.omPanel("open"):e.omPanel("close");a.css("height",a.height()),a.css("height",b.height)},_buildEvent:function(){var e,f,g,h,a=this,b=this.element,c=this.options,d=b.find(">div.om-tabs-headers a.om-icon-close");d.unbind("click.omtabs").bind("click.omtabs",function(b){var c=$(b.target).prev().attr("tabId");return a._close(c),!1}),e=b.find(">div.om-tabs-headers a.om-tabs-inner"),-1!=c.switchMode.indexOf("mouseover")?e.bind("mouseover.omtabs",function(){var c=$(this).attr("tabId"),d=$.data(b,"activateTimer");"undefined"!=typeof d&&clearTimeout(d),d=setTimeout(function(){return a._activate(c),!1},100),$.data(b,"activateTimer",d)}):-1!=c.switchMode.indexOf("click")&&e.bind("click.omtabs",function(){a._activate($(this).attr("tabId"))}),e.bind("click.omtabs",function(){return!1}),0!=c.autoPlay?c.autoInterId=setInterval(function(){b.omTabs("activate","next")},c.interval):clearInterval(c.autoInterId),-1==c.switchMode.indexOf("mouseover")&&(f=b.find(">div.om-tabs-headers li"),g=function(a,b){b.is(":not(.om-state-disabled)")&&b.addClass("om-state-"+a)},h=function(a,b){b.removeClass("om-state-"+a)},f.bind("mouseover.omtabs",function(){g("hover",$(this))}),f.bind("mouseout.omtabs",function(){h("hover",$(this))}),c.closable&&c.tabMenu&&f.each(function(b,c){$(c).bind("contextmenu",function(b){$.fn.omMenu&&(a.$currentLi=this,$(a.menu).omMenu("show",b))})})),b.find(">div.om-tabs-headers >span").bind("click.omtabs",function(){if($(this).hasClass("om-tabs-scroll-disabled"))return!1;var c=$(this).parent().find("ul").children("li:last").outerWidth(!0);return $(this).hasClass("om-tabs-scroll-left")&&a._scroll(c,a._scrollCbFn()),$(this).hasClass("om-tabs-scroll-right")&&a._scroll(-c,a._scrollCbFn()),!1})},_purgeEvent:function(){var a=this.element,b=this.options,c=a.find(">div.om-tabs-headers");c.children().unbind(".omtabs"),c.find(">ul >li >a").unbind(".omtabs"),b.autoInterId&&clearInterval(b.autoInterId)},_activate:function(a){var f,h,i,j,k,l,m,n,o,p,q,r,s,b=this.element,c=this.options,d=this.items,g=b.find(">div.om-tabs-headers ul");if(c.activeTabId===a||c.active===a)return!1;if(a=a||0,i=a,"next"==a?a=(c.active+1)%d.length:"prev"==a&&(a=(c.active-1)%d.length),"number"==typeof a?i=this._getAlter(a):"string"==typeof a&&(a=this._getAlter(a)),c.onBeforeActivate&&this._trigger("onBeforeActivate",null,a)===!1)return!1;for(h=g.find("li a[tabId="+i+"]"),h.parent().addClass(e).siblings().removeClass(e),c.activeTabId=i,c.active=a,j=d.length,j=d.length;j--;j>=0)k=d[j],k.omPanel("option","tabId")==i&&(k.omPanel("open"),(f=this._getUnloadedUrl(i))&&(k.omPanel("reload",f),this._removeLoadInfo(i)));for(j=d.length;j--;j>=0)k=d[j],k.omPanel("option","tabId")!=i&&k.omPanel("close");this._checkScroller()&&(g.stop(!0,!0),b.clearQueue(),l=g.prev(),m=g.next(),n=h.parent().offset().left,o=n+h.parent().outerWidth(!0),p=l.offset().left+l.outerWidth(!0)+4-n,q=m.offset().left-o,p>=0?this._scroll(p,this._scrollCbFn()):0>=q?this._scroll(q,this._scrollCbFn()):this._scrollCbFn()()),r=this.history,s=$.inArray(i,r),-1===s?r.push(i):r.push(r.splice(s,1)[0]),c.onActivate&&this._trigger("onActivate",null,a)},_getUnloadedUrl:function(a){var c,b=this.loadInfo;for(c in b)if(b[c].tabId===a&&b[c].loaded===!1)return b[c].url;return null},_removeLoadInfo:function(a){var c,d,b=this.loadInfo;if(b)for(c=b.length;d=b[--c];)if(d.tabId===a){b.splice(c,1);break}},_addLoadInfo:function(a,b){this.loadInfo.push({tabId:a,loaded:!1,url:b})},_getAlter:function(a){var c,b=this.element;return"number"==typeof a?c=b.find(">div.om-tabs-headers li:eq("+a+") a.om-tabs-inner").attr("tabId"):"string"==typeof a&&b.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(b){return $(this).attr("tabId")==a?(c=b,!1):void 0}),void 0===c?null:c},_getActivated:function(){return this.options.activeTabId},_add:function(e){var l,m,n,o,f=this,g=this.element,h=this.options,i=this.items,j=g.find(">div.om-tabs-headers ul"),k=e.tabId?e.tabId:c+d++;return e.index=e.index||"last",("last"==e.index||e.index>i.length-1)&&(e.index=i.length),e.title=e.title||"New Title "+k,e.url=$.trim(e.url),e.content=$.trim(e.content),e.url?e.content=void 0:(e.url=void 0,e.content=e.content||"New Content "+k),h.onBeforeAdd&&0==f._trigger("onBeforeAdd",null,e)?!1:(l=$('<li class="om-state-default om-corner-top"> </li>'),m=$('<a class="om-tabs-inner"></a>').html(e.title).attr({href:"#"+k,tabId:k}).css({width:h.tabWidth,height:h.tabHeight}).appendTo(l),$('<span class="lileft"></span>').insertBefore(m),b()&&m.attr("hideFocus","true"),e.closable===!0||void 0==e.closable&&h.closable?(m.after('<a class="om-icon om-icon-close"></a>'),$('<span class="liright"></span>').insertAfter(m.next(".om-icon-close"))):$('<span class="liright"></span>').insertAfter(m),n={tabId:k,title:m.text(),_closeMode:"visibility",header:!1,closed:!0,onSuccess:function(){f._trigger("onLoadComplete",null,k)},onError:function(){f._trigger("onLoadComplete",null,k)}},$.extend(n,e),e.url&&(h.lazyLoad||e.lazyLoad)&&(f.loadInfo.push({tabId:k,url:e.url,loaded:!1}),n.url=null),o=new a($("<div>"+(e.content||"")+"</div>")[0],n),e.index==i.length?(i[e.index]=o,l.insertBefore(j.find("span.right-placeholder"))):(i.splice(e.index,0,o),j.children().eq(e.index).before(l)),j.innerWidth()-l.position().left<500&&j.width(j.width()+500),this._checkScroller()&&this._enableScroller(),i[e.index].addClass("om-state-nobd").parent().insertAfter(e.index>0?g.find(">div.om-tabs-panels").children().eq(e.index-1):0),this._purgeEvent(),this._buildEvent(),this._trigger("onAdd",null,n),e.activateNew!==!1&&this._activate(e.index),void 0)},_close:function(a){var j,b=this.element,c=this.options,d=this.items,e=b.find(">div.om-tabs-headers"),f=b.find(">div.om-tabs-panels"),g=b.height(),h=a,i=this.history;if(a=void 0===a?c.active:a,"string"==typeof a?a=this._getAlter(a):h=this._getAlter(a),c.onBeforeClose&&0==this._trigger("onBeforeClose",null,a))return!1;for(this._removeLoadInfo(this._getAlter(a)),e.find("li").eq(a).remove(),f.children().find(">.om-panel-body").eq(a).empty().remove(),d.splice(a,1),0==f.children().length&&f.css({height:g-e.outerHeight()}),j=i.length-1;j>=0;j--)if(h===i[j]){i.splice(j,1);break}return c.onClose&&this._trigger("onClose",null,a),0==d.length?(c.active=-1,c.activeTabId=null,void 0):(a==c.active?(c.active=-1,this._activate(i.length>0?i.pop():0)):(a<c.active&&c.active--,this._checkScroller()&&this._enableScroller()),void 0)},_closeAll:function(){var g,h,a=this.element,b=this.options,c=this.items,d=a.find(">div.om-tabs-headers"),e=a.find(">div.om-tabs-panels"),f=a.height();if(b.onBeforeCloseAll&&this._trigger("onBeforeCloseAll")===!1)return!1;for(g=0,h=c.length;h>g;g++)this._removeLoadInfo(c[g].omPanel("option","tabId"));d.find("li").remove(),e.empty(),c.splice(0,c.length),e.css({height:f-d.outerHeight()}),b.active=-1,b.activeTabId=null,this.history=[],b.onCloseAll&&this._trigger("onCloseAll")},_checkScroller:function(){var c,d,e,a=this.element,b=this.options;return b.scrollable?(c=a.find(">div.om-tabs-headers ul"),d=4,c.children().each(function(){d+=$(this).outerWidth(!0)}),d>c.parent().innerWidth()?(c.hasClass("om-tabs-scrollable")||(e=$("<span></span>").insertBefore(c).addClass("om-tabs-scroll-left"),$("<span></span>").insertAfter(c).addClass("om-tabs-scroll-right"),(c.height()-e.height())/2,c.addClass("om-tabs-scrollable")),!0):(c.removeClass("om-tabs-scrollable").siblings().remove(),!1)):!1},_scrollCbFn:function(){var a=this;return function(){a._enableScroller()}},_enableScroller:function(){var a=this.element.find(">div.om-tabs-headers"),b=a.children("ul"),c=b.prev(),d=b.next(),e=b.children(":last"),g=a.offset().left,h=d.offset().left,i=b.offset().left,j=e.offset().left+e.outerWidth(!0);c.toggleClass(f+" om-tabs-scroll-disabled-left",i>=g),d.toggleClass(f+" om-tabs-scroll-disabled-right",h>=j)},_scroll:function(a,b){var d,e,c=this;$self=this.element,$ul=$self.find(">div.om-tabs-headers ul"),$li=$ul.children(":last"),0!=a&&(d=a>0?$ul.prev().offset():$ul.next().offset(),e=function(e){return a>0&&$ul.prev().hasClass(f)||0>a&&$ul.next().hasClass(f)?($ul.stop(!0,!0),$self.clearQueue(),void 0):(a=a>0?"+="+Math.min(d.left-$ul.offset().left,a):"-="+Math.min($li.offset().left+$li.outerWidth(!0)-d.left,Math.abs(a)),c.isScrolling=!0,$ul.animate({left:a+"px"},"normal","swing",function(){!!b&&b(),c.isScrolling=!1,e()}),void 0)},$self.queue(e),1==$self.queue().length&&!c.isScrolling&&$self.dequeue())},_getLength:function(){return this.items.length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},_setDataSource:function(a){var c=(this.element,this.items),d=this.options,e=this._getAlter(a.index);a.url=$.trim(a.url),a.content=$.trim(a.content),a.url?d.lazyLoad!==!1?(this._addLoadInfo(e,a.url),c[a.index].omPanel("option","url",a.url)):(this._removeLoadInfo(e),c[a.index].omPanel("reload",a.url)):c[a.index].html(a.content)},_reload:function(a,b,c){var e=(this.element,this.items),f=this._getAlter(a);b?(this._removeLoadInfo(f),e[a].omPanel("reload",b)):c?e[a].html(c):(e[a].omPanel("reload",this._getUnloadedUrl(f)),this._removeLoadInfo(f))}})}(jQuery),function(a){a.omWidget("om.omTooltip",{options:{width:"auto",minWidth:null,maxWidth:null,height:"auto",maxHeight:null,minHeight:null,delay:300,anchor:!1,trackMouse:!1,showOn:"mouseover",lazyLoad:!1,url:null,offset:[5,5],anchorOffset:0,region:null,html:null,contentEL:null},_create:function(){this.tipContent=a('<div class="tip-body"></div>'),this.tipAnchor=a('<div class="tip-anchor"></div>'),this.regionMap={right:"left",top:"bottom",left:"right",bottom:"top"},this.tip=a('<div class="tip"></div>').append(this.tipContent)},_init:function(){var d,b=this,c=b.options;this.tipContent.empty(),this.tip.find("div.tip-anchor").remove(),c.anchor&&b.tip.append(b.tipAnchor),b.adjustWidth=6,b.adjustHeight=6,"auto"!=c.width?this.tip.css("width",c.width-b.adjustWidth):this.tip.css("width","auto"),"auto"!=c.height?this.tip.css("height",c.height-b.adjustHeight):this.tip.css("height","auto"),c.minWidth&&this.tip.css("minWidth",c.minWidth-b.adjustWidth),c.maxWidth&&this.tip.css("maxWidth",c.maxWidth-b.adjustWidth),c.maxHeight&&this.tip.css("maxHeight",c.maxHeight-b.adjustHeight),c.minHeight&&this.tip.css("minHeight",c.minHeight-b.adjustHeight),c.url&&!c.lazyLoad?b._ajaxLoad(c.url):c.html?this.tip.find(".tip-body").append(c.html):(d=a(c.contentEL).clone(),a(c.contentEL).remove(),this.tip.find(".tip-body").append(d.show())),this._bindEvent()},_ajaxLoad:function(b){var c=this;a.ajax({url:b,method:"POST",dataType:"html",success:function(a){c.tip.find(".tip-body").append(a)},error:function(){c.tip.find(".tip-body").append(a.om.lang.omTooltip.FailedToLoad)}})},_bindEvent:function(){var a=this,b=a.options,c=a.element;"mouseover"==b.showOn?c.bind("mouseover.tooltip",function(c){a.showTime&&clearTimeout(a.showTime),a.showTime=setTimeout(function(){a.show(c)},b.delay)}):"click"==b.showOn&&(a.showTime=c.bind("click.tooltip",function(c){setTimeout(function(){a.show(c)},b.delay)})),b.trackMouse&&c.bind("mousemove.tooltip",function(b){a._adjustPosition(b)}),c.bind("mouseleave.tooltip",function(){a.showTime&&clearTimeout(a.showTime),a.hideTime=setTimeout(function(){a.hide()},b.delay)}),a.tip.bind("mouseover.tooltip",function(){a.hideTime&&clearTimeout(a.hideTime)}).bind("mouseleave.tooltip",function(){setTimeout(function(){a.hide()},b.delay)})},show:function(b){var c=this,d=c.options;a(document.body).find(c.tip).length<=0?(d.url&&d.lazyLoad&&c._ajaxLoad(d.url),c.tip.appendTo(document.body).fadeIn(),c._adjustPosition(b)):(c._adjustPosition(b),c.tip.fadeIn())},_adjustPosition:function(b){var f,g,i,c=this,d=c.options,e=c.element,h=a(e).offset();b&&!d.region?(f=b.pageY+d.offset[0],g=b.pageX+d.offset[1],c.tip.find(".tip-anchor").css({top:d.anchorOffset+3,left:"-9px"}).addClass("tip-anchor-left")):(i=parseInt(a(e).css("borderBottomWidth").replace("px","")),f=h.top+a(e).height()+(isNaN(i)?0:i)+d.offset[0],g=h.left+d.offset[1],"right"==d.region?(g=h.left+d.offset[1]+a(e).width()+c.adjustWidth,f=f-c.element.height()+c.adjustHeight+d.offset[0],c.tip.find(".tip-anchor").css({top:d.anchorOffset+3,left:"-9px"})):"left"==d.region?(g=h.left-c.tip.width()-c.adjustWidth-d.offset[1]-2,f=f-c.element.height()-c.adjustHeight-d.offset[0],c.tip.find(".tip-anchor").css({top:d.anchorOffset+3,left:c.tip.outerWidth()-2})):"top"==d.region?(f=f-(c.element.height()+c.tip.height()+c.adjustHeight+2)-d.offset[0],g+=d.offset[1],c.tip.find(".tip-anchor").css({top:c.tip.outerHeight()-3,left:d.anchorOffset+3})):"bottom"==d.region&&(f+=d.offset[0],g+=d.offset[1],c.tip.find(".tip-anchor").css({top:-9,left:d.anchorOffset+3})),c.tip.find(".tip-anchor").addClass("tip-anchor-"+c.regionMap[d.region])),g+c.tip.width()>document.documentElement.clientWidth&&(g=g-c.tip.width()-20),f+c.tip.height()>document.documentElement.clientHeight&&(f=f-(c.element.height()+c.tip.height())-20),c.tip.css({top:f-a(document).scrollTop(),left:g-a(document).scrollLeft()})},hide:function(){this.tip.hide()},destroy:function(){clearTimeout(this.showTime),clearTimeout(this.hideTime),this.element.unbind(".tooltip"),this.tip.remove()}}),a.om.lang.omTooltip={FailedToLoad:""}}(jQuery),function(a){var b={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};a.omWidget("om.omTree",{_swapClass:function(a,b,c){var d=a.filter("."+b);a.filter("."+c).removeClass(c).addClass(b),d.removeClass(b).addClass(c)},_getParentNode:function(b){if(b){var c=a(b).parent().parent();if(c&&c.hasClass("om-tree-node"))return c}return null},_setParentCheckbox:function(a){var c,d,e,f,g,b=this._getParentNode(a);b&&(c=b.find(">ul >li >div.tree-checkbox"),d=c.length,e=c.filter(".checkbox_full").length,f=c.filter(".checkbox_part").length,g=b.find(">div.tree-checkbox"),g.removeClass("checkbox_full checkbox_part"),e==d?g.addClass("checkbox_full"):(e>0||f>0)&&g.addClass("checkbox_part"),this._setParentCheckbox(b))},_setChildCheckbox:function(a,b){var c=a.find(">ul").find(".tree-checkbox");c.removeClass("checkbox_part checkbox_full"),b&&c.addClass("checkbox_full")},_applyEvents:function(b){var c=this,d=c.options,e=d.onClick,f=d.onDblClick,g=d.onRightClick,h=d.onDrag,j=(d.onSelect,d.onDrop);b.find("span").bind("click",function(b){var d=c.element.data("nodes")[a(this).parent().attr("id")];return e&&c._trigger("onClick",b,d),c.select(d),!1}).bind("dblclick",function(b){var d=a(this).parent(),e=c.element.data("nodes")[d.attr("id")];d.hasClass("hasChildren")&&d.find("span.folder").removeClass("folder").addClass("placeholder"),d.has("ul").length>0&&a(b.target,this)&&c.toggler(d),d.find("span.placeholder").removeClass("placeholder").addClass("folder"),f&&c._trigger("onDblClick",b,e)}).bind("contextmenu",function(b){var d=c.element.data("nodes")[a(this).parent().attr("id")];g&&c._trigger("onRightClick",b,d)}).bind("mouseover mouseout",function(b){return"mouseover"==b.type?a(this).addClass("hover"):"mouseout"==b.type&&a(this).removeClass("hover"),!1}),c._bindHitEvent(b),b.find("div.tree-checkbox").click(function(){var d=a(this).parent(),e=c.findByNId(d.attr("id"));c._toggleCheck(d,c.isCheck(e))}),c.options.draggable&&(b.omDraggable({revert:"invalid",onStart:function(a,b){var d=c.findByNId(a.helper.attr("id"));h&&c._trigger("onDrag",b,d)}}),b.omDroppable({greedy:!0,accept:"li.om-tree-node",onDragOver:function(){var e=b.filter(".treenode-droppable");e.length>0?e.removeClass("treenode-droppable"):a(this).addClass("treenode-droppable")},onDragOut:function(){a(this).removeClass("treenode-droppable")},onDrop:function(b,d){var e,f,k,l,m,g=b,h=this;h.find(">ul"),a(this).removeClass("treenode-droppable"),g.css("left",""),g.css("top",""),k=c.findByNId(h.attr("id")),l=c.findByNId(g.attr("id")),h.has("ul").length>0?e=k:(f=k,l.pid=k.pid),m=c.findByNId(g.parent().find("li").attr("id")),c.remove(l),c.insert(l,e,f,!0),j&&c._trigger("onDrop",d,m)}})),b.bind("mousedown",function(a){a.stopPropagation()})},_bindHitEvent:function(b){var c=this;b.find("div.hitarea").click(function(){var b=a(this).parent();b.hasClass("hasChildren")&&b.find("span.folder").removeClass("folder").addClass("placeholder"),c.toggler(b),b.find("span.placeholder").removeClass("placeholder").addClass("folder")})},options:{initExpandLevel:0,lineHover:!1,showIcon:!0,showLine:!0,showCheckbox:!1,cascadeCheck:!0,draggable:!1,filter:null,nodeCount:0,simpleDataModel:!1},_create:function(){this.element.data("nodes",[]).data("selected","").data("init_dataSource",[]).addClass("om-tree om-widget")},updateNode:function(a){var b=this,c=b.options,d=a.find("li");b._applyEvents(d),c.control&&b._treeController(b,c.control)},toggler:function(c){var i,j,k,d=this,e=d.options,f=c.attr("id"),g=d.findByNId(f),h=c.hasClass(b.expandable);if(h){if(i=e.onBeforeExpand,i&&!1===d._trigger("onBeforeExpand",null,g))return d}else if(j=e.onBeforeCollapse,j&&!1===d._trigger("onBeforeCollapse",null,g))return d;k=c.find(c.find(">.hitarea")),d._swapClass(k,b.collapsableHitarea,b.expandableHitarea),d._swapClass(k,b.lastCollapsableHitarea,b.lastExpandableHitarea),d._swapClass(c,b.collapsable,b.expandable),d._swapClass(c,b.lastCollapsable,b.lastExpandable),c.find(">ul").each(function(){var b,c;h?(a(this).show(),b=e.onExpand,b&&d._trigger("onExpand",null,g)):(a(this).hide(),c=e.onCollapse,c&&d._trigger("onCollapse",null,g))})},_init:function(){var a=this,b=a.options,c=a.element,d=b.dataSource;c.empty(),d&&("string"==typeof d?a._ajaxLoad(c,d):"object"==typeof d&&(b.simpleDataModel&&(d=a._transformToNodes(d)),c.data("init_dataSource",d),a._appendNodes.apply(a,[c,d]),a.updateNode(c)))},_ajaxLoad:function(b,c){var d=this,e=this.options,f=e.onBeforeLoad,g=e.onSuccess,h=e.onError;f&&d._trigger("onBeforeLoad",null,d.findByNId(b.parent().attr("id"))),a.ajax({url:c,method:"POST",dataType:"json",cache:!1,success:function(a){e.simpleDataModel&&(a=d._transformToNodes(a)),b.data("init_dataSource",a),d._appendNodes.apply(d,[b,a]),d.updateNode(b),g&&d._trigger("onSuccess",null,a)},error:function(a,b,c){h&&d._trigger("onError",null,a,b,c)}})},check:function(b){this._toggleCheck(a("#"+b.nid),!1)},uncheck:function(b){this._toggleCheck(a("#"+b.nid),!0)},_toggleCheck:function(a,b){var c=a.find(">div.tree-checkbox"),d=this,e=d.options,f=e.onCheck;b?c.removeClass("checkbox_part checkbox_full"):c.removeClass("checkbox_part").addClass("checkbox_full"),d.options.cascadeCheck&&(d._setChildCheckbox(a,!b),d._setParentCheckbox(a)),f&&d._trigger("onCheck",null,d.findByNId(a.attr("id")))},checkAll:function(a){a?this.element.find(".tree-checkbox").removeClass("checkbox_part").addClass("checkbox_full"):this.element.find(".tree-checkbox").removeClass("checkbox_part checkbox_full")},isCheck:function(b){return a("#"+b.nid).find(">div.tree-checkbox").hasClass("checkbox_full")},getChecked:function(b){var c=this,d=[],e=b?".checkbox_full":":not(.checkbox_full)";return this.element.find(".tree-checkbox").filter(e).each(function(){d.push(c.element.data("nodes")[a(this).parent().attr("id")])}),d},select:function(b){var g,h,i,c=this,d=this.options,e=d.onBeforeSelect,f=d.onSelect;return e&&!1===c._trigger("onBeforeSelect",null,b)?c:(g=a("#"+b.nid),a(" >span",g).addClass("selected"),h=c.element.data("selected"),i=g.attr("id"),""!=h&&h!=i&&a("#"+h+" >span").removeClass("selected"),c.element.data("selected",i),f&&c._trigger("onSelect",null,b),void 0)},unselect:function(b){var e,f,c=this,d=a("#"+b.nid);a(" >span",d).removeClass("selected"),e=c.element.data("selected"),f=d.attr("id"),e==f&&c.element.data("selected","")},getSelected:function(){var a=this.element.data("selected");return a?this.element.data("nodes")[a]:null},findNodes:function(a,b,c,d){var f,h,e=[],g=c?c.children:this.element.data("init_dataSource");if(d=0!=d?!0:d,g&&(f=g.length)>0)for(h=0;f>h;h++)e=this._searchNode.apply(g[h],[a,b,this._searchNode,e,!1,d]);return e.length>0?e:null},findNode:function(a,b,c,d){var e,f,h,g=c?c.children:this.element.data("init_dataSource");if(d=0!=d?!0:d,g&&(f=g.length)>0)for(h=0;f>h;h++)if(e=this._searchNode.apply(g[h],[a,b,this._searchNode,[],!0,d]),null!=e)return e;return null},findByNId:function(a){return this.element.data("nodes")[a]||null},findNodesBy:function(a,b,c){var d,f,g,e=b?b.children:this.element.data("init_dataSource");if(c=0!=c?!0:c,f=[],e&&(len=e.length)>0)for(g=0;len>g;g++)a.call(e[g],e[g])===!0&&f.push(e[g]),c&&e[g].children&&(d=this.findNodesBy(a,e[g],c),d&&(f=f.concat(d)));return f.length>0?f:null},findNodeBy:function(a,b,c){var d,f,g,e=b?b.children:this.element.data("init_dataSource");if(c=0!=c?!0:c,e&&(g=e.length)>0)for(f=0,g=e.length;g>f;f++){if(a.call(e[f],e[f])===!0)return e[f];if(c&&(d=this.findNodeBy(a,e[f],c),null!=d))return d}return null},_searchNode:function(b,c,d,e,f,g){var h,i;if(!f)return this[b]==c&&e.push(this),this.children&&this.children.length&&g&&a.each(this.children,d,[b,c,d,e,!1,g]),e;if(this[b]==c)return this;if(this.children&&this.children.length&&g)for(h in this.children)if(i=d.apply(this.children[h],[b,c,d,[],!0,g]))return i},getParent:function(a){var b=this.element.data("nodes")["pid"+a.nid];return b?this.findByNId(b):null},getChildren:function(a){return a.children},getData:function(){return this.options.dataSource},setData:function(a){this.options.dataSource=a},expand:function(c){if(c.nid){var d=b.expandable,e=a("#"+c.nid),f=a(">div."+b.hitarea,e).filter(function(){return d?a(this).parent("."+d).length:!0}).parent().parentsUntil(this.element).andSelf().filter(function(){return a(this).filter("li").hasClass(d)});this.toggler(f)}},collapse:function(c){c.nid&&this._collapseHandler(b.collapsable,a("#"+c.nid))},expandAll:function(){this._collapseHandler(b.expandable,this.element,!0)},collapseAll:function(){this._collapseHandler(b.collapsable,this.element,!0)},_collapseHandler:function(c,d,e){var f=(e?"":">")+"div."+b.hitarea;this.toggler(a(f,d).filter(function(){return c?a(this).parent("."+c).length:!0}).parent())},refresh:function(b){var f,g,h,i,c=this,d=c.element,e=c.getData();if(b)h=a("#"+b.nid).next(),i=d.data("nodes")["pid"+b.nid],c.remove(b),c.insert(b,c.findByNId(i),c.findByNId(h.attr("id")));else if(d.empty(),"string"==typeof e)c._ajaxLoad(d,e);else if("object"==typeof e)for(c.setData([]),f=0,g=e.length;g>f;f++)c.insert(e[f])},_transformToNodes:function(a){var b,c,d,e,f;if(!a)return[];for(d=[],e=[],b=0,c=a.length;c>b;b++)e[a[b].id]=a[b];for(b=0,c=a.length;c>b;b++)e[a[b].pid]?(f=a[b].pid,e[f].children||(e[f].children=[]),e[f].children.push(a[b])):d.push(a[b]);return d},_appendNodes:function(c,d,e,f){var k,l,m,n,o,p,q,r,s,t,u,g=this,h=[],i=g.options.showCheckbox,j=g.element.attr("id")?g.element.attr("id"):"treeId"+parseInt(1e3*Math.random());for(g.element.attr("id",j),k=0,l=d.length;l>k;k++)m=d[k],n=k==d.length-1,o="om-tree-node "+(i?"treenode-checkable ":"")+(m.hasChildren?"hasChildren ":""),p=j+"_"+ ++g.options.nodeCount,m.nid=p,q=g.element.data("nodes"),q[m.nid]=m,"string"==typeof c?(q["pid"+m.nid]=c,n&&(c=null)):q["pid"+m.nid]=c.parent("li").attr("id"),r=[],m.children&&m.children.length>0&&r.push(g._appendNodes(m.nid,m.children).join("")),s=0,m.children&&(s=m.children.length)>0||m.hasChildren?o=m.expanded?o+"open "+b.collapsable+" "+(n?b.lastCollapsable:""):o+b.expandable+" "+(n?b.lastExpandable:""):o+=n?b.last:"",h.push("<li id='",m.nid,"' class='",o,"'>"),(m.hasChildren||s>0)&&(t="",a.each(o.split(" "),function(){t+=this+"-hitarea "}),h.push("<div class='",b.hitarea+" "+t,"'/>")),i&&h.push("<div class='tree-checkbox'/>"),u=m.classes?m.classes:"",g.options.showIcon&&(u+=m.hasChildren||m.children&&m.children.length>0?" folder ":" file "),h.push("<span class='",u,"'>","<a href='#'>",m.text,"</a></span>"),(m.hasChildren||s>0)&&(h.push("<ul"," style='display:",m.expanded?"block":"none","'>"),h.push(r.join("")),h.push("</ul>")),h.push("</li>");return e?f?a("#"+e.nid).after(h.join("")):a("#"+e.nid).before(h.join("")):c&&c.append(h.join("")),h},remove:function(c,d){var e,h,i,j,k,l,f=this,g=d?d.children:f.element.data("init_dataSource");for(h in g){if(g[h]==c){for(i=[],i=f._findChildrenId(c,i),i.push(c.nid),j=0,k=i.length;k>j;j++)delete f.element.data("nodes")[i[j]],delete f.element.data("nodes")["pid"+i[j]];return c.nid==f.element.data("selected")&&this.element.data("selected",null),l=a("#"+c.nid).prev(),a("#"+c.nid).next().length<1&&l.length>0&&(l.hasClass(b.collapsable)?(l.addClass(b.lastCollapsable),l.find("div.hitarea").first().addClass(b.lastCollapsableHitarea)):l.hasClass(b.expandable)?(l.addClass(b.lastExpandable),l.find("div.hitarea").first().addClass(b.lastExpandableHitarea)):l.addClass(b.last)),a("#"+c.nid).remove(),g.splice(h,1),d&&d.nid&&g.length<1&&f._changeToFolderOrFile(d,!1),!0}if(g[h].children&&(e=f.remove(c,g[h])))return!0}return!1},_findChildrenId:function(a,b){if(a.children)for(var c=0,d=a.children,e=d.length;e>c;c++)b.push(d[c].nid),d[c].children&&this._findChildrenId(d[c],b);return b},insert:function(c,d,e,f){var i,j,g,h,k,l,m,n,o;c&&(g=this,h=[],k=a.isArray(c),k?h=c:h.push(c),e&&(d=d||g.findByNId(g.element.data("nodes")["pid"+e.nid])),m=d?d.children:g.element.data("init_dataSource"),d&&(!d.children||d.children.length<1)&&(d.hasChildren||(g._changeToFolderOrFile(d,!0),g._bindHitEvent(a("#"+d.nid))),m=d.children=[]),i=d?a("#"+d.nid).children("ul").first():g.element,j=i.find("li"),e&&(l=a.inArray(e,m))>=0?(g._appendNodes(i,h,e,f),m.splice(l,0,c)):(g._appendNodes(i,h,e,f),k?a.merge(m,c):m.push(c)),n=i.find("li").filter("."+b.last+",."+b.lastCollapsable+",."+b.lastExpandable).not(i.find("li").filter(":last-child:not(ul)")),n.removeClass(b.last+" "+b.lastCollapsable+" "+b.lastExpandable),n.find(" >div").removeClass(b.lastCollapsableHitarea+" "+b.lastExpandableHitarea),o=i.find("li").not(j),g._applyEvents(o))},_changeToFolderOrFile:function(c,d){var h,e=a("#"+c.nid),f=this;d?(a("<ul/>").css("display","block").appendTo(e),e.addClass("open "+b.collapsable),f._swapClass(e,b.last,b.lastCollapsable),c.children=[]):(e.find("ul").remove(),e.find("div."+b.hitarea).remove(),e.filter("."+b.lastCollapsable+",."+b.lastExpandable).removeClass(b.lastCollapsable+" "+b.lastExpandable).addClass(b.last),e.removeClass("open "+b.collapsable+" "+b.expandable)),f.options.showIcon&&f._swapClass(e.children("span"),"file","folder"),h=e.filter(":has(>ul)").prepend('<div class="'+b.hitarea+'"/>').find("div."+b.hitarea),h.each(function(){var b="";a.each(a(this).parent().attr("class").split(" "),function(){b+=this+"-hitarea "}),a(this).addClass(b)})},modify:function(b,c,d){if(b&&c){var g,e=this,f=a("#"+b.nid).next();d=d||this.findByNId(e.element.data("nodes")["pid"+b.nid]),(f.is("ul")||f.is("li"))&&(g=e.findByNId(f.attr("id"))),e.remove(b,d),e.insert(c,d,g)}},disable:function(){},enable:function(){}})}(jQuery),function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"),void 0;var c=a.data(this[0],"validator");return c?c:(c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this
}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var e,f,g,h,i,j,d=this[0];if(b)switch(e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d),b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":return c?(h={},a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h):(delete f[d.name],g)}return i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d),i.required&&(j=i.required,delete i.required,i=a.extend({required:j},i)),i}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1==arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),c)}),b)},a.extend(a.validator,{defaults:{validateOnEmpty:!1,messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,focusCleanup:!1,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){this.settings.validateOnEmpty?(!this.checkable(a)||a.name in this.submitted)&&this.element(a):!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0])}var c,d;this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset(),c=this.groups={},a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})}),d=this.settings.rules,a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",b).validateDelegate(":radio, :checkbox, select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.clean(b),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){var c,d,e,f,g;b=this.clean(b),this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]),c=a(b).rules(),d=!1;for(e in c){f={method:e,parameters:c[e]};try{if(g=a.validator.methods[e].call(this,b.value.replace(/\r/g,""),b,f.parameters),"dependency-mismatch"==g){d=!0;continue}if(d=!1,"pending"==g)return this.toHide=this.toHide.not(this.errorsFor(b)),void 0;if(!g)return this.formatAndAdd(b,f),!1}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h),h}}return d?void 0:(this.objectLength(c)&&this.successList.push(b),!0)},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a];return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)b=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass().addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var e,f,c={},d=a(b);for(e in a.validator.methods)f=d.attr(e),f&&(c[e]=f);return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return delete b[d],void 0;if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!=d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":var e=a(c).val();return e&&e.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){var e,f,g;return this.optional(c)?"dependency-mismatch":(e=this.previousValue(c),this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,this.pending[c.name]?"pending":e.old===b?e.valid:(e.old=b,f=this,this.startRequest(c),g={},g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){var g,h,i,j;f.settings.messages[c.name].remote=e.originalMessage,g=d===!0,g?(h=f.formSubmitted,f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()):(i={},j=d||f.defaultMessage(c,"remote"),i[c.name]=e.message=a.isFunction(j)?j(b):j,f.showErrors(i)),e.valid=g,f.stopRequest(c,g)}},d)),"pending"))},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(Date.parse(a.replace(/-/g,"/"))))},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},accept:function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){var e=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==e.val()}}}),a.format=a.validator.format}(jQuery),function(a){var c,b={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,c,d){var e=a.port;"abort"==a.mode&&(b[e]&&b[e].abort(),b[e]=d)}):(c=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"==e?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments)):c.apply(this,arguments)})}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})}(jQuery);