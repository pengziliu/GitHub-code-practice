(function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.om=e.om||{};if(e.om.version)return;e.extend(e.om,{version:"2.0",keyCode:{TAB:9,ENTER:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},lang:{_get:function(t,n,r){return t[r]?t[r]:e.om.lang[n][r]}}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_oldFocus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._oldFocus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".om-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".om-disableSelection")}}),e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),s&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.om,{plugin:{add:function(t,n,r){var i=e.om[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}}})})(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)e(i).triggerHandler("om-remove");n(t)}}e.omWidget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.OMWidget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.omWidget.bridge(t,e[i][t])},e.omWidget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n);if(i=="options")return u=r&&r.options,!1;var s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?(t._setOptions(i||{}),e.extend(t.options,i),e(t.beforeInitListeners).each(function(){this.call(t)}),t._init(),e(t.initListeners).each(function(){this.call(t)})):e.data(this,n,new r(i,this))}),u)}},e.omWidget.addCreateListener=function(t,n){var r=t.split(".");e[r[0]][r[1]].prototype.createListeners.push(n)},e.omWidget.addInitListener=function(t,n){var r=t.split(".");e[r[0]][r[1]].prototype.initListeners.push(n)},e.omWidget.addBeforeInitListener=function(t,n){var r=t.split(".");e[r[0]][r[1]].prototype.beforeInitListeners.push(n)},e.OMWidget=function(e,t){this.createListeners=[],this.initListeners=[],this.beforeInitListeners=[],arguments.length&&this._createWidget(e,t)},e.OMWidget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("om-remove._"+this.widgetName,function(){r.destroy()}),this._create(),e(this.createListeners).each(function(){this.call(r)}),this._trigger("create"),e(this.beforeInitListeners).each(function(){this.call(r)}),this._init(),e(this.initListeners).each(function(){this.call(r)})},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName)},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,this},_trigger:function(t,n){var r=this.options[t];n=e.Event(n),n.type=t;if(n.originalEvent)for(var i=e.event.props.length,s;i;)s=e.event.props[--i],n[s]=n.originalEvent[s];var o=[],u=arguments.length;for(var i=2;i<u;i++)o[i-2]=arguments[i];return u>1&&(o[u-2]=arguments[1]),!(e.isFunction(r)&&r.apply(this.element,o)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){e.omWidget("om.omMouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){t.originalEvent=t.originalEvent||{};if(t.originalEvent.mouseHandled)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which==1,i=typeof this.options.cancel=="string"?e(t.target).closest(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),t.originalEvent.mouseHandled=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.om=e.om||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s=e.fn.position,o=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return s.apply(this,arguments);t=e.extend({},t);var o=e(t.of),u=o[0],l=(t.collision||"flip").split(" "),c=t.offset?t.offset.split(" "):[0,0],h,p,v;return u.nodeType===9?(h=o.width(),p=o.height(),v={top:0,left:0}):u.setTimeout?(h=o.width(),p=o.height(),v={top:o.scrollTop(),left:o.scrollLeft()}):u.preventDefault?(t.at="left top",h=p=0,v={top:t.of.pageY,left:t.of.pageX}):(h=o.outerWidth(),p=o.outerHeight(),v=o.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),l.length===1&&(l[1]=l[0]),c[0]=parseInt(c[0],10)||0,c.length===1&&(c[1]=c[0]),c[1]=parseInt(c[1],10)||0,t.at[0]==="right"?v.left+=h:t.at[0]===i&&(v.left+=h/2),t.at[1]==="bottom"?v.top+=p:t.at[1]===i&&(v.top+=p/2),v.left+=c[0],v.top+=c[1],this.each(function(){var n=e(this),r=n.outerWidth(),s=n.outerHeight(),o=parseInt(e.curCSS(this,"marginLeft",!0))||0,u=parseInt(e.curCSS(this,"marginTop",!0))||0,d=r+o+(parseInt(e.curCSS(this,"marginRight",!0))||0),m=s+u+(parseInt(e.curCSS(this,"marginBottom",!0))||0),g=e.extend({},v),y;t.my[0]==="right"?g.left-=r:t.my[0]===i&&(g.left-=r/2),t.my[1]==="bottom"?g.top-=s:t.my[1]===i&&(g.top-=s/2),g.left=Math.round(g.left),g.top=Math.round(g.top),y={left:g.left-o,top:g.top-u},e.each(["left","top"],function(n,i){e.om.omPosition[l[n]]&&e.om.omPosition[l[n]][i](g,{targetWidth:h,targetHeight:p,elemWidth:r,elemHeight:s,collisionPosition:y,collisionWidth:d,collisionHeight:m,offset:c,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(g,{using:t.using}))})},e.om.omPosition={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,l=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+l:s>0?o+u+l:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,l=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+l:s>0?o+u+l:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?this.each(function(){e.offset.setOffset(this,t)}):o.call(this)})}(jQuery),function(e,t){e.omWidget("om.omDraggable",e.om.omMouse,{widgetEventPrefix:"drag",options:{axis:!1,containment:!1,cursor:"auto",_scope:"default",handle:!1,helper:"original",revert:!1,scroll:!0},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.element.addClass("om-draggable"),this.options.disabled&&this.element.addClass("om-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("omDraggable"))return;return this.element.removeData("omDraggable").unbind(".draggable").removeClass("om-draggable om-draggable-dragging om-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".om-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?!0:!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.om.ddmanager&&(e.om.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.containment&&this._setContainment(),this._trigger("onStart",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.om.ddmanager&&!n.dropBehaviour&&e.om.ddmanager.prepareOffsets(this,t),this.helper.addClass("om-draggable-dragging"),this._mouseDrag(t,!0),e.om.ddmanager&&e.om.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("onDrag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.om.ddmanager&&e.om.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.om.ddmanager&&!this.options.dropBehaviour&&(n=e.om.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var r=this;e(this.helper).animate(this.originalPosition,500,function(){r._trigger("onStop",t)!==!1&&r._clear()})}else this._trigger("onStop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e.om.ddmanager&&e.om.ddmanager.dragStop(this,t),e.om.omMouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".om-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(this.element[0].parentNode),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var f=this.relative_container.offset();u=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+f.left,this.containment[3]+f.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("om-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.om.plugin.call(this,t,[n,r]),t=="onDrag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.OMWidget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.om.plugin.add("omDraggable","cursor",{onStart:function(t,n){var r=e("body"),i=e(this).data("omDraggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},onStop:function(t,n){var r=e(this).data("omDraggable");if(r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}}),e.om.plugin.add("omDraggable","scroll",{onStart:function(t,n){var r=e(this).data("omDraggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},onDrag:function(t,n){var r=e(this).data("omDraggable"),i=r.options,s=!1,o=20,u=20;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-n.pageY<o?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+u:n.pageY-r.overflowOffset.top<o&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-u);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-n.pageX<o?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+u:n.pageX-r.overflowOffset.left<o&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-u)}else{if(!i.axis||i.axis!="x")n.pageY-e(document).scrollTop()<o?s=e(document).scrollTop(e(document).scrollTop()-u):e(window).height()-(n.pageY-e(document).scrollTop())<o&&(s=e(document).scrollTop(e(document).scrollTop()+u));if(!i.axis||i.axis!="y")n.pageX-e(document).scrollLeft()<o?s=e(document).scrollLeft(e(document).scrollLeft()-u):e(window).width()-(n.pageX-e(document).scrollLeft())<o&&(s=e(document).scrollLeft(e(document).scrollLeft()+u))}s!==!1&&e.om.ddmanager&&!i.dropBehaviour&&e.om.ddmanager.prepareOffsets(r,n)}})}(jQuery),function(e,t){e.omWidget("om.omDroppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,greedy:!1,hoverClass:!1,_scope:"default"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.om.ddmanager.droppables[t._scope]=e.om.ddmanager.droppables[t._scope]||[],e.om.ddmanager.droppables[t._scope].push(this),this.element.addClass("om-droppable")},destroy:function(){var t=e.om.ddmanager.droppables[this.options._scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("om-droppable om-droppable-disabled").removeData("omDroppable").unbind(".droppable"),this},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.OMWidget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.om.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("onDragStart",t,n.currentItem||n.element)},_deactivate:function(t){var n=e.om.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_over:function(t){var n=e.om.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("onDragOver",t,n.currentItem||n.element))},_out:function(t){var n=e.om.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDragOut",t,n.currentItem||n.element))},_drop:function(t,n){var r=n||e.om.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(omDroppable)").not(".om-draggable-dragging").each(function(){var t=e.data(this,"omDroppable");if(t.options.greedy&&!t.options.disabled&&t.options._scope==r.options._scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.om.intersect(r,e.extend(t,{offset:t.element.offset()})))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("onDrop",t,r.currentItem||r.element),this.element):!1}}),e.om.intersect=function(e,t){if(!t.offset)return!1;var n=(e.positionAbs||e.position.absolute).left,r=n+e.helperProportions.width,i=(e.positionAbs||e.position.absolute).top,s=i+e.helperProportions.height,o=t.offset.left,u=o+t.proportions.width,a=t.offset.top,f=a+t.proportions.height;return o<n+e.helperProportions.width/2&&r-e.helperProportions.width/2<u&&a<i+e.helperProportions.height/2&&s-e.helperProportions.height/2<f},e.om.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.om.ddmanager.droppables[t.options._scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(omDroppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.om.ddmanager.droppables[t.options._scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.om.intersect(t,this)&&(r=r||this._drop.call(this,n)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.om.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.om.ddmanager.prepareOffsets(t,n),e.each(e.om.ddmanager.droppables[t.options._scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.om.intersect(t,this),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(omDroppable):eq(0)");o.length&&(s=e.data(o[0],"omDroppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.om.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.omWidget("om.omResizable",e.om.omMouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,aspectRatio:!1,autoHide:!1,containment:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("om-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"om-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(e('<div class="om-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".om-resizable-handle",this.element).length?{n:".om-resizable-n",e:".om-resizable-e",s:".om-resizable-s",w:".om-resizable-w",se:".om-resizable-se",sw:".om-resizable-sw",ne:".om-resizable-ne",nw:".om-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="om-resizable-"+s,u=e('<div class="om-resizable-handle '+o+'"></div>');/sw|se|ne|nw/.test(s)&&u.css({zIndex:++n.zIndex}),"se"==s&&u.addClass("om-icon om-icon-gripsmall-diagonal-se"),this.handles[s]=".om-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".om-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/om-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("om-resizable-autohide").hover(function(){if(n.disabled)return;e(this).removeClass("om-resizable-autohide"),t._handles.show()},function(){if(n.disabled)return;t.resizing||(e(this).addClass("om-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("om-resizable om-resizable-disabled om-resizable-resizing").removeData("resizable").unbind(".resizable").find(".om-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position"
)))&&s.css({position:"absolute",top:i.top,left:i.left}),e.browser.opera&&/relative/.test(s.css("position"))&&s.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".om-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("om-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,a=t.pageX-o.left||0,f=t.pageY-o.top||0,l=this._change[u];if(!l)return!1;var h=l.apply(this,[t,a,f]),p=e.browser.msie&&e.browser.version<7,d=this.sizeDiff;this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)h=this._updateRatio(h,t);return h=this._respectSize(h,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(h),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&r._hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("om-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,f=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,l=r(e.width)&&i.minWidth&&i.minWidth>e.width,c=r(e.height)&&i.minHeight&&i.minHeight>e.height;l&&(e.width=i.minWidth),c&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),f&&(e.height=i.maxHeight);var h=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,d=/sw|nw|w/.test(o),v=/nw|ne|n/.test(o);l&&d&&(e.left=h-i.minWidth),u&&d&&(e.left=h-i.maxWidth),c&&v&&(e.top=p-i.minHeight),f&&v&&(e.top=p-i.maxHeight);var m=!e.width&&!e.height;return m&&!e.left&&e.top?e.top=null:m&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.om.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},_hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.om.resizable,{version:"1.1"}),e.om.plugin.add("omResizable","alsoResize",{start:function(t,n){var r=e(this).data("omResizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10),position:t.css("position")})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("omResizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,i){e(t).each(function(){var t=e(this),s=e(this).data("resizable-alsoresize"),o={},a=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(s[t]||0)+(u[t]||0);n&&n>=0&&(o[t]=n||null)}),e.browser.opera&&/relative/.test(t.css("position"))&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"})),t.css(o)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){var r=e(this).data("omResizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.css({position:t.data("resizable-alsoresize").position})})};r._revertToRelativePosition&&(r._revertToRelativePosition=!1,typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)),e(this).removeData("resizable-alsoresize")}}),e.om.plugin.add("omResizable","containment",{start:function(t,r){var i=e(this).data("omResizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var h=i.containerOffset,p=i.containerSize.height,d=i.containerSize.width,v=i._hasScroll(a,"left")?a.scrollWidth:d,m=i._hasScroll(a)?a.scrollHeight:p;i.parentData={element:a,left:h.left,top:h.top,width:v,height:m}}},resize:function(t,n){var r=e(this).data("omResizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},h=r.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/i.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*i.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var p=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),d=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),v=r.containerElement.get(0)==r.element.parent().get(0),m=/relative|absolute/.test(r.containerElement.css("position"));v&&m&&(p-=r.parentData.left),p+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-p,f&&(r.size.height=r.size.width/r.aspectRatio)),d+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-d,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("omResizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),h=f.outerWidth()-r.sizeDiff.width,p=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:h,height:p}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:h,height:p})}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.omWidget("om.sortable",e.om.omMouse,{widgetEventPrefix:"sort",options:{helper:"original",items:"> *",placeholder:!1},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},_mouseCapture:function(t,n){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var r=null,i=this,s=e(t.target).parents().each(function(){if(e.data(this,"sortable-item")==i)return r=e(this),!1});return e.data(t.target,"sortable-item")==i&&(r=e(t.target)),r?(this.currentItem=r,!0):!1},_mouseStart:function(t,n,r){return this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.helper.css("zIndex",1e3),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);var n=this.options,r=!1;this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<20?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+20:t.pageY-this.overflowOffset.top<20&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-20),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<20?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+20:t.pageX-this.overflowOffset.left<20&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-20),this.positionAbs=this._convertPositionTo("absolute"),this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(!this._intersectsWithSides(s))break;this._rearrange(t,s);break}}return this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(!e)return;return this._clear(e,t),!1},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_isOverAxis:function(e,t,n){return e>t&&e<t+n},_intersectsWithPointer:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&s=="right"||i=="down"?2:1:i&&(i=="down"?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i=="right"&&n||i=="left"&&!n:r&&(r=="down"&&t||r=="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[e(this.options.items,this.element),this],i=r[1],s=r[0];for(var o=0,u=s.length;o<u;o++){var f=e(s[o]);f.data("sortable-item",i),n.push({item:f,instance:i,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var t=this.items.length-1;t>=0;t--){var n=this.items[t];if(n.instance!=this.currentContainer&&this.currentContainer&&n.item[0]!=this.currentItem[0])continue;var r=n.item;e||(n.width=r.outerWidth(),n.height=r.outerHeight());var i=r.offset();n.left=i.left,n.top=i.top}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder)},_createHelper:function(t){var n=this.currentItem;return n.parents("body").length||e(this.currentItem[0].parentNode)[0].appendChild(n[0]),this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")},n},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent,n=t.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],t[0])&&(n.left+=this.scrollParent.scrollLeft(),n.top+=this.scrollParent.scrollTop());if(t[0]==document.body||t[0].tagName&&t[0].tagName.toLowerCase()=="html"&&e.browser.msie)n={top:0,left:0};return{top:n.top+(parseInt(t.css("borderTopWidth"),10)||0),left:n.left+(parseInt(t.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(e,t){this.reverting=!1;var n=[],r=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.helper.css("zIndex",1e3);if(this.cancelHelperRemoval){if(!t){for(var i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!t){for(var i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.OMWidget.prototype._trigger.apply(this,arguments)},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.om.sortable,{version:"1.1"})}(jQuery),function(e){var t=["collapse","min","max","close"],n=["om-panel-tool-collapse","om-panel-tool-expand","om-panel-tool-min","om-panel-tool-max","om-panel-tool-close"],r={anim:!0,speed:"fast"};e.omWidget("om.omPanel",{options:{title:"",width:"auto",height:"auto",header:!0,collapsible:!1,closable:!1,closed:!1,collapsed:!1,tools:[],loadingMessage:"default",_closeMode:"hidden",_helpMsg:!1},_create:function(){this.element.addClass("om-panel-body om-widget-content").wrap("<div class='om-widget om-panel'></div>")},_init:function(){var e=this.options,t=this.element,n=t.parent(),r;this._renderHeader(),r=t.prev(),e.header===!1&&t.addClass("om-panel-noheader"),this._bindEvent(),this._resize(n);var i=e.header!==!1?r.outerHeight():0;e.collapsed!==!1?("auto"!==e.height&&n.height(i),t.hide(),e.header!==!1&&r.find(">.om-panel-tool >.om-panel-tool-collapse").removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand")):(t.show(),"auto"!==e.height&&n.height(i+t.outerHeight()),e.header!==!1&&r.find(">.om-panel-tool >.om-panel-tool-expand").removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse")),e.closed!==!1?this._hide(n):this._show(n),this.reload()},_hide:function(e){"hidden"===this.options._closeMode?e.hide():"visibility"===this.options._closeMode&&e.addClass("om-helper-hidden-accessible")},_show:function(e){"hidden"===this.options._closeMode?e.show():"visibility"===this.options._closeMode&&e.removeClass("om-helper-hidden-accessible")},_bindEvent:function(){var t=this,n=this.element,r=this.options,i=n.prev();r.collapsible!==!1&&i.click(function(n){e(n.target).is(".om-panel-icon,.om-panel-title,.om-panel-header")&&(r.collapsed!==!1?t.expand():t.collapse())}).find(".om-panel-tool-collapse , .om-panel-tool-expand").click(function(){r.collapsed!==!1?t.expand():t.collapse()}),r.closable!==!1&&i.find(".om-panel-tool-close").click(function(e){t.close()})},_renderHeader:function(){this.header&&this.header.remove();if(this.options.header===!1)return;var t=this,r=this.options,i=r.tools,s=this.header=e("<div class='om-panel-header'></div>").insertBefore(this.element);r._helpMsg&&s.parent().addClass("helpMsg"),r.iconCls&&e("<div class='om-icon om-panel-icon'></div>").addClass(r.iconCls).appendTo(s),e("<div class='om-panel-title'></div>").html(r.title).appendTo(s),$tool=e("<div class='om-panel-tool'></div>"),r.collapsible!==!1&&e("<div class='om-icon om-panel-tool-collapse'></div>").appendTo($tool);if(e.isArray(i))for(var o=0,u=i.length;o<u;o++){var f=i[o],l;(l=this._getInnerToolCls(f.id))?e("<div class='om-icon'></div>").addClass(l).click(function(e){f.handler.call(this,t,e)}).appendTo($tool):typeof f.iconCls=="string"?e("<div class='om-icon'></div>").addClass(f.iconCls).click(function(e){f.handler.call(this,t,e)}).appendTo($tool):e.isArray(f.iconCls)&&function(n){e("<div class='om-icon'></div>").addClass(n.iconCls[0]).click(function(e){n.handler.call(this,t,e)}).hover(function(){n.iconCls[1]&&e(this).toggleClass(n.iconCls[1])}).appendTo($tool)}(f)}else try{e(i).appendTo($tool)}catch(c){throw"bad format of jquery selector."}r.closable!==!1&&e("<div class='om-icon om-panel-tool-close'></div>").appendTo($tool),$tool.find(">div.om-icon").hover(function(){var t=this;e.each(n,function(){e(t).hasClass(this)&&e(t).toggleClass(this+"-hover")})}),$tool.appendTo(s)},_resize:function(e){var t=this.element,n=t.prev(),e=t.parent(),r=this.options;if(r.width=="fit")r.width="100%",e.width("100%"),n.css("width",""),t.css("width","");else if(r.width!=="auto")e.width(r.width),n.outerWidth(e.width()),t.outerWidth(e.width());else{var i=t.attr("style");i&&i.indexOf("width")!==-1?(e.width(t.outerWidth()),n.outerWidth(t.outerWidth())):(e.css("width",""),n.css("width",""),t.css("width",""))}if(r.height=="fit")r.height="100%",e.height("100%"),t.outerHeight(e.height()-(this.options.header!==!1?n.outerHeight():0));else if(r.height!=="auto")e.height(r.height),t.outerHeight(e.height()-(this.options.header!==!1?n.outerHeight():0));else{var i=t.attr("style");i&&i.indexOf("height")!==-1?e.height(n.outerHeight()+t.outerHeight()):(e.css("height",""),t.css("height",""))}},_getInnerToolCls:function(n){return e.inArray(n,t)!=-1?"om-panel-tool-"+n:null},_showLoadingMessage:function(){var t=this.options,n=this.element,r=n.next(".om-panel-loadingMessage"),i={width:n.innerWidth(),height:n.innerHeight(),left:n.position().left+parseInt(n.css("border-left-width")),top:n.position().top};r.length===0?"default"===t.loadingMessage?e("<div class='om-panel-loadingMessage'><div class='valignMiddle'><div class='loadingImg'></div></div></div>").css(i).appendTo(n.parent()):e("<div class='om-panel-loadingMessage'></div>").appendTo(n.parent()).html(t.loadingMessage).css(i):r.css(i).show()},_hideLoadingMessage:function(){this.element.parent().find(".om-panel-loadingMessage").hide()},setTitle:function(e){this.element.prev().find(">.om-panel-title").html(e)},setIconClass:function(t){var n=this.element.prev(),r=n.find(">.om-panel-icon");t==null&&r.length!==0?r.remove():(r.length==0&&(r=e("<div class='om-icon om-panel-icon'></div>").insertBefore(n.find(">.om-panel-title"))),this.options.iconCls&&r.removeClass(this.options.iconCls),r.addClass(t),this.options.iconCls=t)},open:function(){var e=this.element,t=this.options;if(t.closed){if(t.onBeforeOpen&&this._trigger("onBeforeOpen")===!1)return;this._show(e.parent()),t.closed=!1,t.onOpen&&this._trigger("onOpen")}},close:function(){var e=this.element,t=this.options;if(!t.closed){if(t.onBeforeClose&&this._trigger("onBeforeClose")===!1)return;this._hide(e.parent()),t.closed=!0,t.onClose&&this._trigger("onClose")}},reload:function(t){var n=this.options,r=this.element,i=this;if(r.data("loading"))return;r.data("loading",!0),t=t||n.url;if(!t){r.data("loading",!1);return}n.url=t,this._showLoadingMessage(),e.ajax(t,{cache:!1,success:function(e,t,s){r.html(n.preProcess?n.preProcess.call(r[0],e,t):e),r.data("loading",!1),i._hideLoadingMessage(),n.onSuccess&&i._trigger("onSuccess",null,e,t,s)},error:function(e,t,s){r.data("loading",!1),i._hideLoadingMessage(),n.onError&&i._trigger("onError",null,e,t,s)}})},resize:function(t){var n=this.options,r,i;e.isPlainObject(t)?(r=t.width||null,i=t.height||null):(r=arguments[0],i=arguments[1]),n.width=r||n.width,n.height=i||n.height,this._resize(this.element.parent())},collapse:function(){var e=this,t=this.element,n=t.prev(),i=t.parent(),s=t.next(".om-panel-loadingMessage"),o=this.options,u=r.anim,a=r.speed;arguments[0]!=undefined&&(u=arguments[0]),a=arguments[1]||a;if(o.onBeforeCollapse&&e._trigger("onBeforeCollapse")===!1)return;i.stop(!0,!0);if(n.length!==0){var f=n.find("> .om-panel-tool > div.om-panel-tool-collapse");f.length!==0&&(f.removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand"),f.hasClass("om-panel-tool-collapse-hover")&&f.toggleClass("om-panel-tool-collapse-hover om-panel-tool-expand-hover"))}i.animate({height:"-="+t.outerHeight()},u?a||"normal":0,function(){t.hide(),s.hide(),"auto"===o.height&&i.css("height",""),o.onCollapse&&e._trigger("onCollapse")}),o.collapsed=!0},expand:function(){var e=this,t=this.element,n=t.prev(),i=t.parent(),s=t.next(".om-panel-loadingMessage"),o=this.options,u=r.anim,a=r.speed;arguments[0]!=undefined&&(u=arguments[0]),a=arguments[1]||a;if(o.onBeforeExpand&&e._trigger("onBeforeExpand")===!1)return;i.stop(!0,!0);if(n.length!==0){var f=n.find("> .om-panel-tool > div.om-panel-tool-expand");f.length!==0&&(f.removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse"),f.hasClass("om-panel-tool-expand-hover")&&f.toggleClass("om-panel-tool-expand-hover om-panel-tool-collapse-hover"))}"auto"===o.height&&i.height(n.outerHeight()),t.show(),t.data("loading")&&s.show(),i.animate({height:"+="+t.outerHeight()},u?a||"normal":0,function(){"auto"===o.height&&i.css("height",""),o.onExpand&&e._trigger("onExpand")}),o.collapsed=!1},destroy:function(){var e=this.element;e.parent().after(e).remove()}})}(jQuery),function(e){e.omWidget("om.omGrid",{options:{height:462,width:"100%",colModel:!1,autoFit:!1,showIndex:!0,dataSource:!1,extraData:{},method:"GET",preProcess:!1,limit:15,pageShow:[10,20,50,100,200,500,1000],rowClasses:["oddRow","evenRow"],singleSelect:!0,title:"",onRowSelect:function(e,t,n){},onRowDeselect:function(e,t,n){},onRowClick:function(e,t,n){},onRowDblClick:function(e,t,n){},onPageChange:function(e,t,n){},onSuccess:function(e,t,n,r){},onError:function(e,t,n,r){},onRefresh:function(e,t,n){},_onRefreshCallbacks:[],_onResizableCallbacks:[],_onResizeCallbacks:[]},_create:function(){var t=this.options,n=this.element.show().attr({cellPadding:0,cellSpacing:0,border:0}).empty().append("<tbody></tbody>");n.wrap('<div class="om-grid om-widget om-widget-content"><div class="bDiv" style="width:auto"></div></div>').closest(".om-grid");if(!e.isArray(this._getColModel()))return;this.hDiv=e('<div class="hDiv om-state-default"></div>').append('<div class="hDivBox"><table cellPadding="0" cellSpacing="0"></table></div>'),n.parent().before(this.hDiv),this.pDiv=e('<div class="pDiv om-state-default"></div>'),n.parent().after(this.pDiv);var r=n.closest(".om-grid");this.loadMask=e('<div class="gBlock"><div align="center" class="gBlock-valignMiddle" ><div class="loadingImg" style="display:block"/></div></div>').mousedown(function(e){return!1}).hide(),r.append(this.loadMask),this.titleDiv=e("<div class='titleDiv'></div>"),r.prepend(this.titleDiv),this.tbody=this.element.children().eq(0),this._guid=0,t._onRefreshCallbacks.push(function(){this._refreshHeaderCheckBox()}),this._bindScrollEnvent()},_init:function(){var t=this.element,n=this.options,r=t.closest(".om-grid");this._measure(r,n);if(!e.isArray(this._getColModel()))return;this._extraData={},this.tbody.empty(),e("table",this.hDiv).empty(),this.pDiv.empty(),this.titleDiv.empty(),this._buildTableHead(),this._buildPagingToolBar(),this._buildLoadMask(),this._bindSelectAndClickEnvent(),this._makeColsResizable(),this._buildTitle(),this._resetHeight(),this.pageData={nowPage:1,totalPages:1},this._populate()},resize:function(t){var n=this,r=this.options,i=this.element.closest(".om-grid"),s,o;t=t||{},r.width=t.width||arguments[0]||r.width,r.height=t.height||arguments[1]||r.height,this._measure(i,r),this._buildLoadMask(),this._resetWidth(),this._resetHeight(),e.each(r._onResizeCallbacks,function(e,t){t.call(n)})},_measure:function(e,t){e.outerWidth(t.width==="fit"?e.parent().width():t.width),e.outerHeight(t.height==="fit"?e.parent().height():t.height)},_resetHeight:function(){var e=this.element,t=e.closest(".om-grid"),n=this.hDiv.outerHeight(!0),r=this.pDiv.is(":hidden")?0:this.pDiv.outerHeight(!0),i=this.titleDiv.is(":hidden")?0:this.titleDiv.outerHeight(!0);t.children(".bDiv").outerHeight(t.height()-n-r-i)},_resetWidth:function(){var t=this.options,n=this._getColModel(),r=-1,i=this.element.closest(".om-grid"),s=e("thead",this.hDiv),o=0;e.each(n,function(e,t){var n=t.width||60;t.width=="autoExpand"&&(n=0,r=
e),s.find("th[axis='col"+e+"'] >div").width(n),o+=n}),this._fixHeaderWidth(r,o);var u={};e(this._getHeaderCols()).each(function(){u[e(this).attr("abbr")]=e("div",e(this)).width()}),this.tbody.find("td[abbr]").each(function(t,n){var r=e(n).prop("abbr");u[r]!=null&&e(n).find(">div:first").width(u[r])})},_getColModel:function(){return this.options.colModel},_buildTitle:function(){var e=this.titleDiv;this.options.title?e.html("<div class='titleContent'>"+this.options.title+"</div>").show():e.empty().hide()},_fixHeaderWidth:function(t,n){var r=this.element.closest(".om-grid"),i=e("thead",this.hDiv),s=this._getColModel(),o=this.options;if(t!=-1){var u=r.width()-32,f=i.find('th[axis="col'+t+'"] div');f.parent().hide();var l=u-i.width();f.parent().show(),l<=0?f.css("width",60):f.css("width",l)}else if(o.autoFit){var u=r.width()-22,l=u-i.width(),c=1+l/n,h=i.find('th[axis^="col"] >div');e.each(s,function(e){var t=h.eq(e);t.width(parseInt(t.width()*c))})}},_buildTableHead:function(){var t=this.options,n=this.element,r=n.closest(".om-grid"),i=this._getColModel(),s=0,o=0,u=0,f=-1;thead=e("<thead></thead>"),tr=e("<tr></tr>").appendTo(thead);if(t.showIndex){var l=e("<th></th>").attr({axis:"indexCol",align:"center"}).addClass("indexCol").append(e('<div class="indexheader" style="text-align:center;width:25px;"></div>'));tr.append(l),o=25}if(!t.singleSelect){var l=e("<th></th>").attr({axis:"checkboxCol",align:"center"}).addClass("checkboxCol").append(e('<div class="checkboxheader" style="text-align:center;width:17px;"><span class="checkbox"/></div>'));tr.append(l),u=17}for(var c=0,h=i.length;c<h;c++){var p=i[c],d=p.width||60,v=p.align||"center";d=="autoExpand"&&(d=0,f=c);var m=e("<div></div>").html(p.header).css({"text-align":v,width:d});p.wrap&&m.addClass("wrap");var g=e("<th></th>").attr("axis","col"+c).addClass("col"+c).append(m);p.name&&g.attr("abbr",p.name),p.align&&g.attr("align",p.align),s+=d,tr.append(g)}n.prepend(thead),e("table",this.hDiv).append(thead),this._fixHeaderWidth(f,s),this.thead=thead,thead=null},_buildPagingToolBar:function(){var t=this.options;if(t.limit<=0){this.pDiv.css("border-width",0).hide(),this.pager=this.pDiv;return}var n=this,r=this.element,i=this.pDiv;i.show().html('<div class="pDiv2"><div class="pGroup2"></div><div class="pGroup"><div class="pFirst pButton om-icon"><span class="om-icon-seek-start"></span></div><div class="pPrev pButton om-icon"><span class="om-icon-seek-prev"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pControl"></span></div><div class="btnseparator"></div><div class="pGroup"><div class="pNext pButton om-icon"><span class="om-icon-seek-next"></span></div><div class="pLast pButton om-icon"><span class="om-icon-seek-end"></span></div></div><div class="btnseparator"></div><div class="pGroup"><div class="pReload pButton om-icon"><span class="om-icon-refresh"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div></div>'),e(".pGroup2",i).append("<select></select>");var s=0;for(var o=0;o<n.options.pageShow.length;o++)n.options.pageShow[o]<n.options.limit?e("select",i).append("<option value='"+n.options.pageShow[o]+"'>"+n.options.pageShow[o]+"</option>"):s==0&&n.options.pageShow[o]>n.options.limit?(s=1,e("select",i).append("<option value='"+n.options.limit+"'>"+n.options.limit+"</option>"),e("select",i).append("<option value='"+n.options.pageShow[o]+"'>"+n.options.pageShow[o]+"</option>")):n.options.pageShow[o]==n.options.limit?(s=1,e("select",i).append("<option value='"+n.options.pageShow[o]+"'>"+n.options.pageShow[o]+"</option>")):e("select",i).append("<option value='"+n.options.pageShow[o]+"'>"+n.options.pageShow[o]+"</option>");e("select",i).val(n.options.limit),e("select",i).change(function(){n.options.limit=e("select",i).children("option:selected").val(),n._populate()});var u=e.om.lang._get(t,"omGrid","pageText").replace(/{totalPage}/,"<span>1</span>").replace(/{index}/,'<input type="text" size="4" value="1" />');e(".pControl",i).html(u),r.parent().after(i),e(".pReload",i).click(function(){n._populate()}),e(".pFirst",i).click(function(){n._changePage("first")}),e(".pPrev",i).click(function(){n._changePage("prev")}),e(".pNext",i).click(function(){n._changePage("next")}),e(".pLast",i).click(function(){n._changePage("last")}),e(".pControl input",i).keydown(function(t){t.keyCode==e.om.keyCode.ENTER&&n._changePage("input")}),e(".pButton",i).hover(function(){e(this).addClass("om-state-hover")},function(){e(this).removeClass("om-state-hover")}),this.pager=i},_buildLoadMask:function(){var e=this.element.closest(".om-grid");this.loadMask.css({width:"100%",height:e.height()})},_changePage:function(t){if(this.loading)return!0;var n=this.element,r=this.options,i=n.closest(".om-grid"),s=this.pageData,o=s.nowPage,u=s.totalPages,f=o;this._oldPage=o;switch(t){case"first":f=1;break;case"prev":o>1&&(f=o-1);break;case"next":o<u&&(f=o+1);break;case"last":f=u;break;case"input":var l=parseInt(e(".pControl input",n.closest(".om-grid")).val());isNaN(l)&&(l=o),l<1?l=1:l>u&&(l=u),e(".pControl input",this.pDiv).val(l),f=l;break;default:if(/\d/.test(t)){var l=parseInt(t);isNaN(l)&&(l=1),l<1?l=1:l>u&&(l=u),e(".pControl input",n.closest(".om-grid")).val(l),f=l}}if(f==o)return!1;if(this._trigger("onPageChange",null,t,f)===!1)return;s.nowPage=f,this._populate()},_populate:function(){var t=this,n=this.element,r=n.closest(".om-grid"),i=this.options,s=e(".pPageStat",r);if(!i.dataSource)return e(".pPageStat",r).html(i.emptygMsg),!1;if(this.loading)return!0;var o=this.pageData,u=o.nowPage||1,f=e(".gBlock",r);this.loading=!0,s.html(e.om.lang._get(i,"omGrid","loadingMsg")),f.show();var l=i.limit<=0?1e8:e("select",r).children("option:selected").val(),c=e.extend(!0,{},this._extraData,i.extraData,{start:l*(u-1),limit:l,_time_stamp_:(new Date).getTime()});e.ajax({type:i.method,url:i.dataSource,data:c,dataType:"json",success:function(e,n,r){var s=i.onSuccess;typeof s=="function"&&t._trigger("onSuccess",null,e,n,r),t._addData(e);for(var o=0,a=i._onRefreshCallbacks.length;o<a;o++)i._onRefreshCallbacks[o].call(t);t._trigger("onRefresh",null,u,e.rows),f.hide(),t.loading=!1},error:function(n,r,o){s.html(e.om.lang._get(i,"omGrid","errorMsg")).css("color","red");try{var u=i.onError;typeof u=="function"&&u(n,r,o)}catch(l){}finally{return f.hide(),t.loading=!1,t.pageData.data={rows:[],total:0},!1}}})},_addData:function(t){var n=this.options,r=this.element,i=r.closest(".om-grid"),s=e(".pPageStat",i),o=n.preProcess,u=this.pageData;o&&(t=o(t)),u.data=t,u.totalPages=Math.ceil(t.total/e("select",i).children("option:selected").val()),this._buildPager(),this._renderDatas()},_buildPager:function(){var t=this.options;if(t.limit<=0)return;var n=this.element,r=this.pager,i=e(".pControl",r),s=this.pageData,o=s.nowPage,u=s.totalPages,f=s.data,l=t.limit*(o-1)+1,c=l-1+f.rows.length,h="";f.total===0?h=e.om.lang._get(t,"omGrid","emptyMsg"):h=e.om.lang._get(t,"omGrid","pageStat").replace(/{from}/,l).replace(/{to}/,c).replace(/{total}/,f.total),e("input",i).val(o),e("span",i).html(u),e(".pPageStat",r).html(h)},_renderDatas:function(){var t=this,n=this.element,r=this.options,i=n.closest(".om-grid"),s=this._getHeaderCols(),o=this.pageData.data.rows||[],u=this._getColModel(),f=r.rowClasses,l=e("tbody",n).empty(),c=typeof f=="function",h=this.pageData,p=(h.nowPage-1)*r.limit,d="<td align='$' abbr='$' class='$'><div align='$' class='innerCol $' style='width:$px'>$</div></td>",v=[],m=[],g,y;this.pageData.data.rows||(this.pageData.data.rows=[]),t.hDiv.scrollLeft(0),e(s).each(function(t){v[t]=e("div",e(this)).width()}),e.each(o,function(n,r){var i=c?f(n,r):f[n%f.length],o=t._buildRowCellValues(u,r,n);m.push("<tr _grid_row_id="+t._guid++ +" class='om-grid-row "+i+"'>"),e(s).each(function(t){var r=e(this).attr("axis"),i=!1,s;if(r=="indexCol")s=n+p+1;else if(r=="checkboxCol")s='<span class="checkbox"/>';else if(r.substring(0,3)=="col"){var f=r.substring(3);s=o[f],u[f].wrap&&(i=!0)}else s="";g=[this.align,this.abbr,r,this.align,i?"wrap":"",v[t],s],y=0,m.push(d.replace(/\$/g,function(){return g[y++]}))}),m.push("</tr>")}),l.html(m.join(" "))},_getHeaderCols:function(){return this.hDiv.find("th[axis]")},_buildRowCellValues:function(e,t,n){var r=e.length,i=[];for(var s=0;s<r;s++){var o=e[s],u,a=o.renderer;if(o.name.indexOf(".")>0){var f=o.name.split("."),l=1,c=f.length,u=t[f[0]];while(l<c&&u&&(u=u[f[l++]])!=undefined);}u==undefined&&(u=t[o.name]==undefined?"":t[o.name]),typeof a=="function"&&(u=a(u,t,n)),i[s]=u,u=null}return i},_bindScrollEnvent:function(){var t=this;this.tbody.closest(".bDiv").scroll(function(){t.hDiv.scrollLeft(e(this).scrollLeft())})},_bindSelectAndClickEnvent:function(){var t=this;this.tbody.unbind(),this.options.singleSelect?(this.tbody.delegate("tr.om-grid-row","click",function(n){var r=e(this),i=t._getRowIndex(r);if(!r.hasClass("om-state-highlight")){var s=t._getRowIndex(t.tbody.find("tr.om-state-highlight:not(:hidden)"));s!=-1&&t._rowDeSelect(s),t._rowSelect(i)}t._trigger("onRowClick",n,i,t._getRowData(i))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(e){var n=t._getRowIndex(this);t._trigger("onRowDblClick",e,n,t._getRowData(n))})):(e("th.checkboxCol span.checkbox",this.thead).click(function(){var n=e(this),r=t._getTrs().size();if(n.hasClass("selected")){n.removeClass("selected");for(var i=0;i<r;i++)t._rowDeSelect(i)}else{n.addClass("selected");for(var i=0;i<r;i++)t._rowSelect(i)}}),this.tbody.delegate("tr.om-grid-row","click",function(n){var r=e(this),i=t._getRowIndex(r);r.hasClass("om-state-highlight")?t._rowDeSelect(i):t._rowSelect(i),t._refreshHeaderCheckBox(),t._trigger("onRowClick",n,i,t._getRowData(i))}),this.tbody.delegate("tr.om-grid-row","dblclick",function(n){var r=e(this),i=t._getRowIndex(r);r.hasClass("om-state-highlight")||(t._rowSelect(i),t._refreshHeaderCheckBox()),t._trigger("onRowDblClick",n,i,t._getRowData(i))}))},_getRowData:function(e){return this.pageData.data.rows[e]},_rowSelect:function(t){var n=this.element,r=this.options,i=e("tbody",n),s=this._getTrs().eq(t),o=e("td.checkboxCol span.checkbox",s);s.addClass("om-state-highlight"),o.addClass("selected"),this._trigger("onRowSelect",null,t,this._getRowData(t))},_rowDeSelect:function(t){var n=this.element,r=this.options,i=e("tbody",n),s=this._getTrs().eq(t),o=e("td.checkboxCol span.checkbox",s);s.removeClass("om-state-highlight"),o.removeClass("selected"),this._trigger("onRowDeselect",null,t,this._getRowData(t))},_refreshHeaderCheckBox:function(){var t=this.getSelections(),n=this._getTrs(),r=e("th.checkboxCol span.checkbox",this.thead),i=n.length;r.toggleClass("selected",i>0&&i==t.length)},_makeColsResizable:function(){var t=this,n=t.tbody.closest(".bDiv"),r=t.element.closest(".om-grid"),i=this.titleDiv,s;e('th[axis^="col"] div',t.thead).omResizable({handles:"e",containment:"document",minWidth:60,resize:function(s,o){var u=e(this),f=u.parent().attr("abbr"),l=e('td[abbr="'+f+'"] > div',t.tbody),h=t.thead.closest(".hDiv");u.width(s.size.width).height(""),l.width(s.size.width).height(""),n.height(r.height()-(i.is(":hidden")?0:i.outerHeight(!0))-h.outerHeight(!0)-(t.pDiv.is(":hidden")?0:t.pDiv.outerHeight(!0))),h.scrollLeft(n.scrollLeft())},start:function(t,n){s=e(this).parent().width()},stop:function(r,i){var o=t.options._onResizableCallbacks,u=e(this).parent(),l=t.thead.closest(".hDiv");s=u.width()-s;for(var c=0,h=o.length;c<h;c++)o[c].call(t,u,s);l.scrollLeft(n.scrollLeft())}})},_getRowIndex:function(e){return this._getTrs().index(e)},_getTrs:function(){return this.tbody.find("tr.om-grid-row:not([_delete]=true)")},setData:function(e){this.options.dataSource=e,this.pageData={nowPage:1,totalPages:1},this._populate()},getData:function(){return this.pageData.data},refresh:function(){if(this.loading)return!0;this.loading=!0;var t=this.options;e(".pPageStat",this.pager).html(e.om.lang._get(t,"omGrid","loadingMsg")),this.loadMask.show(),this._buildPager(),this._renderDatas(),this._trigger("onRefresh",null,this.pageData.nowPage||1,this.pageData.data.rows);for(var n=0,r=t._onRefreshCallbacks.length;n<r;n++)t._onRefreshCallbacks[n].call(this);this.loadMask.hide(),this.loading=!1},reload:function(e){if(this.loading)return!0;typeof e!="undefined"&&(e=parseInt(e)||1,e<0&&(e=1),e>this.pageData.totalPages&&(e=this.pageData.totalPages),this.pageData.nowPage=e),this._populate()},setSelections:function(t){var n=this;e.isArray(t)||(t=[t]);var r=this.getSelections();e(r).each(function(){n._rowDeSelect(this)}),e(t).each(function(){n._rowSelect(this)}),n._refreshHeaderCheckBox()},getSelections:function(e){var t=this,n=t._getTrs(),r=n.filter(".om-state-highlight"),i=[];if(e){var s=t.getData().rows;r.each(function(e,t){i[i.length]=s[n.index(t)]})}else r.each(function(e,t){i[i.length]=n.index(t)});return i},destroy:function(){var e=this.element;e.closest(".om-grid").after(e).remove()}}),e.om.lang.omGrid={loadingMsg:"...",emptyMsg:"",errorMsg:"",pageText:"{index}{totalPage}",pageStat:"{total}{from}-{to}"}}(jQuery),function(e,t){var n="om-accordion-panel-"+((1+Math.random())*65536|0).toString(16).substring(1)+"-",r=0;e.omWidget("om.omAccordion",{options:{active:0,autoPlay:!1,collapsible:!1,disabled:!1,height:"auto",header:"> ul:first li",iconCls:null,interval:1e3,switchEffect:!1,switchMode:"click",width:"auto",onActivate:function(e,t){},onBeforeActivate:function(e,t){},onBeforeCollapse:function(e,t){},onCollapse:function(e,t){}},activate:function(e){var t=this.options;clearInterval(t.autoInterId),this._activate(e),this._setAutoInterId(this)},disable:function(){var t=this.element,n=this.options,r;n.autoPlay&&clearInterval(n.autoInterId),n.disabled=!0,(r=t.find(">.om-accordion-disable")).length===0&&e("<div class='om-accordion-disable'></div>").css({position:"absolute",top:0,left:0}).width(t.outerWidth()).height(t.outerHeight()).appendTo(t),r.show()},enable:function(){this.options.disabled=!1,this.element.find(">.om-accordion-disable").hide()},getActivated:function(){var t=e.data(this.element,"panels");for(var n=0,r=t.length;n<r;n++)if(!t[n].omPanel("option","collapsed"))return t[n].prop("id");return null},getLength:function(){return e.data(this.element,"panels").length},reload:function(t){var n=e.data(this.element,"panels");if(this.options.disabled!==!1||n.length===0)return this;t=this._correctIndex(t),n[t].omPanel("reload")},resize:function(){var t=this.element,n=this.options,r=e.data(this.element,"panels"),i=0;this._initWidthOrHeight("width"),this._initWidthOrHeight("height"),e.each(r,function(e,t){i+=t.prev().outerHeight()}),e.each(r,function(e,r){n.height==="auto"?r.css("height",""):r.outerHeight(t.height()-i)})},setTitle:function(t,n){var r=e.data(this.element,"panels");if(this.options.disabled!==!1||r.length===0)return this;t=this._correctIndex(t),r[t].omPanel("setTitle",n)},url:function(t,n){var r=e.data(this.element,"panels");if(!n||this.options.disabled!==!1||r.length===0)return;t=this._correctIndex(t),r[t].omPanel("option","url",n)},_create:function(){var e=this.element,t=this.options;e.addClass("om-widget om-accordion").css("position","relative"),this._renderPanels(),t.active=this._correctIndex(t.active),this.resize(),this._buildEvent(),t.disabled!==!1&&this.disable()},_correctIndex:function(t){var n=this.element,r=e.data(this.element,"panels"),i=n.children().find(">div#"+t),s=r.length,o=t;t=i.length?n.find(">.om-panel").index(i.parent()):t,t=t==-1?o:t;var u=parseInt(t);return u=(isNaN(u)&&"0"||u)-0,s==0||u===-1&&this.options.collapsible!==!1?-1:u<0?0:u>=s?s-1:u},_panelCreateCollapse:function(e,t){var n=this.element,r=this.options,i,s;if(r.active===-1&&r.collapsible===!0)return!0;i=n.find(">div#"+r.active),s=n.children().index(i),s=s==-1?r.active:s;var o=parseInt(s);return o=(isNaN(o)&&"0"||o)-0,o=o<0?0:o>=e?e-1:o,o!==t},_renderPanels:function(){var t=this.element,i=this,s=[],o=this.options,u=t.find(o.header),f=[],l;u.find("a").each(function(s){var u=this.getAttribute("href",2),c=u.split("#")[0],h;c&&(c===location.toString().split("#")[0]||(h=e("base")[0])&&c===h.href)&&(u=this.hash,this.href=u);var p=e(this);f[s]={title:p.text(),iconCls:p.attr("iconCls"),onExpand:function(e){i._trigger("onActivate",e,s)},tools:[{id:"collapse",handler:function(e,t){clearInterval(o.autoInterId),i._activate(s,!0),i._setAutoInterId(i),t.stopPropagation()}}],onCollapse:function(e){i._trigger("onCollapse",e,s)},onSuccess:function(){i.resize()},onError:function(){i.resize()}};var v=e(">"+u,t),m=v.prop("id");v[0]?(m||v.prop("id",m=n+r++),v.appendTo(t)):(f[s].url=p.attr("href"),e("<div></div>").prop("id",m=p.prop("id")||n+r++).appendTo(t)),l=l||m}),l&&t.find("#"+l).prevAll().remove(),u.remove(),e.each(f,function(e,t){t.collapsed=i._panelCreateCollapse(f.length,e)}),e.each(t.children(),function(e,t){s.push(i._createPanel(t,f[e]));if(e===0){var n=s[0].prev();n.css("border-top-width",n.css("border-bottom-width"))}}),e.data(t,"panels",s)},_initWidthOrHeight:function(e){var t=this.element,n=this.options,r=this.element.attr("style"),i=n[e];i=="fit"?t.css(e,"100%"):i!=="auto"?t.css(e,i):r&&r.indexOf(e)!=-1?n[e]=t.css(e):t.css(e,"")},_createPanel:function(t,n){return e(t).omPanel(n)},_buildEvent:function(){var t=this.options,n=this;this.element.children().find(">div.om-panel-header").each(function(r){var i=e(this);i.unbind(),t.switchMode=="mouseover"?i.bind("mouseenter.omaccordions",function(i){clearInterval(t.autoInterId);var s=e.data(n.element,"expandTimer");typeof s!="undefined"&&clearTimeout(s),s=setTimeout(function(){n._activate(r,!0),n._setAutoInterId(n)},200),e.data(n.element,"expandTimer",s)}):t.switchMode=="click"&&i.bind("click.omaccordions",function(e){clearInterval(t.autoInterId),n._activate(r,!0),n._setAutoInterId(n)}),i.hover(function(){e(this).toggleClass("om-panel-header-hover")})}),t.autoPlay&&(clearInterval(t.autoInterId),n._setAutoInterId(n))},_setAutoInterId:function(e){var t=e.options;t.autoPlay&&(t.autoInterId=setInterval(function(){e._activate("next")},t.interval))},_setOption:function(t,n){e.OMWidget.prototype._setOption.apply(this,arguments);var r=this.options;switch(t){case"active":this.activate(n);break;case"disabled":n===!1?this.enable():this.disable();break;case"width":r.width=n,this._initWidthOrHeight("width");break;case"height":r.height=n,this._initWidthOrHeight("height")}},_activate:function(t,n){var r=e.data(this.element,"panels"),i=r.length,s=this.options,o=this,u=!1,a=-1,f=!1,l;if(s.disabled!==!1&&i===0)return;t=t==="next"?(s.active+1)%i:o._correctIndex(t),s.switchEffect&&(f=!0,l="fast");for(var c=0;c<i;c++)e(r[c]).stop(!0,!0);var h=o.getActivated();u=!!h,u?(a=o._correctIndex(h),a==t?n===!0&&s.collapsible!==!1&&o._trigger("onBeforeCollapse",null,a)!==!1?(e(r[a]).omPanel("collapse",f,l),s.active=-1):s.active=a:t===-1?o._trigger("onBeforeCollapse",null,a)!==!1?(e(r[a]).omPanel("collapse",f,l),s.active=-1):s.active=a:o._trigger("onBeforeCollapse",null,a)!==!1&&(canAct=o._trigger("onBeforeActivate",null,t)!==!1)?(e(r[a]).omPanel("collapse",f,l),e(r[t]).omPanel("expand",f,l),s.active=t):s.active=a):t==="-1"?s.active=-1:o._trigger("onBeforeActivate",null,t)!==!1&&(e(r[t]).omPanel("expand",f,l),s.active=t)}})}(jQuery),function(e){function t(){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}e.fn.omAjaxSubmit=function(n){function E(i){function T(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function N(){function u(){try{var e=T(d).readyState;t("state = "+e),e.toLowerCase()=="uninitialized"&&setTimeout(u,50)}catch(n){t("Server abort: ",n," (",n.name,")"),O(x),w&&clearTimeout(w),w=undefined}}var n=o.attr("target"),i=o.attr("action");s.setAttribute("target",h),r||s.setAttribute("method","POST"),i!=l.url&&s.setAttribute("action",l.url),!l.skipEncodingOverride&&(!r||/post/i.test(r))&&o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){y=!0,O(S)},l.timeout));var f=[];try{if(l.extraData)for(var c in l.extraData)f.push(e('<input type="hidden" name="'+c+'" />').attr("value",l.extraData[c]).appendTo(s)[0]);l.iframeTarget||(p.appendTo("body"),d.attachEvent?d.attachEvent("onload",O):d.addEventListener("load",O,!1)),setTimeout(u,15),s.submit()}finally{s.setAttribute("action",i),n?s.setAttribute("target",n):o.removeAttr("target"),e(f).remove()}}function O(n){if(v.aborted||A)return;try{k=T(d)}catch(r){t("cannot access response document: ",r),n=x}if(n===S&&v){v.abort("timeout");return}if(n==x&&v){v.abort("server abort");return}if(!k||k.location.href==l.iframeSrc)if(!y)return;d.detachEvent?d.detachEvent("onload",O):d.removeEventListener("load",O,!1);var i="success",s;try{if(y)throw"timeout";var o=l.dataType=="xml"||k.XMLDocument||e.isXMLDoc(k);t("isXml="+o);if(!o&&window.opera&&(k.body==null||k.body.innerHTML=="")&&--L){t("requeing onLoad callback, DOM not available"),setTimeout(O,250);return}var u=k.body?k.body:k.documentElement;v.responseText=u?u.innerHTML:null,v.responseXML=k.XMLDocument?k.XMLDocument:k,o&&(l.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e]},u&&(v.status=Number(u.getAttribute("status"))||v.status,v.statusText=u.getAttribute("statusText")||v.statusText);var f=l.dataType||"",h=/(json|script|text)/.test(f.toLowerCase());if(h||l.textarea){var m=k.getElementsByTagName("textarea")[0];if(m)v.responseText=m.value,v.status=Number(m.getAttribute("status"))||v.status,v.statusText=m.getAttribute("statusText")||v.statusText;else if(h){var g=k.getElementsByTagName("pre")[0],E=k.getElementsByTagName("body")[0];g?v.responseText=g.textContent?g.textContent:g.innerHTML:E&&(v.responseText=E.innerHTML)}}else l.dataType=="xml"&&!v.responseXML&&v.responseText!=null&&(v.responseXML=M(v.responseText));try{C=D(v,l.dataType,l)}catch(n){i="parsererror",v.error=s=n||i}}catch(n){t("error caught: ",n),i="error",v.error=s=n||i}v.aborted&&(t("upload aborted"),i=null),v.status&&(i=v.status>=200&&v.status<300||v.status===304?"success":"error"),i==="success"?(l.success&&l.success.call(l.context,C,"success",v),c&&e.event.trigger("ajaxSuccess",[v,l])):i&&(s==undefined&&(s=v.statusText),l.error&&l.error.call(l.context,v,i,s),c&&e.event.trigger("ajaxError",[v,l,s])),c&&e.event.trigger("ajaxComplete",[v,l]),c&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,v,i),A=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget||p.remove(),v.responseXML=null},100)}var s=o[0],u,f,l,c,h,p,d,v,m,g,y,w,E=!!e.fn.prop;if(i)for(f=0;f<i.length;f++)u=e(s[i[f].name]),u[E?"prop":"attr"]("disabled",!1);if(e(":input[name=submit],:input[id=submit]",s).length){alert('Error: Form elements must not have name or id of "submit".');return}l=e.extend(!0,{},e.ajaxSettings,n),l.context=l.context||l,h="jqFormIO"+(new Date).getTime(),l.iframeTarget?(p=e(l.iframeTarget),g=p.attr("name"),g==null?p.attr("name",h):h=g):(p=e('<iframe name="'+h+'" src="'+l.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),d=p[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var r=n==="timeout"?"timeout":"aborted";t("aborting upload... "+r),this.aborted=1,p.attr("src",l.iframeSrc),v.error=r,l.error&&l.error.call(l.context,v,r,n),c&&e.event.trigger("ajaxError",[v,l,r]),l.complete&&l.complete.call(l.context,v,r)}},c=l.global,c&&!(e.active++)&&e.event.trigger("ajaxStart"),c&&e.event.trigger("ajaxSend",[v,l]);if(l.beforeSend&&l.beforeSend.call(l.context,v,l)===!1){l.global&&e.active--;return}if(v.aborted)return;m=s.clk,m&&(g=m.name,g&&!m.disabled&&(l.extraData=l.extraData||{},l.extraData[g]=m.value,m.type=="image"&&(l.extraData[g+".x"]=s.clk_x,l.extraData[g+".y"]=s.clk_y)));var S=1,x=2;l.forceSync?N():setTimeout(N,10);var C,k,L=50,A,M=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},_=e.parseJSON||function(e){return window.eval("("+e+")")},D=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=_(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o}}if(!this.length)return t("omAjaxSubmit: skipping submit process - no element selected"),this;var r,i,s,o=this;typeof n=="function"&&(n={success:n}),r=this.attr("method"),i=this.attr("action"),s=typeof i=="string"?e.trim(i):"",s=s||window.location.href||"",s&&(s=(s.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:s,success:e.ajaxSettings.success,method:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var u={};this.trigger("form-pre-serialize",[this,n,u]);if(u.veto)return t("omAjaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("omAjaxSubmit: submit aborted via beforeSerialize callback"),this;var f,l,c=this.formToArray(n.semantic);if(n.data){n.extraData=n.data;for(f in n.data)if(n.data[f]instanceof Array)for(var h in n.data[f])c.push({name:f,value:n.data[f][h]});else l=n.data[f],l=e.isFunction(l)?l():l,c.push({name:f,value:l})}if(n.beforeSubmit&&n.beforeSubmit(c,this,n)===!1)return t("omAjaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[c,this,n,u]);if(u.veto)return t("omAjaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(c);n.method.toUpperCase()=="GET"?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+p,n.data=null):n.data=p;var d=[];n.resetForm&&d.push(function(){o.resetForm()}),n.clearForm&&d.push(function(){o.clearForm()});if(!n.dataType&&n.target){var v=n.success||function(){};d.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(v,arguments)})}else n.success&&d.push(n.success);n.success=function(e,t,r){var i=n.context||n;for(var s=0,u=d.length;s<u;s++)d[s].apply(i,[e,t,r||o,o])};var m=e("input:file",this).length>0,g="multipart/form-data",y=o.attr("enctype")==g||o.attr("encoding")==g;if(n.iframe!==!1&&(m||n.iframe||y))n.closeKeepAlive?e.get(n.closeKeepAlive,function(){E(c)}):E(c);else{if(e.browser.msie&&r=="get"){var w=o[0].getAttribute("method");typeof w=="string"&&(n.method=w)}n.type=n.method,e.ajax(n)}return this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(this.length===0){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).omAjaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,r=e(n);if(!r.is(":submit,input:image")){var i=r.closest(":submit");if(i.length==0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!=undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(this.length===0)return n;var r=this[0],i=t?r.getElementsByTagName("*"):r.elements;if(!i)return n;var s,o,u,a,f,l,c;for(s=0,l=i.length;s<l;s++){f=i[s],u=f.name;if(!u)continue;if(t&&r.clk&&f.type=="image"){!f.disabled&&r.clk==f&&(n.push({name:u,value:e(f).val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));continue}a=e.fieldValue(f,!0);if(a&&a.constructor==Array)for(o=0,c=a.length;o<c;o++)n.push({name:u,value:a[o]});else a!==null&&typeof a!="undefined"&&n.push({name:u,value:a})}if(!t&&r.clk){var h=e(r.clk),p=h[0];u=p.name,u&&!p.disabled&&p.type=="image"&&(n.push({name:u,value:h.val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){var e=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,n=this.tagName.toLowerCase();e.test(t)||n=="textarea"?this.value="":t=="checkbox"||t=="radio"?this.checked=!1:n=="select"&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})}}(jQuery),function(e){e.omWidget("om.omBorderLayout",{options:{fit:!1,spacing:5,hideCollapsBtn:!1,onBeforeDrag:function(e,t){},onAfterDrag:function(e,t){}},_create:function(){if(!this.options.panels)return;this._minWidth=50,this._minHeight=28,this._buildRegion(),this._resizeRegion(!0),e(window).resize(e.proxy(this,"_resizeRegion"))},_getRegionSize:function(e){var t=this._getRegion(e),n=this._getRegionProxy(e),r={};return r.width=this._regionVisible(t)?t.outerWidth(!0):this._regionVisible(n)?n.outerWidth(!0):0,r.height=this._regionVisible(t)?t.outerHeight(!0):this._regionVisible(n)?n.outerHeight(!0):0,r},_resizeRegion:function(e){var t=this._getRegion("center"),n=this._getRegion("north"),r=this._getRegion("south"),i=this._getRegion("west"),s=this._getRegion("east"),o=this._getRegionProxy("north"),u=this._getRegionProxy("south"),a=this._getRegionProxy("west"),f=this._getRegionProxy("east"),l=this._getRegionSize("north").height;southHeight=this._getRegionSize("south").height,westWidth=this._getRegionSize("west").width,eastWidth=this._getRegionSize("east").width,centerWidth=this._getRegionSize("center").width,layoutWidth=this.element.width(),layoutHeight=this.element.height(),westOpt=this._getPanelOpts("west"),eastOpt=this._getPanelOpts("east"),t.css({top:l,left:westWidth}),t.find(">.om-panel-body").omPanel("resize",{height:layoutHeight-l-southHeight}),e||t.find(">.om-panel-body").omPanel("resize",{width:layoutWidth-westWidth-eastWidth});var c=t.outerHeight(!0);if(n){var h=layoutWidth-(westOpt.expandToTop?westWidth:0)-(eastOpt.expandToTop?eastWidth:0);n.find(">.om-panel-body").omPanel("resize",{width:h}),n.css({left:westOpt.expandToTop?westWidth:0}),o&&o.outerWidth(h).css({left:westOpt.expandToTop?westWidth:0})}if(r){var p=layoutWidth-(westOpt.expandToBottom?westWidth:0)-(eastOpt.expandToBottom?eastWidth:0);r.find(">.om-panel-body").omPanel("resize",{width:p}),r.css({top:layoutHeight-r.outerHeight(!0),left:westOpt.expandToBottom?westWidth:0}),u&&u.outerWidth(p).css({left:westOpt.expandToBottom?westWidth:0})}if(i){var d=westOpt.expandToTop?0:l,v=c+(westOpt.expandToBottom?southHeight:0)+(westOpt.
expandToTop?l:0);i.css({top:d}),i.find(">.om-panel-body").omPanel("resize",{height:v}),a&&(a.css({top:d}),a.outerHeight(v))}if(s){var m=eastOpt.expandToTop?0:l,g=c+(eastOpt.expandToBottom?southHeight:0)+(eastOpt.expandToTop?l:0);s.css({top:m}),s.find(">.om-panel-body").omPanel("resize",{height:g}),f&&(f.css({top:m}),f.outerHeight(g))}if(e){var y=this._getPanelOpts("east")&&!this._getPanelOpts("east").width,b=this._getPanelOpts("west")&&!this._getPanelOpts("west").width,w=!this._getPanelOpts("center").width;if(y||b||w)!w&&y&&b?eastWidth=westWidth=(layoutWidth-centerWidth)/2:w&&!y&&b?centerWidth=westWidth=(layoutWidth-eastWidth)/2:w&&y&&!b?centerWidth=eastWidth=(layoutWidth-westWidth)/2:w&&y&&b&&(eastWidth=westWidth=centerWidth=layoutWidth/3);w&&t.find(">.om-panel-body").omPanel("resize",{width:Math.floor(layoutWidth-westWidth-eastWidth)}),y&&s.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-westWidth-centerWidth)-this.options.spacing}),b&&(i.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-eastWidth-centerWidth)-this.options.spacing}),t.css({left:i.width()+this.options.spacing}))}},_regionVisible:function(e){return e&&e.css("display")!="none"},_createRegionProxy:function(t,n){var r=this,i="";if(n){i='<div class="om-borderlayout-proxy om-borderlayout-trigger-proxy-'+t.region+'" proxy="'+t.region+'"><div class="om-borderlayout-expand-trigger"></div></div>';var s=e(i);t.region=="west"||t.region=="east"?s.width(r.options.spacing):(t.region=="north"||t.region=="south")&&s.height(r.options.spacing),function(e){s.find(".om-borderlayout-expand-trigger").click(function(){r.expandRegion(e.region)})}(t)}else{i='<div class="om-borderlayout-proxy om-borderlayout-proxy-'+t.region+'" proxy="'+t.region+'"><div class="om-panel-title"></div><div class="om-panel-tool"><div class="om-icon panel-tool-expand"></div></div></div>';var s=e(i);(function(t){s.find(".panel-tool-expand").hover(function(){e(this).toggleClass("panel-tool-expand-hover")}).click(function(){r.expandRegion(t.region)})})(t)}s.hover(function(){e(this).toggleClass("om-borderlayout-proxy-hover")}).appendTo(this.element)},_buildRegion:function(){var t=this,n=this.element;this.element.addClass("om-borderlayout"),this.options.hideCollapsBtn&&this.element.addClass("om-borderlayout-hide-collaps-btn"),this.options.fit&&n.css({width:"100%",height:"100%"});for(var r=0;r<this.options.panels.length;r++){var i=e.extend({},this.options.panels[r]),s=this.element.find("#"+i.id),o=i.collapsible&&t.options.hideCollapsBtn;i.collapsible&&i.region!="center"&&this._createRegionProxy(i,o),i.collapsible&&(e.extend(i,{collapsible:!1}),t.options.hideCollapsBtn||e.extend(i,{tools:[{iconCls:["panel-tool-collapse","panel-tool-collapse-hover"],handler:function(e){t.collapseRegion(e.element.parent().attr("region"))}}]}));if(i.closable){var u=i.onClose;e.extend(i,{onClose:function(){u&&u.call(s[0]),t._resizeRegion()}})}s.omPanel(i),(i.region=="north"||i.region=="south")&&s.omPanel("resize",{width:n.width()});var f="0",l=this.options.spacing+"px";if(i.resizable&&i.region!="center"){var c="";handleClass={},i.region=="west"?(c="e",handleClass.width=l,handleClass.right="-"+l):i.region=="east"?(c="w",handleClass.width=l,handleClass.left="-"+l):i.region=="south"?(c="n",handleClass.height=l,handleClass.top="-"+l):i.region=="north"&&(c="s",handleClass.height=l,handleClass.bottom="-"+l),s.parent().omResizable({handles:c,helper:"om-borderlayout-resizable-helper-"+c,stop:function(e,r){n.find(">.om-borderlayout-mask").remove(),e.element.find(">.om-panel-body").omPanel("resize",e.size),t._resizeRegion(),t.options.onAfterDrag&&t._trigger("onAfterDrag",null,e.element)},start:function(r,i){var s=r.element.omResizable("option","helper");e("body").find("."+s).css("border-width",t.options.spacing);var o=r.element.attr("region"),u=n.width()-2*t._minWidth,f=n.height()-2*t._minHeight;o=="west"?(u=n.width()-(t._getRegionSize("east").width+t._minWidth),r.element.omResizable("option","maxWidth",u)):o=="east"?(u=n.width()-(t._getRegionSize("west").width+t._minWidth),r.element.omResizable("option","maxWidth",u)):o=="north"?(f=n.height()-(t._getRegionSize("south").height+t._minHeight+t.options.spacing),r.element.omResizable("option","maxHeight",f)):o=="south"&&(f=n.height()-(t._getRegionSize("north").height+t._minHeight+t.options.spacing),r.element.omResizable("option","maxHeight",f)),e('<div class="om-borderlayout-mask"></div>').css({width:n.width(),height:n.height()}).appendTo(n),t.options.onBeforeDrag&&t._trigger("onBeforeDrag",null,r.element)},minWidth:t._minWidth,minHeight:t._minHeight}),s.parent().find(".om-resizable-handle").css(handleClass),f=(i.region=="south"?l:0)+" "+(i.region=="west"?l:0)+" "+(i.region=="north"?l:0)+" "+(i.region=="east"?l:0);if(o){var h=e("<div class='om-borderlayout-collaps-trigger-"+i.region+"'></div>");(function(e){h.click(function(){t.collapseRegion(e.attr("region"))})})(s.parent()),s.parent().find(".om-resizable-handle").append(h)}}s.parent().addClass("om-borderlayout-region").addClass("om-borderlayout-region-"+i.region).css("margin",f).attr("region",i.region),s.addClass("om-borderlayout-region-body"),s.prev().addClass("om-borderlayout-region-header")}},_getRegion:function(e){var t=this.element.find('>[region="'+e+'"]');return t.size()>0?t:!1},_getRegionProxy:function(e){var t=this.element.find('>[proxy="'+e+'"]');return t.size()>0?t:!1},_getPanelOpts:function(e){for(var t=0;t<this.options.panels.length;t++)if(e==this.options.panels[t].region)return this.options.panels[t];return!1},collapseRegion:function(t){var n=this._getPanelOpts(t);if(!n||!n.collapsible)return;var r=this._getRegion(t);$body=r.find(">.om-panel-body");if(r){var i=e.data($body[0],"omPanel");if(i.options.closed)return;if(n.onBeforeCollapse&&i._trigger("onBeforeCollapse")===!1)return!1;r.hide(),n.onCollapse&&i._trigger("onCollapse"),this._getRegionProxy(t).show(),this._resizeRegion()}},expandRegion:function(t){var n=this._getPanelOpts(t);if(!n||!n.collapsible)return;var r=this._getRegion(t);$body=r.find(">.om-panel-body");if(r){var i=e.data($body[0],"omPanel");if(i.options.closed)return;if(n.onBeforeExpand&&i._trigger("onBeforeExpand")===!1)return!1;r.show(),n.onExpand&&i._trigger("onExpand"),this._getRegionProxy(t).hide(),this._resizeRegion()}},closeRegion:function(t){var n=this._getPanelOpts(t);if(!n||!n.closable)return;var r=this._getRegion(t);$body=r.find(">.om-panel-body");if(r){var i=e.data($body[0],"omPanel");if(i.options.closed)return;r.find(">.om-panel-body").omPanel("close"),this._getRegionProxy(t).hide(),this._resizeRegion()}},openRegion:function(t){var n=this._getPanelOpts(t);if(!n||!n.closable)return;var r=this._getRegion(t);$body=r.find(">.om-panel-body");if(r){var i=e.data($body[0],"omPanel");if(!i.options.closed)return;r.find(">.om-panel-body").omPanel("open"),this._getRegionProxy(t).hide(),this._resizeRegion()}}})}(jQuery),function(e){e.omWidget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){this._determineButtonType();var t=e("<span>").addClass("om-btn om-state-default DIY_ML20").css("border","none"),n=e("<span>").addClass("om-btn-bg om-btn-left"),r=e("<span>").addClass("om-btn-bg om-btn-center DIY_W60"),i=e("<span>").addClass("om-btn-bg om-btn-right");this.element.hasClass("apusic-btn-deepblue")&&t.addClass("apusic-btn-deepblue"),this.element.addClass("om-btn-txt").css({"background-position":"left center","background-repeat":"no-repeat"}).wrap(t).before(n).after(i).wrap(r)},_init:function(){var t=this,n=this.options,r=this.element;typeof n.disabled!="boolean"&&(n.disabled=r.propAttr("disabled"));if(r.attr("disabled")=="disabled"||n.disabled=="disabled")n.disabled=!0;this._initButton(),n.disabled&&(t._addClass("disabled"),r.css("cursor","default"));var i=r.parent().parent();i.bind("mouseenter",function(e){if(n.disabled)return!1;t._addClass("hover")}).bind("mouseleave",function(e){if(n.disabled)return!1;t._removeClass("hover"),t._removeClass("active")}).bind("click",function(e){if(n.disabled)return e.preventDefault(),e.stopImmediatePropagation(),!1;t.options.onClick&&t._trigger("onClick",e)}).bind("mousedown",function(e){if(n.disabled)return!1;t._addClass("active"),t._removeClass("focus");var r=n.onClick}).bind("mouseup",function(e){if(n.disabled)return!1;t._addClass("focus"),t._removeClass("active")}).bind("keydown",function(r){if(n.disabled)return!1;(r.keyCode==e.om.keyCode.SPACE||r.keyCode==e.om.keyCode.ENTER)&&t._addClass("active");if(r.keyCode==e.om.keyCode.SPACE){var i=n.onClick;if(i&&t._trigger("onClick",r)===!1)return}}).bind("keyup",function(){t._removeClass("active")}),r.bind("focus.button",function(e){if(n.disabled)return!1;t._addClass("focus")}).bind("blur.button",function(e){if(n.disabled)return!1;t._removeClass("focus")})},enable:function(){this._removeClass("disabled"),this.options.disabled=!1,this.element.css("cursor","pointer").removeAttr("disabled")},disable:function(){this._addClass("disabled"),this.options.disabled=!0,this.element.css("cursor","default"),(this.type=="input"||this.type=="button")&&this.element.attr("disabled","disabled")},click:function(){!this.options.disabled&&this.options.onClick&&this._trigger("onClick")},changeLabel:function(e){this.type=="a"?this.element.text(e):this.type=="input"?this.element.val(e):this.type=="button"&&this.element.html(e)},changeIcons:function(e){this.options.disabled||e&&(e.left?this.element.css("backgroundImage","url( "+e.left+" )"):null,e.right?this.element.next().attr("src",e.right):null)},destroy:function(){$el=this.element,$el.closest(".om-btn").after($el).remove()},_addClass:function(e){this.element.parent().parent().addClass("om-state-"+e)},_removeClass:function(e){this.element.parent().parent().removeClass("om-state-"+e)},_initButton:function(){var t=this.options,n=this._getLabel(),r=this.element;r.removeClass("om-btn-icon om-btn-only-icon").next("img").remove(),t.width>10&&r.parent().css("width",parseInt(t.width)-10),this.type=="a"||this.type=="button"?r.html(n):r.val(n),t.icons.left&&(n?r.addClass("om-btn-icon").css("background-image","url("+t.icons.left+")"):r.addClass("om-btn-only-icon").css("background-image","url("+t.icons.left+")")),t.icons.right&&(n!=""?e("<img>").attr("src",t.icons.right).css({"vertical-align":"baseline","padding-left":"3px"}).insertAfter(r):e("<img>").attr("src",t.icons.right).css("vertical-align","baseline").insertAfter(r))},_getLabel:function(){return this.options.label||this.element.html()||this.element.text()||this.element.val()},_determineButtonType:function(){this.element.is("input")?this.type="input":this.element.is("a")?this.type="a":this.element.is("button")&&(this.type="button")}})}(jQuery),function(e){e.omWidget("om.omButtonbar",{options:{width:null},_create:function(){this.element.addClass("om-buttonbar"),e("<span></span>").addClass("om-buttonbar-null").appendTo(this.element)},_init:function(){var t=this,n=this.options,r=this.element,i=r.attr("style")?r.attr("style"):"";i&&(i=i.substr(i.length-1,i.length)==";"?i:i+";"),n.width&&r.attr("style",i+"width:"+(n.width-2)+"px;"),e.each(n.btns,function(t,n){if(!n.separtor){var i=n.id||r.attr("id")+"_"+t,s=e('<button type="button"></button>').attr("id",i).appendTo(r);e.fn.omButton&&s.omButton(n)}else e('<span class="om-buttonbar-sep"></span>').appendTo(r)})}})}(jQuery),function(e){e.omWidget("om.omCalendar",{options:{date:new Date,startDay:0,pages:1,minDate:!1,maxDate:!1,popup:!0,showTime:!1,onSelect:function(e,t){},disabledDays:[],disabledFn:function(e){},disabled:!1,readOnly:!1,editable:!0,dateFormat:!1},disable:function(){this.options.popup&&(this.hide(),this.options.disabled=!0,this.element.attr("disabled",!0).unbind(".omCalendar").next().addClass("om-state-disabled").unbind())},enable:function(){this.options.popup&&(this.options.disabled=!1,this.element.attr("disabled",!1).next().removeClass("om-state-disabled"),this._buildStatusEvent())},getDate:function(){return this.options.date},setDate:function(e){this.options.date=e,this._render({date:e})},_create:function(){var t=this.element,n=this.options;this.cid=this._stamp(t),n.popup?(t.wrap("<span></span>").after('<span class="om-calendar-trigger"></span>').parent().addClass("om-calendar om-widget om-state-default"),this.con=e("<div></div>").appendTo(document.body).css({top:"0px",position:"absolute",background:"white",visibility:"hidden","z-index":"2000"}),this._buildBodyEvent(),this._buildStatusEvent()):this.con=this.element,this.con.addClass("om-calendar-list-wrapper om-widget om-clearfix om-widget-content")},_init:function(){var t=this.element,n=this.options;this.con.addClass("multi-"+n.pages),this._buildParam(),n.popup&&t.val()&&(n.date=e.omCalendar.parseDate(t.val(),n.dateFormat||this._defaultFormat)||new Date),this._render(),n.readOnly||!n.editable?t.attr("readonly","readOnly").unbind():t.removeAttr("readonly"),n.disabled?this.disable():this.enable()},_render:function(t){var n=0,r,i,s,o=this.element,u=this.options;this.ca=[],this._parseParam(t),this.con.html("");for(n=0,s=[this.year,this.month];n<u.pages;n++)n===0?r=!0:(r=!1,s=this._computeNextMonth(s)),i=n==u.pages-1,this.ca.push(new e.om.omCalendar.Page({year:s[0],month:s[1],prevArrow:r,nextArrow:i,showTime:self.showTime},this)),this.ca[n]._render();if(u.pages>1){var f=o.find(".om-cal-box"),l=[];e.each(f,function(t,n){l.push(e(n).css("height"))}),l.sort(),f.css("height",l[l.length-1])}},_stamp:function(e){return(e.attr("id")===undefined||e.attr("id")==="")&&e.attr("id","K_"+(new Date).getTime()),e.attr("id")},_buildStatusEvent:function(){var t=this;this.element.unbind(".omCalendar").bind("click.omCalendar",function(e){t.toggle()}).bind("focus.omCalendar",function(){e(this).parent().addClass("om-state-hover om-state-active")}).bind("blur.omCalendar",function(){e(this).parent().removeClass("om-state-hover om-state-active")}).next().unbind().click(function(){t.element.trigger("focus"),t.show()}).mouseover(function(){e(this).parent().addClass("om-state-hover")}).mouseout(function(){!t.isVisible()&&e(this).parent().removeClass("om-state-hover")})},_buildBodyEvent:function(){var t=this;e(document).bind("mousedown.omCalendar",this.globalEvent=function(e){t.hide()}),t.con.mousedown(function(e){e.stopPropagation()})},toggle:function(){this.isVisible()?this.hide():this.show()},isVisible:function(){return this.con.css("visibility")=="hidden"?!1:!0},show:function(){var e=this.element.parent();this.con.css("visibility","");var t=e.offset().left,n=e.offsetHeight||e.outerHeight(),r=e.offset().top+n;this.con.css("left",t.toString()+"px"),this.con.css("top",r.toString()+"px")},hide:function(){this.con.css("visibility","hidden")},destroy:function(){var t=this.element;e("body").unbind(".omCalendar",this.globalEvent),this.options.popup&&(t.parent().after(t).remove(),this.con.remove())},_buildParam:function(){var e=this.options;return e.startDay&&(e.startDay=(7-e.startDay)%7),!e.dateFormat&&(this._defaultFormat=e.showTime?"yy-mm-dd H:i:s":"yy-mm-dd"),this.EV=[],this},_parseParam:function(t){t&&e.extend(this.options,t),this._handleDate()},_templetShow:function(e,t){var n,r,i,s,o,u;if(t instanceof Array){n="";for(i=0;i<t.length;i++)n+=arguments.callee(e,t[i]);e=n}else{r=e.match(/{\$(.*?)}/g);if(t!==undefined&&r!==null)for(i=0,s=r.length;i<s;i++)u=r[i].replace(/({\$)|}/g,""),o=t[u]!==undefined?t[u]:"",e=e.replace(r[i],o)}return e},_handleDate:function(){var e=this.options.date;this.day=e.getDate(),this.month=e.getMonth(),this.year=e.getFullYear()},_getHeadStr:function(t,n){return t.toString()+e.om.lang.omCalendar.year+(Number(n)+1).toString()+e.om.lang.omCalendar.month},_monthAdd:function(){var e=this;return e.month==11?(e.year++,e.month=0):e.month++,e.options.date.setFullYear(e.year,e.month,1),this},_monthMinus:function(){var e=this;return e.month===0?(e.year--,e.month=11):e.month--,e.options.date.setFullYear(e.year,e.month,1),this},_computeNextMonth:function(e){var t=e[0],n=e[1];return n==11?(t++,n=0):n++,[t,n]},_handleOffset:function(){var t=this,n=e.om.lang.omCalendar,r=[n.Su,n.Mo,n.Tu,n.We,n.Th,n.Fr,n.Sa],i="<span>{$day}</span>",s=this.options.startDay,o="",u=[];for(var f=0;f<7;f++)u[f]={day:r[(f-s+7)%7]};return o=t._templetShow(i,u),{day_html:o}}}),e.extend(e.om.omCalendar,{Page:function(t,n){var r=e.om.lang.omCalendar;this.father=n,this.month=Number(t.month),this.year=Number(t.year),this.prevArrow=t.prevArrow,this.nextArrow=t.nextArrow,this.node=null,this.timmer=null,this.id="",this.EV=[],this.html=['<div class="om-cal-box" id="{$id}">','<div class="om-cal-hd om-widget-header">','<a href="javascript:void(0);" class="om-prev {$prev}"><span class="om-icon om-icon-seek-prev">Prev</span></a>','<a href="javascript:void(0);" class="om-title">{$title}</a>','<a href="javascript:void(0);" class="om-next {$next}"><span class="om-icon om-icon-seek-next">Next</span></a>',"</div>",'<div class="om-cal-bd">','<div class="om-whd">',n._handleOffset().day_html,"</div>",'<div class="om-dbd om-clearfix">',"{$ds}","</div>","</div>",'<div class="om-setime om-state-default hidden">',"</div>",'<div class="om-cal-ft {$showtime}">','<div class="om-cal-time om-state-default">',"00:00 &hearts;","</div>","</div>",'<div class="om-selectime om-state-default hidden">',"</div>","</div><!--#om-cal-box-->"].join(""),this.nav_html=["<p>",r.month,'<select value="{$the_month}">','<option class="m1" value="1">01</option>','<option class="m2" value="2">02</option>','<option class="m3" value="3">03</option>','<option class="m4" value="4">04</option>','<option class="m5" value="5">05</option>','<option class="m6" value="6">06</option>','<option class="m7" value="7">07</option>','<option class="m8" value="8">08</option>','<option class="m9" value="9">09</option>','<option class="m10" value="10">10</option>','<option class="m11" value="11">11</option>','<option class="m12" value="12">12</option>',"</select>","</p>","<p>",r.year,'<input type="text" value="{$the_year}" onfocus="this.select()"/>',"</p>","<p>",'<button class="ok">',r.ok,'</button><button class="cancel">',r.cancel,"</button>","</p>"].join(""),this.Verify=function(){var e=function(e){return/^\d+$/i.test(e)?(e=Number(e),!(e<1||e>31)):!1},t=function(e){return/^\d+$/i.test(e)?(e=Number(e),!(e<100||e>1e4)):!1},n=function(e){return/^\d+$/i.test(e)?(e=Number(e),!(e<1||e>12)):!1};return{isDay:e,isYear:t,isMonth:n}},this._renderUI=function(){var t=this,n={},r,i=t.father.options;return t.HTML="",n.prev="",n.next="",n.title="",n.ds="",t.prevArrow||(n.prev="hidden"),t.nextArrow||(n.next="hidden"),t.father.showTime||(n.showtime="hidden"),n.id=t.id="om-cal-"+Math.random().toString().replace(/.\./i,""),n.title=t.father._getHeadStr(t.year,t.month),t.createDS(),n.ds=t.ds,t.father.con.append(t.father._templetShow(t.html,n)),t.node=e("#"+t.id),i.showTime&&(r=t.node.find(".om-cal-ft"),r.removeClass("hidden"),t.timmer=new e.om.omCalendar.TimeSelector(r,t.father)),this},this._buildEvent=function(){var t=this,n,r=e("#"+t.id),i=t.father.options;t.EV[0]=r.find("div.om-dbd").bind("mousedown",function(n){var r=e(n.target);if(r.filter(".om-null, .om-state-disabled").length>0)return;var s=Number(r.html()),o=new Date(i.date);o.setFullYear(t.year,t.month,s),t.father.dt_date=o,i.showTime||t.father._trigger("onSelect",n,o);if(i.popup&&!i.showTime){t.father.hide();if(!isNaN(t.father.dt_date)){var u=e.omCalendar.formatDate(t.father.dt_date,i.dateFormat||t.father._defaultFormat);e(t.father.element).val(u).focus().blur()}}t.father._render({date:o})}).find("a").bind("mouseover",function(t){e(this).addClass("om-state-hover om-state-nobd")}).bind("mouseout",function(t){e(this).removeClass("om-state-hover").not(".om-state-highlight, .om-state-active").removeClass("om-state-nobd")}),t.EV[1]=r.find("a.om-prev").bind("click",function(e){return t.father._monthMinus()._render(),!1}),t.EV[2]=r.find("a.om-next").bind("click",function(e){return t.father._monthAdd()._render(),!1}),t.EV[3]=r.find("a.om-title").bind("click",function(n){try{t.timmer.hidePopup()}catch(i){}var s=e(n.target),o=t.father._templetShow(t.nav_html,{the_month:t.month+1,the_year:t.year});return r.find(".om-setime").html(o).removeClass("hidden").find("option:[value="+(t.month+1)+"]").attr("selected","selected"),this.blur(),r.find("input").bind("keydown",function(n){var i=e(n.target);n.keyCode==e.om.keyCode.UP&&(i.val(Number(i.val())+1),i[0].select()),n.keyCode==e.om.keyCode.DOWN&&(i.val(Number(i.val())-1),i[0].select());if(n.keyCode==e.om.keyCode.ENTER){var s=r.find(".om-setime select").val(),o=r.find(".om-setime input").val();r.find(".om-setime").addClass("hidden");if(!t.Verify().isYear(o))return;if(!t.Verify().isMonth(s))return;t.father._render({date:t._computeDate(t,o,s)})}}),!1}).bind("mouseover",function(t){e(this).addClass("om-state-hover")}).bind("mouseout",function(t){e(this).removeClass("om-state-hover")}),t.EV[4]=r.find(".om-setime").bind("click",function(n){n.preventDefault();var r=e(n.target),i=e(this);if(r.hasClass("ok")){var s=i.find("select").val(),o=i.find("input").val();i.addClass("hidden");if(!t.Verify().isYear(o))return;if(!t.Verify().isMonth(s))return;s=s-i.parent().prevAll(".om-cal-box").length-1,t.father._render({date:t._computeDate(t,o,s)})}else r.hasClass("cancel")&&i.addClass("hidden")})},this._computeDate=function(e,t,n){var r=new Date(e.father.options.date.getTime());return r.setFullYear(t,n),r},this._getNode=function(){var e=this;return e.node},this._getNumOfDays=function(e,t){return 32-(new Date(e,t-1,32)).getDate()},this.createDS=function(){var t=this,n=t.father.options,r="",i=((new Date(t.year+"/"+(t.month+1)+"/01")).getDay()+n.startDay+7)%7,s=t._getNumOfDays(t.year,t.month+1)+i,o,u,f=[];for(o=0;o<n.disabledDays.length;o++)f[o]=n.disabledDays[o]%7;for(o=0;o<s;o++){var l=new Date(t.year+"/"+Number(t.month+1)+"/"+(o+1-i).toString());o<i?r+='<a href="javascript:void(0);" class="om-null" >0</a>':e.inArray((o+n.startDay)%7,f)>=0?r+='<a href="javascript:void(0);" class="om-state-disabled">'+(o-i+1)+"</a>":n.disabledFn(l)===!1?r+='<a href="javascript:void(0);" class="om-state-disabled">'+(o-i+1)+"</a>":n.minDate instanceof Date&&(new Date(t.year+"/"+(t.month+1)+"/"+(o+1-i))).getTime()<n.minDate.getTime()+1?r+='<a href="javascript:void(0);" class="om-state-disabled">'+(o-i+1)+"</a>":n.maxDate instanceof Date&&(new Date(t.year+"/"+(t.month+1)+"/"+(o+1-i))).getTime()>n.maxDate.getTime()?r+='<a href="javascript:void(0);" class="om-state-disabled">'+(o-i+1)+"</a>":o==i+(new Date).getDate()-1&&(new Date).getFullYear()==t.year&&(new Date).getMonth()==t.month?r+='<a href="javascript:void(0);" class="om-state-highlight om-state-nobd">'+(o-i+1)+"</a>":o==i+n.date.getDate()-1&&t.month==n.date.getMonth()&&t.year==n.date.getFullYear()?r+='<a href="javascript:void(0);" class="om-state-active om-state-nobd">'+(o-i+1)+"</a>":r+='<a href="javascript:void(0);">'+(o-i+1)+"</a>"}if(s%7!==0)for(o=0;o<7-s%7;o++)r+='<a href="javascript:void(0);" class="om-null">0</a>';t.ds=r},this._render=function(){var e=this;e._renderUI(),e._buildEvent()}}}),e.extend(e.om.omCalendar,{TimeSelector:function(t,n){var r=n.options.date,i=e.om.lang.omCalendar;this.father=n,this.fcon=t.parent(".om-cal-box"),this.popupannel=this.fcon.find(".om-selectime"),typeof r=="undefined"&&(n.options.date=new Date),this.time=n.options.date,this.status="s",this.ctime=e('<div class="om-cal-time om-state-default">'+i.time+'<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><!--{{arrow--><div class="cta"><button class="u om-icon om-icon-triangle-1-n"></button><button class="d om-icon om-icon-triangle-1-s"></button></div><!--arrow}}--></div>'),this.button=e('<button class="ct-ok om-state-default">'+i.ok+"</button>"),this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],this.m_a=["00","10","20","30","40","50"],this.s_a=["00","10","20","30","40","50"],this.parseSubHtml=function(e){var t="";for(var n=0;n<e.length;n++)t+='<a href="javascript:void(0);" class="om-cal-item">'+e[n]+"</a>";return t+='<a href="javascript:void(0);" class="x">x</a>',t},this.showPopup=function(e){var t=this;this.popupannel.html(e),this.popupannel.removeClass("hidden");var n=t.status,r="om-state-active om-state-nobd";t.ctime.find("span").removeClass(r);switch(n){case"h":t.ctime.find(".h").addClass(r);break;case"m":t.ctime.find(".m").addClass(r);break;case"s":t.ctime.find(".s").addClass(r)}},this.hidePopup=function(){this.popupannel.addClass("hidden")},this._render=function(){var e=this,t=e.get("h"),n=e.get("m"),r=e.get("s");return e.father._time=e.time,e.ctime.find(".h").html(t),e.ctime.find(".m").html(n),e.ctime.find(".s").html(r),e},this.set=function(e,t){var n=this;t=Number(t);switch(e){case"h":n.time.setHours(t);break;case"m":n.time.setMinutes(t);break;case"s":n.time.setSeconds(t)}n._render()},this.get=function(e){var t=this,n=t.time;switch(e){case"h":return n.getHours();case"m":return n.getMinutes();case"s":return n.getSeconds()}},this.add=function(){var e=this,t=e.status,n=e.get(t);n++,e.set(t,n)},this.minus=function(){var e=this,t=e.status,n=e.get(t);n--,e.set(t,n)},this._timeInit=function(){var n=this;t.html("").append(n.ctime),t.append(n.button),n._render(),n.popupannel.bind("click",function(t){var r=e(t.target);if(r.hasClass("x"))n.hidePopup();else if(r.hasClass("om-cal-item")){var i=Number(r.html());n.set(n.status,i),n.hidePopup()}}),n.button.bind("click",function(t){var r=n.father.options,i=typeof n.father.dt_date=="undefined"?r.date:n.father.dt_date;i.setHours(n.get("h")),i.setMinutes(n.get("m")),i.setSeconds(n.get("s")),n.father._trigger("onSelect",t,i);if(r.popup){var s=e.omCalendar.formatDate(i,r.dateFormat||n.father._defaultFormat);e(n.father.element).val(s),n.father.hide()}}),n.ctime.bind("keyup",function(t){if(t.keyCode==e.om.keyCode.UP||t.keyCode==e.om.keyCode.LEFT)t.preventDefault(),n.add();if(t.keyCode==e.om.keyCode.DOWN||t.keyCode==e.om.keyCode.RIGHT)t.preventDefault(),n.minus()}),n.ctime.find(".u").bind("click",function(){n.hidePopup(),n.add()}),n.ctime.find(".d").bind("click",function(){n.hidePopup(),n.minus()}),n.ctime.find(".h").bind("click",function(){var e=n.parseSubHtml(n.h_a);n.status="h",n.showPopup(e)}),n.ctime.find(".m").bind("click",function(){var e=n.parseSubHtml(n.m_a);n.status="m",n.showPopup(e)}),n.ctime.find(".s").bind("click",function(){var e=n.parseSubHtml(n.s_a);n.status="s",n.showPopup(e)})},this._timeInit()}}),e.omCalendar=e.omCalendar||{},e.extend(e.omCalendar,{leftPad:function(e,t,n){var r=new String(e);n||(n=" ");while(r.length<t)r=n+r;return r.toString()}}),e.extend(e.omCalendar,{getShortDayName:function(t){return e.omCalendar.dayMaps[t][0]},getDayName:function(t){return e.omCalendar.dayMaps[t][1]},getShortMonthName:function(t){return e.omCalendar.monthMaps[t][0]},getMonthName:function(t){return e.omCalendar.monthMaps[t][1]},dayMaps:[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],monthMaps:[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],formatCodes:{d:{g:"this.getDate()",s:"this.setDate({param})",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},dd:{g:"$.omCalendar.leftPad(this.getDate(), 2, '0')",s:"this.setDate(parseInt('{param}', 10))",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},m:{g:"(this.getMonth() + 1)",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},mm:{g:"$.omCalendar.leftPad(this.getMonth() + 1, 2, '0')",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},y:{g:"('' + this.getFullYear()).substring(2, 4)",s:"this.setFullYear(parseInt('20{param}', 10))",r:"(\\d{2})"},yy:{g:"this.getFullYear()",s:"this.setFullYear(parseInt('{param}', 10))",r:"(\\d{4})"},h:{g:"$.omCalendar.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"(0[0-9]|1[0-1])"},H:{g:"$.omCalendar.leftPad(this.getHours(), 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"([0-1][0-9]|2[0-3])"},g:{g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-1])"},G:{g:"this.getHours()",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-9]|2[0-3])"},i:{g:"$.omCalendar.leftPad(this.getMinutes(), 2, '0')",s:"this.setMinutes(parseInt('{param}', 10))",r:"([0-5][0-9])"},s:{g:"$.omCalendar.leftPad(this.getSeconds(), 2, '0')",s:"this.setSeconds(parseInt('{param}', 10))",r:"([0-5][0-9])"},u:{g:"$.omCalendar.leftPad(this.getMilliseconds(), 3, '0')",s:"this.setMilliseconds(parseInt('{param}', 10))",r:"(\\d{1,3})"},D:{g:"$.omCalendar.getShortDayName(this.getDay())",s:"",r:""},DD:{g:"$.omCalendar.getDayName(this.getDay())",s:"",r:""},M:{g:"$.omCalendar.getShortMonthName(this.getMonth())",s:"",r:""},MM:{g:"$.omCalendar.getMonthName(this.getMonth())",s:"",r:""},a:{g:"(this.getHours() < 12 ? 'am' : 'pm')",s:"",r:""},A:{g:"(this.getHours() < 12 ? 'AM' : 'PM')",s:"",r:""}}}),e.extend(e.omCalendar,{formatDate:function(t,n){if(!t||!n)return null;if(Object.prototype.toString.call(t)!=="[object Date]")return null;var r,i,s="",o=!1;for(r=0;r<n.length;r++){i=n.charAt(r),fi_next=n.charAt(r+1);if(i=="'"){o=!o;continue}!o&&e.omCalendar.formatCodes[i+fi_next]?(i=(new Function("return "+e.omCalendar.formatCodes[i+fi_next].g)).call(t),r++):!o&&e.omCalendar.formatCodes[i]&&(i=(new Function("return "+e.omCalendar.formatCodes[i].g)).call(t)),s+=i}return s},parseDate:function(t,n){if(!t||!n)return null;if(Object.prototype.toString.call(t)!=="[object String]")return null;var r=[],i,s,o=null,u;for(i=0;i<n.length;i++){s=n.charAt(i),fi_next=n.charAt(i+1);if(e.omCalendar.formatCodes[s+fi_next])o=e.omCalendar.formatCodes[s+fi_next],i++;else{if(!e.omCalendar.formatCodes[s])continue;o=e.omCalendar.formatCodes[s]}u=t.match(new RegExp(o.r));if(!u)return null;r.push(o.s.replace("{param}",u[0])),t=t.substring(u.index+u[0].length);var f=n.charAt(i+1);if((f!=""||t!="")&&f!==t.charAt(0)&&e.omCalendar.formatCodes[f]===undefined)return null}var l=new Date;return(new Function(r.join(";"))).call(l),l}}),e.om.lang.omCalendar={year:"",month:"",Su:"",Mo:"",Tu:"",We:"",Th:"",Fr:"",Sa:"",cancel:"",ok:"",time:""}}(jQuery),function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length;for(var n=0;n<t;n++)if(this[n]===e)return n;return-1}),e.omWidget("om.omCombo",{options:{optionField:"text",valueField:"value",width:"auto",disabled:!1,readOnly:!1,editable:!0,lazyLoad:!1,listMaxHeight:300,listAutoWidth:!1,autoFilter:!0,filterStrategy:"first",filterDelay:500,forceSelection:!1,multi:!1,multiSeparator:","},_init:function(){var e=this.options,t=this.textInput,n=e.dataSource;e.inputField||(e.inputField=e.optionField),typeof e.value!="undefined"&&(e.lazyLoad=!1);if(e.width!="auto"){var r=t.parent().width(e.width);t.width(r.innerWidth()-t.next().outerWidth()-t.outerWidth()+t.width())}e.multi&&(e.editable=this.options.editable=!1),this._refeshEmptyText(e.emptyText),e.disabled?t.attr("disabled",!0):t.removeAttr("disabled"),e.readOnly||!e.editable?t.attr("readonly","readOnly"):t.removeAttr("readonly"),e.lazyLoad?this.dataHasLoaded=!1:(this._toggleLoading("add"),n&&typeof n=="string"?this._ajaxLoad(n):n&&typeof n=="object"?(this._loadData(n),this._toggleLoading("remove")):(this.dataHasLoaded=!0,this._toggleLoading("remove")));var i=e.disabled||e.readOnly;i?this.expandTrigger.addClass("om-state-disabled"):this._bindEvent()},_create:function(){var t=this.element,n=e('<span class="om-combo om-widget om-state-default"></span>').insertAfter(t).wrapInner(t);this.textInput=t.clone().removeAttr("id").removeAttr("name").appendTo(n),this.expandTrigger=e('<span class="om-combo-trigger"></span>').appendTo(n),t.hide(),this.dropList=e(e('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children()[0]).hide()},setData:function(e){var t=this,n=t.textInput,r=t.element;t.options.value="",r.val(""),n.val(""),t._toggleLoading("add"),typeof e=="string"?t._ajaxLoad(e):(t._loadData(e),t._toggleLoading("remove"))},getData:function(){var e=this.options.dataSource;return typeof e=="object"?e:null},value:function(e){if(typeof e=="undefined"){var t=this.element.val();return t?t:""}return this._setValue(e+""),this},disable:function(){var e=this.element;e.attr("disabled",!0).unbind(),this.options.disabled=!0,this.expandTrigger.addClass("om-state-disabled").unbind()},enable:function(){var e=this.element;e.removeAttr("disabled").unbind(),this.options.disabled=!1,this.expandTrigger.removeClass("om-state-disabled").unbind(),this._bindEvent()},destroy:function(){var t=this.element;e
(document).unbind("mousedown.omCombo",this.globalEvent),t.parent().after(t).remove(),this.dropList.parent().remove()},_bindEvent:function(){var t=this,n=t.options,r=t.textInput,i=t.element,s=t.dropList,o=t.expandTrigger,u=n.emptyText,f=!1,l=r.parent("span");l.mouseenter(function(){n.disabled||l.addClass("om-state-hover")}).mouseleave(function(){l.removeClass("om-state-hover")}).mousedown(function(e){e.stopPropagation()}),r.focus(function(){if(f)return;f=!0,e(".om-droplist").hide(),l.addClass("om-state-focus"),t._refeshEmptyText(u),t.dataHasLoaded||o.hasClass("om-loading")||(t._toggleLoading("add"),typeof n.dataSource=="object"?(t._loadData(n.dataSource),t._toggleLoading("remove")):typeof n.dataSource=="string"?t._ajaxLoad(n.dataSource):(t.dataHasLoaded=!0,t._toggleLoading("remove"))),!n.disabled&&!n.readOnly&&t._showDropList()}).blur(function(s){f=!1,l.removeClass("om-state-focus"),r.removeClass("om-combo-focus");if(!n.disabled&&!n.readOnly&&!n.multi){if(t.hasManualInput){t.hasManualInput=!1;var o=r.val();if(o!==""){var p=e.data(i,"allInputText"),v=e.data(i,"allValues"),m=p.indexOf(o);if(m>-1)t._setValue(v[m]);else if(!n.forceSelection)i.val(r.val());else{var g=i.val();m=v.indexOf(g),m>-1?r.val(p[m]):r.val("")}}else i.val("")}t._refeshEmptyText(u)}}).keyup(function(i){var o=i.keyCode,u=e.om.keyCode;switch(o){case u.DOWN:t._selectNext();break;case u.UP:t._selectPrev();break;case u.ENTER:t._backfill(t.dropList.find(".om-state-hover"));break;case u.ESCAPE:s.hide();break;case u.TAB:break;default:t.hasManualInput=!0,!n.disabled&&!n.readOnly&&n.editable&&n.autoFilter&&(window._omcomboFilterTimer&&clearTimeout(window._omcomboFilterTimer),window._omcomboFilterTimer=setTimeout(function(){e(document).attr("activeElement").id==r.attr("id")&&s.show(),t._doFilter(r)},n.filterDelay))}}),s.mousedown(function(e){e.stopPropagation()}),o.click(function(){!o.hasClass("om-loading")&&r.focus()}).mousedown(function(){!o.hasClass("om-loading")&&l.addClass("om-state-active")}).mouseup(function(){!o.hasClass("om-loading")&&l.removeClass("om-state-active")}),e(document).bind("mousedown.omCombo",this.globalEvent=function(){s.hide()})},_showDropList:function(){var t=this,n=t.options,r=t.textInput,i=t.element,s=t.dropList.scrollTop(0).css("height","auto"),o,u=i.val(),f=s.find(".om-combo-list-row"),l=t._getAllOptionsBeforeFiltered().removeClass("om-helper-hidden om-state-hover");if(l.size()<=0)return;f.removeClass("om-combo-selected");if(u!==undefined&&u!==""){var c=e.data(i,"allValues");if(n.multi){var h=u.split(n.multiSeparator);for(var p=0;p<h.length;p++){var d=c.indexOf(h[p]);d>-1&&e(s.find(".om-combo-list-row").get(d)).addClass("om-combo-selected")}valueItem=h[0]}else{var d=c?c.indexOf(u):-1;d>-1&&(o=e(s.find(".om-combo-list-row").get(d)).addClass("om-combo-selected"))}}var v=s.parent(),m=r.parent();n.listAutoWidth?e.browser.msie&&e.browser.version=="7.0"&&!e.support.style?v.width(s.show().outerWidth()):v.width(s.outerWidth()):v.width(m.outerWidth()),n.listMaxHeight!="auto"&&s.show().height()>n.listMaxHeight&&s.height(n.listMaxHeight).css("overflow-y","auto");var g=m.offset();v.css({left:g.left,top:g.top+m.outerHeight()}),s.show(),o&&s.scrollTop(e(o).offset().top-s.offset().top)},_toggleLoading:function(e){this.options.disabled||(e=="add"?this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading"):e=="remove"&&this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s"))},_ajaxLoad:function(t){var n=this,r=this.options;e.ajax({url:t,method:"POST",dataType:"json",success:function(e,t){n.dataHasLoaded=!0;var i=r.onSuccess;if(i&&n._trigger("onSuccess",null,e,t)===!1){r.dataSource=e;return}n._loadData(e),n._toggleLoading("remove")},error:function(e,i,s){n.dataHasLoaded=!0;if(!r.onError)throw n._toggleLoading("remove"),new Error('An error occurred while load records from URL "'+t+'",the error message is:'+s.message);n._toggleLoading("remove"),n._trigger("onError",null,e,i,s)}})},_loadData:function(t){var n=this.options,r=this.element;n.dataSource=t,this.dataHasLoaded=!0;var i=n.inputField,s=[];typeof i=="string"?e(t).each(function(){s.push(this[i])}):e(t).each(function(e){s.push(i(this,e))}),e.data(r,"allInputText",s);var o=n.valueField,u=[];typeof o=="string"?e(t).each(function(){u.push(""+this[o])}):e(t).each(function(e){u.push(""+o(this,e))}),e.data(r,"allValues",u);var f=this.dropList.empty();if(n.listProvider){var l=n.listProvider(f,t);l&&l.each(function(){e(this).addClass("om-combo-list-row")})}else{var c=n.optionField,h="",p=this;typeof c=="string"?e(t).each(function(e){h+=p._wrapText(this[n.optionField])}):e(t).each(function(e){h+=p._wrapText(n.optionField(this,e))}),h&&(e(h).appendTo(f),f.show().css("height","auto"),n.listMaxHeight!="auto"&&f.height()>n.listMaxHeight&&f.height(n.listMaxHeight).css("overflow-y","auto"),f.hide(),r.parent().hasClass("om-state-hover")&&p._showDropList())}n.value&&this._setValue(""+n.value),this._bindEventsToList()},_bindEventsToList:function(){var t=this,n=t._getAllOptionsBeforeFiltered();n.hover(function(){n.removeClass("om-state-hover"),e(this).addClass("om-state-hover")},function(){e(this).removeClass("om-state-hover")}).mousedown(function(){t._backfill(this)})},_wrapText:function(e){return'<div class="om-combo-list-row">'+e+"</div>"},_setValue:function(t){var n=this.textInput,r=this.element,i=!0,s=r.val(),o=this.options;t==s&&(i=!1);var u=e.data(r,"allValues"),f=[],l=[];o.multi?l=t.split(o.multiSeparator):l.push(t);for(var c=0;c<l.length;c++){var h=u?u.indexOf(l[c]):-1;h>-1?f.push(e.data(r,"allInputText")[h]):o.forceSelection?(r.val(""),t=""):f.push(t)}r.val(t),o.multi?n.val(f.join(o.multiSeparator)):n.val(f.join("")),o.value=t,o.onValueChange&&i&&this._trigger("onValueChange",null,n,t,s),this._refeshEmptyText(o.emptyText)},_findHighlightItem:function(){var e=this.dropList,t=e.find(".om-state-hover");if(t.length>0)return t;var n=e.find(".om-combo-selected");return n.length>0?n[0]:n},_selectPrev:function(){var t=this._findHighlightItem(),n=this._getAllOptionsAfterFiltered(),r=n.index(t),i=e(n[r]);r===0?r=n.length:r==-1&&(r=n.length);var s=e(n[r-1]);this._highLisghtAndScrollTo(i,s)},_selectNext:function(){var t=this.dropList;if(t.css("display")=="none"){this._showDropList();return}var n=this._getAllOptionsAfterFiltered(),r=n.index(this._findHighlightItem()),i=e(n[r]);r==n.length-1&&(r=-1);var s=e(n[r+1]);this._highLisghtAndScrollTo(i,s)},_highLisghtAndScrollTo:function(e,t){var n=this.dropList;e.removeClass("om-state-hover"),t.addClass("om-state-hover"),t.position().top<=0?n.scrollTop(n.scrollTop()+t.position().top):t.position().top+t.outerHeight()>n.height()&&n.scrollTop(n.scrollTop()+t.position().top+t.outerHeight()-n.height())},_backfill:function(t){if(t.length===0)return;var n=this,r=n.element,i=n.dropList,s=n.options,o=s.multi;o?e(t).toggleClass("om-combo-selected").removeClass("om-state-hover"):(this._getAllOptionsBeforeFiltered().removeClass("om-combo-selected"),e(t).addClass("om-combo-selected"));if(i.css("display")=="none")return;var u=[],f=i.find(".om-combo-selected");for(var l=0;l<f.length;l++){var c=e(f[l]).index();c>-1&&u.push(e.data(r,"allValues")[c])}this._setValue(u.join(o?s.multiSeparator:"")),o||i.hide()},_getAllOptionsBeforeFiltered:function(){return this.dropList.find(".om-combo-list-row")},_getAllOptionsAfterFiltered:function(){var e=this.dropList;return e.find(".om-combo-list-row").not(e.find(".om-helper-hidden"))},_doFilter:function(){var t=this,n=t.textInput,r=t.element,i=t.options;records=i.dataSource,filterStrategy=i.filterStrategy,text=n.val(),needShow=!1,items=t._getAllOptionsBeforeFiltered(),allInputText=e.data(r,"allInputText"),e(records).each(function(n){t._filetrPass(filterStrategy,text,records[n],allInputText[n])?(e(items.get(n)).removeClass("om-helper-hidden"),needShow=!0):e(items.get(n)).addClass("om-helper-hidden")});var s=this.dropList.css("height","auto");i.listMaxHeight!="auto"&&s.height()>i.listMaxHeight&&s.height(i.listMaxHeight).css("overflow-y","auto"),needShow||s.hide()},_filetrPass:function(e,t,n,r){if(t==="")return!0;if(typeof e=="function")return e(t,n);if(e==="first")return r.indexOf(t)===0;if(e==="anywhere")return r.indexOf(t)>-1;if(e==="last"){var i=r.lastIndexOf(t);return i>-1&&i+t.length==r.length}return!1},_refeshEmptyText:function(e){var t=this.textInput;if(!e)return;t.val()===""?t.val(e).addClass("om-empty-text"):(t.val()===e&&t.val(""),t.removeClass("om-empty-text"))}})}(jQuery),function(e,t){var n="om-dialog om-widget om-widget-content om-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},s=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.omWidget("om.omDialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this;t.element.parent().bind("om-remove.omDialog",t.__removeBind=function(){t.element.remove()});var r=t.options,i=r.title||"&#160;",s=e.om.omDialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&n.keyCode&&n.keyCode===e.om.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=t.element.show().removeAttr("title").addClass("om-dialog-content om-widget-content").appendTo(o),a=(t.uiDialogTitlebar=e("<div></div>")).addClass("om-dialog-titlebar om-widget-header om-corner-all om-helper-clearfix").prependTo(o),f=e('<a href="#"></a>').addClass("om-dialog-titlebar-close om-corner-tr").attr("role","button").hover(function(){f.addClass("om-state-hover")},function(){f.removeClass("om-state-hover")}).focus(function(){f.addClass("om-state-focus")}).blur(function(){f.removeClass("om-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a),l=(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("om-icon-closethick").text(r.closeText).appendTo(f),h=e("<span></span>").addClass("om-dialog-title").attr("id",s).html(i).prependTo(a);a.find("*").add(a).disableSelection(),r.draggable&&e.om.omDraggable&&t._makeDraggable(),r.resizable&&e.fn.omResizable&&t._makeResizable(),t._createButtons(r.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("om-dialog-content om-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i,s=this.options,o=s.onBeforeClose,u=s.onClose;if(o&&!1===n._trigger("onBeforeClose",t))return;return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.om-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){u&&n._trigger("onClose",t)}):(n.uiDialog.hide(),u&&n._trigger("onClose",t)),e.om.omDialog.overlay.resize(),n.options.modal&&(r=0,e(".om-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.om.omDialog.maxZ=r),n},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?r._trigger("onFocus",n):(i.zIndex>e.om.omDialog.maxZ&&(e.om.omDialog.maxZ=i.zIndex),r.overlay&&(e.om.omDialog.maxZ+=1,r.overlay.$el.css("z-index",e.om.omDialog.overlay.maxZ=e.om.omDialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.om.omDialog.maxZ+=1,r.uiDialog.css("z-index",e.om.omDialog.maxZ),r.element.attr(s),r._trigger("onFocus",n),r)},open:function(){if(this._isOpen)return;var t=this,n=t.options,r=t.uiDialog;t.overlay=n.modal?new e.om.omDialog.overlay(t):null,t._size(),t._position(n.position),r.show(n.show),t.moveToTop(!0),n.modal&&r.bind("keypress.om-dialog",function(t){if(t.keyCode!==e.om.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}),e(t.element.find(":tabbable").get().concat(r.find(".om-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0;var i=n.onOpen;return i&&t._trigger("onOpen"),t},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("om-dialog-buttonpane om-helper-clearfix"),o=e("<div></div>").addClass("om-dialog-buttonset").appendTo(i);n.uiDialog.find(".om-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e('<button type="button"></button>').click(function(){r.click.apply(n.element[0],arguments)}).appendTo(o);e.each(r,function(e,t){if(e==="click")return;e in s?i[e](t):i.attr(e,t)}),e.fn.omButton&&i.omButton()}),i.appendTo(n.uiDialog))},_makeDraggable:function(){function s(e){return{position:e.position,offset:e.offset}}var t=this,n=t.options,r=e(document),i;t.uiDialog.omDraggable({cancel:".om-dialog-content, .om-dialog-titlebar-close",handle:".om-dialog-titlebar",containment:"document",cursor:"move",onStart:function(r,o){i=n.height==="auto"?"auto":e(this).height(),e(this).height(e(this).height()).addClass("om-dialog-dragging"),t._trigger("onDragStart",s(r),o)},onDrag:function(e,n){t._trigger("onDrag",s(e),n)},onStop:function(o,u){n.position=[o.position.left-r.scrollLeft(),o.position.top-r.scrollTop()],e(this).removeClass("om-dialog-dragging").height(i),t._trigger("onDragStop",s(o),u),e.om.omDialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=r.options,s=r.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";r.uiDialog.omResizable({cancel:".om-dialog-content",containment:"document",alsoResize:r.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:r._minHeight(),handles:o,start:function(t,n){e(this).addClass("om-dialog-resizing"),r._trigger("onResizeStart",t,u(n))},resize:function(e,t){r._trigger("onResize",e,u(t))},stop:function(t,n){e(this).removeClass("om-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("onResizeStop",t,u(n)),e.om.omDialog.overlay.resize()}}).css("position",s).find(".om-resizable-se").addClass("om-icon om-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.om.omDialog.prototype.options.position,t)}else t=e.om.omDialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option",s)},_setOption:function(t,r){var i=this,s=i.uiDialog;switch(t){case"buttons":i._createButtons(r);break;case"closeText":i.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":s.removeClass(i.options.dialogClass).addClass(n+r);break;case"disabled":r?s.addClass("om-dialog-disabled"):s.removeClass("om-dialog-disabled");break;case"draggable":var o=s.is(":data(draggable)");o&&!r&&s.omDraggable("destroy"),!o&&r&&i._makeDraggable();break;case"position":i._position(r);break;case"resizable":var u=s.is(":data(resizable)");u&&!r&&s.omResizable("destroy"),u&&typeof r=="string"&&s.omResizable("option","handles",r),!u&&r!==!1&&i._makeResizable(r);break;case"title":e(".om-dialog-title",i.uiDialogTitlebar).html(""+(r||"&#160;"))}e.OMWidget.prototype._setOption.apply(i,arguments)},_size:function(){var t=this.options,n,r,i=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),n=this.uiDialog.css({height:"auto",width:t.width}).height(),r=Math.max(0,t.minHeight-n);if(t.height==="auto")if(e.support.minHeight)this.element.css({minHeight:r,height:"auto"});else{this.uiDialog.show();var s=this.element.css("height","auto").height();i||this.uiDialog.hide(),this.element.height(Math.max(s,r))}else this.element.height(Math.max(t.height-n,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.omResizable("option","minHeight",this._minHeight())}}),e.extend(e.om.omDialog,{version:"2.0",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.om.omDialog.overlay.create(t)}}),e.extend(e.om.omDialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.om.omDialog.overlay.instances.length&&e(document).bind(e.om.omDialog.overlay.events,function(t){if(e(t.target).zIndex()<e.om.omDialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&n.keyCode&&n.keyCode===e.om.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.om.omDialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("om-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){t.parent().unbind(this.__removeBind);var n=e.inArray(t,this.instances);n!=-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var r=0;e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.om.omDialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.om.omDialog.overlay.width(),height:e.om.omDialog.overlay.height()})}}),e.extend(e.om.omDialog.overlay.prototype,{destroy:function(){e.om.omDialog.overlay.destroy(this.$el)}})}(jQuery);var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();(function(e){function t(t,n){var r=t+"Queue",i=e("#"+r+" .om-fileupload-queueitem").length;if(n==null||isNaN(n)||n<0||n>=i)return!1;var s=e("#"+r+" .om-fileupload-queueitem:eq("+n+")");return s.attr("id").replace(t,"")}e.omWidget("om.omFileUpload",{options:{swf:"/operamasks-ui/ui/om-fileupload.swf",action:"",actionData:{},height:30,width:120,buttonImg:null,multi:!1,autoUpload:!1,fileDataName:"Filedata",method:"POST",queueSizeLimit:999,removeCompleted:!0,fileExt:"*.*",fileDesc:null,sizeLimit:null,onSelect:function(){},onQueueFull:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},upload:function(e){var n=this.element,r=n.attr("id"),i=null,s=n.attr("id")+"Queue",o=n.attr("id")+"Uploader";if(typeof e!="undefined"&&(i=t(r,e))===!1)return;document.getElementById(o).startFileUpload(i,!1)},cancel:function(e){var n=this.element,r=n.attr("id"),i=null,s=n.attr("id")+"Queue",o=n.attr("id")+"Uploader";if(typeof e!="undefined"){if(isNaN(e))i=e;else if((i=t(n.attr("id"),e))===!1)return;document.getElementById(o).cancelFileUpload(i,!0,!0,!1)}else document.getElementById(o).clearFileUploadQueue(!1)},_setOption:function(t,n){var r=document.getElementById(this.element.attr("id")+"Uploader");if(t=="actionData"){var i="";for(var s in n)i+="&"+s+"="+n[s];var o=document.cookie.split(";");for(var u=0;u<o.length;u++)o[u]!==""&&(i+="&"+o[u]);n=encodeURI(i.substr(1)),r.updateSettings(t,n);return}var a=["buttonImg","buttonText","fileDesc","fileExt","height","action","sizeLimit","width"];e.inArray(t,a)!=-1&&r.updateSettings(t,n)},_create:function(){var t=this,n=this.element,r=e.extend({},this.options);r.wmode="opaque",r.expressInstall=null,r.displayData="percentage",r.folder="",r.simUploadLimit=1,r.scriptAccess="sameDomain",r.queueID=!1,r.onInit=function(){},r.onSelectOnce=function(){},r.onClearQueue=function(){},r.id=this.element.attr("id"),e(n).data("settings",r);var i=location.pathname;i=i.split("/"),i.pop(),i=i.join("/")+"/";var s={};s.omFileUploadID=r.id,s.pagepath=i,r.buttonImg&&(s.buttonImg=escape(r.buttonImg)),s.buttonText=encodeURI(e.om.lang._get(r,"omFileUpload","buttonText")),r.rollover&&(s.rollover=!0),s.action=r.action,s.folder=escape(r.folder);var o="",u=document.cookie.split(";");for(var a=0;a<u.length;a++)o+="&"+u[a];if(r.actionData)for(var f in r.actionData)o+="&"+f+"="+r.actionData[f];s.actionData=escape(encodeURI(o.substr(1))),s.width=r.width,s.height=r.height,s.wmode=r.wmode,s.method=r.method,s.queueSizeLimit=r.queueSizeLimit,s.simUploadLimit=r.simUploadLimit,r.hideButton&&(s.hideButton=!0),r.fileDesc&&(s.fileDesc=r.fileDesc),r.fileExt&&(s.fileExt=r.fileExt),r.multi&&(s.multi=!0),r.autoUpload&&(s.autoUpload=!0),r.sizeLimit&&(s.sizeLimit=r.sizeLimit),r.checkScript&&(s.checkScript=r.checkScript),r.fileDataName&&(s.fileDataName=r.fileDataName),r.queueID&&(s.queueID=r.queueID),r.onInit()!==!1&&(n.css("display","none"),n.after('<div id="'+n.attr("id")+'Uploader"></div>'),swfobject.embedSWF(r.swf,r.id+"Uploader",r.width,r.height,"9.0.24",r.expressInstall,s,{quality:"high",wmode:r.wmode,allowScriptAccess:r.scriptAccess},{},function(e){typeof r.onSWFReady=="function"&&e.success&&r.onSWFReady()}),r.queueID==0?e("#"+n.attr("id")+"Uploader").after('<div id="'+n.attr("id")+'Queue" class="om-fileupload-queue"></div>'):e("#"+r.queueID).addClass("om-fileupload-queue")),typeof r.onOpen=="function"&&n.bind("omFileUploadOpen",r.onOpen),n.bind("omFileUploadSelect",{action:r.onSelect,queueID:r.queueID},function(n,r,i){if(t._trigger("onSelect",n,r,i)!==!1){var s=Math.round(i.size/1024*100)*.01,o="KB";s>1e3&&(s=Math.round(s*.001*100)*.01,o="MB");var u=s.toString().split(".");u.length>1?s=u[0]+"."+u[1].substr(0,2):s=u[0],i.name.length>20?fileName=i.name.substr(0,20)+"...":fileName=i.name,queue="#"+e(this).attr("id")+"Queue",n.data.queueID&&(queue="#"+n.data.queueID),e(queue).append
('<div id="'+e(this).attr("id")+r+'" class="om-fileupload-queueitem">                            <div class="cancel" onclick="$(\'#'+e(this).attr("id")+"').omFileUpload('cancel','"+r+'\')">                            </div>                            <span class="fileName">'+fileName+" ("+s+o+')</span><span class="percentage"></span>                            <div class="om-fileupload-progress">                                <div id="'+e(this).attr("id")+r+'ProgressBar" class="om-fileupload-progressbar"><!--Progress Bar--></div>                            </div>                        </div>')}}),n.bind("omFileUploadSelectOnce",{action:r.onSelectOnce},function(n,i){t._trigger("onSelectOnce",n,i),r.autoUpload&&e(this).omFileUpload("upload")}),n.bind("omFileUploadQueueFull",{action:r.onQueueFull},function(n,r){t._trigger("onQueueFull",n,r)!==!1&&alert(e.om.lang.omFileUpload.queueSizeLimitMsg+r+".")}),n.bind("omFileUploadCancel",{action:r.onCancel},function(n,r,i,s,o,u){if(t._trigger("onCancel",n,r,i,s)!==!1&&o){var a=u==1?0:250;e("#"+e(this).attr("id")+r).fadeOut(a,function(){e(this).remove()})}}),n.bind("omFileUploadClearQueue",{action:r.onClearQueue},function(n,i){var s=r.queueID?r.queueID:e(this).attr("id")+"Queue";i&&e("#"+s).find(".om-fileupload-queueitem").remove(),t._trigger("onClearQueue",n,i)!==!1&&e("#"+s).find(".om-fileupload-queueitem").each(function(){var t=e(".om-fileupload-queueitem").index(this);e(this).delay(t*100).fadeOut(250,function(){e(this).remove()})})});var l=[];n.bind("omFileUploadError",{action:r.onError},function(n,r,i,s){if(t._trigger("onError",n,r,i,s)!==!1){var o=new Array(r,i,s);l.push(o),e("#"+e(this).attr("id")+r).find(".percentage").text(" - "+s.type+" Error"),e("#"+e(this).attr("id")+r).find(".om-fileupload-progress").hide(),e("#"+e(this).attr("id")+r).addClass("om-fileupload-error")}}),typeof r.onUpload=="function"&&n.bind("omFileUploadUpload",r.onUpload),n.bind("omFileUploadProgress",{action:r.onProgress,toDisplay:r.displayData},function(n,r,i,s){t._trigger("onProgress",n,r,i,s)!==!1&&(e("#"+e(this).attr("id")+r+"ProgressBar").animate({width:s.percentage+"%"},250,function(){s.percentage==100&&e(this).closest(".om-fileupload-progress").fadeOut(250,function(){e(this).remove()})}),n.data.toDisplay=="percentage"&&(displayData=" - "+s.percentage+"%"),n.data.toDisplay=="speed"&&(displayData=" - "+s.speed+"KB/s"),n.data.toDisplay==null&&(displayData=" "),e("#"+e(this).attr("id")+r).find(".percentage").text(displayData))}),n.bind("omFileUploadComplete",{action:r.onComplete},function(n,i,s,o,u){t._trigger("onComplete",n,i,s,unescape(o),u)!==!1&&(e("#"+e(this).attr("id")+i).find(".percentage").text(" - Completed"),r.removeCompleted&&e("#"+e(n.target).attr("id")+i).fadeOut(250,function(){e(this).remove()}),e("#"+e(n.target).attr("id")+i).addClass("completed"))}),typeof r.onAllComplete=="function"&&n.bind("omFileUploadAllComplete",{action:r.onAllComplete},function(e,n){t._trigger("onAllComplete",e,n)!==!1&&(l=[])})}}),e.om.lang.omFileUpload={queueSizeLimitMsg:"",buttonText:""}})(jQuery),function(e){function t(e,t){var n=e._getColModel();for(var r=0,i=n.length;r<i;r++)if(n[r].name==t.name)return r}function n(e,t,n){var r=0;e.push(n.replace(/\$/g,function(){return t[r++]}))}function r(e){e._colModel=[];var t=e._getColModel(),n=[],r=[],s=1,o=1,u,f,l,c=t.length;for(var h=0;h<c;h++)n[h]=[];for(var h=0,p=c;h<p;h++){u=t[h];for(var d=0,v=u.length;d<v;d++)f=u[d],s=f.rowspan||1,o=f.colspan||1,l=i(n,h,s,o),f.name&&r.push({header:f,colIndex:l})}r.sort(function(e,t){return e.colIndex-t.colIndex}),h=0;while(r[h]&&e._colModel.push(r[h++].header));}function i(e,t,n,r){var i=0;while(e[t][i]&&++i);for(var s=t;s<t+n;s++)for(var o=i;o<i+r;o++)e[s][o]=!0;return i}e.omWidget.addBeforeInitListener("om.omGrid",function(){var i=this._getColModel();if(!e.isArray(i)||i.length<=0||!e.isArray(i[0]))return;r(this),this.hDiv.addClass("hDiv-group-header"),e.extend(this,{_getColModel:function(){return this._colModel},_getHeaderCols:function(){var t=[],n=this.options,r=this.hDiv,i=r.find("th[axis^='col']");return e(i).each(function(){t.push(this)}),t.sort(function(e,t){return e.axis.slice(3)-t.axis.slice(3)}),!n.singleSelect&&t.unshift(r.find("th[axis='checkboxCol']")[0]),n.showIndex&&t.unshift(r.find("th[axis='indexCol']")[0]),n.rowDetailsProvider&&t.unshift(r.find("th[axis='expenderCol']")[0]),e(t)},_buildTableHead:function(){var r=this.options,i=this.element,s=i.closest(".om-grid"),o=r.colModel,u=0,a=-1,f="<th class='$' $ $ $ $ $><div class='$' style='text-align:$; $'>$</div></th>",l=["<thead>"],h,p,d,v;for(var m=0,g=o.length;m<g;m++){l.push("<tr>"),m==0&&(r.showIndex&&l.push("<th class='indexCol data-header-"+g+"' align='center' axis='indexCol' rowspan="+g+"><div class='indexheader' style='text-align:center;width:25px;' /></th>"),r.singleSelect||l.push("<th class='checkboxCol data-header-"+g+"' align='center' axis='checkboxCol' rowspan="+g+"><div class='checkboxheader' style='text-align:center;width:17px;'><span class='checkbox'/></div></th>")),d=o[m];for(var y=0,w=d.length;y<w;y++){p=d[y];var E=p.width||60,S=p.align||"center",x=p.name;p.name&&E=="autoExpand"&&(E=0,a=t(this,p));var T=p.wrap?"wrap":"";T+=(p.name?" data-header-":" group-header-")+(p.rowspan?p.rowspan:1),h=[T,p.align?"align="+p.align:"",x?"axis=col"+t(this,p):"",x?"abbr="+x:"",p.rowspan?"rowspan="+p.rowspan:"",p.colspan?"colspan="+p.colspan:"",p.wrap?"wrap":"",S,x?"width:"+E+"px":"",p.header],n(l,h,f),p.name&&(u+=E)}l.push("</tr>")}l.push("</thead>"),e("table",this.hDiv).html(l.join("")),v=e("thead",this.hDiv),this._fixHeaderWidth(a,u),this.thead=v,v=null}})})}(jQuery),function(e){function n(t){var n=e(this),r=t.element,i,s,o,a=t._getColModel(),f,l,h=t.options;if(!u(t))return;if(!t._allEditMode&&!n.attr("_insert"))return;if(t._triggered&&t._editView.editing&&g(n)==t._editView.rowId)return;if(t._rowAdding)return;var p=t._getTrs().index(n),d=t._getRowData(p);if(h.onBeforeEdit&&h.onBeforeEdit.call(t,p,d)===!1)return;c(t,n),i=t._editView.editRow,s=i.find(">.grid-edit-form"),o=r.parent().scrollLeft(),t._getHeaderCols().each(function(u){var c=e(this).attr("axis"),h,p=n.find("td:eq("+u+")"),v,m;if(c.substring(0,3)!="col"){e.isEmptyObject(t._editComps)&&i.css("padding-left",parseInt(i.css("padding-left"))+p.outerWidth());return}var g=c.substring(3);h=a[g];var y=h.editor;if(!t._triggered){if(!y||y&&(y.editable===!1||e.isFunction(y.editable)&&y.editable()===!1)){var w=y&&y.renderer;h.editor=y={},y.type="text",w&&(y.renderer=w,y.type="custom"),y.editable=!1}else y.type=y.type||"text",y.editable=!0,y.rules&&(t._validate=!0);m=h.editor.name||h.name,y.options=y.options||{},t._editComps[m]={}}else m=h.editor.name||h.name;f=t._editComps[m],l=(l=b(t,n,h))==undefined?"":l,!t._triggered&&y.editable&&y.rules&&(t._errorHolders[m]=e("<div class='errorContainer' style='display:none'></div>").appendTo(r.parent()));var E=f.instance,S,T=y.type;if(!E){S=e("<div style='position:absolute'></div>").css({left:p.position().left+o,top:3}).appendTo(s).addClass("grid-edit-wrapper"),E=f.instance=e("<input></input>").attr({name:m,id:m}).appendTo(S),"text"!=T&&"custom"!=T&&E[T](y.options);if("omCalendar"==T||"omCombo"==T){var N=E.parent();"omCalendar"==T?(E.val(l).width(p.outerWidth()-24),E.width(p.outerWidth(!0)-(N.outerWidth(!0)-E.width()))):(E.next("input").attr({id:E.prop("id"),name:E.prop("name")}),E.attr({id:"",name:""}),E.next("input").width(p.outerWidth(!0)-(N.outerWidth(!0)-E.next("input").width())))}else"text"==T&&(E.addClass("grid-edit-text"),y.editable||E.attr("readonly","readonly").addClass("readonly-text")),"custom"==T&&(E=f.instance=S.html(y.renderer.call(t,l,d))),E.width(p.outerWidth(!0)-(E.outerWidth(!0)-E.width()));f.model=h,f.type=T,f.id=h.name;if("custom"!=T){var k="omCombo"==T?E.next():E;k.blur(function(e){var n=t._errorHolders[m];n&&n.hide()})}}switch(T){case"omCalendar":E=E.val(l).omCalendar();break;case"omNumberField":E.val(l).trigger("blur");break;case"omCombo":E.omCombo("value",l);break;case"text":E.val(l);break;case"custom":E.html(y.renderer.call(t,l,d));default:}}),!t._triggered&&t._validate&&E(t),t._validator&&t._validator.form(),t._triggered=!0}function r(e){e._changeData={update:{},insert:{},"delete":{}}}function i(e){return!u(e)||!l(e)}function s(e){var t=e.element,n=t.parent(),r=e._editView,i=r.view,s=r.editBtn,o=r.editRow,u={};return u.top=o.height(),t.width()<n.width()?u.left=t.width()/2-s.width()/2:u.left=n.scrollLeft()+n.width()/2-s.width()/2,u}function o(){u(this)&&(r(this),a(this),this._triggered&&(f(this),this._editView.view.hide(),this._editView.editing=!1,this.hDiv.scrollLeft(0),this.element.parent().scrollLeft(0)))}function u(e){return!e._allEditMode||e._globalEditable}function a(e){var t=e.getData().rows;e._rowIdDataMap={},e._getTrs().each(function(n,r){e._rowIdDataMap[g(r)]=t[n]})}function f(t){t._validator&&(t._validator.resetForm(),e.each(t._errorHolders,function(e,t){t.empty().hide()}))}function l(t){var n=t._changeData;return!(e.isEmptyObject(n.update)&&e.isEmptyObject(n.insert)&&e.isEmptyObject(n["delete"]))}function c(t,n){var r=t.element,i=r.next(".grid-edit-view"),o,u,a=e(n).position(),f=r.parent().scrollTop(),l=t.options;if(i.length==0){i=e("<div class='grid-edit-view'><div class='body-wrapper'><div class='grid-edit-row'><form class='grid-edit-form'></form></div><div class='gird-edit-btn'><input type='button' class='ok' value=''/><input type='button' class='cancel' value=''/></div></div></div>").width(r.outerWidth()).insertAfter(r);var o=i.find(".gird-edit-btn"),u=o.prev(".grid-edit-row"),c;t._editView={view:i,editRow:u,editBtn:o},c=s(t),o.css({left:c.left,top:c.top});var h=o.find("input.ok").omButton(),d=o.find("input.cancel").omButton();h.click(function(){if(t._validator&&!t._validator.form())return;var e=r.find("tr[_grid_row_id='"+t._editView.rowId+"']");v(t,e),i.hide(),t._editView.editing=!1,h.blur(),t._rowAdding&&(t._refreshHeaderCheckBox(),t._rowAdding=!1);var n=t._getTrs().index(e);l.onAfterEdit&&l.onAfterEdit.call(t,n,t._getRowData(n))}),d.click(function(){t.cancelEdit(this)})}t._editView.rowId=g(n),t._editView.editing?i.animate({top:a.top+f},"fast"):(i.css({top:a.top+f}),t._editView.editing=!0,i.show(),t._colWidthResize&&(p(t),t._colWidthResize=!1))}function h(){if(!u(this)||!this._triggered)return;if(this._editView.editing){this.element.parent().scrollLeft(0);var e=this;setTimeout(function(){p(e)},0)}else this._colWidthResize=!0}function p(t,n,r){var i=t.element,o=t._editView,u=o.view,a=i.parent().scrollLeft(),f=o.editBtn,l;u.width(i.outerWidth()),t._getHeaderCols().each(function(i,s){var o=e(s).attr("abbr"),u=e(s),f=n&&n.prop("abbr")===u.prop("abbr");f&&(l=!0);if(n&&!l)return;e.each(t._editComps,function(e,t){var i=t.instance,s=t.type;if(o==t.id){if(!f&&n)return i.closest("div.grid-edit-wrapper").css("left","+="+r),!1;f||i.closest("div.grid-edit-wrapper").width(u.outerWidth()).css("left",u.position().left+a);if("omCalendar"==s||"omCombo"==s){var l=i.parent();"omCalendar"==s?(i.width(u.outerWidth()-24),i.width(u.outerWidth(!0)-(l.outerWidth(!0)-i.width()))):i.next("input").width(u.outerWidth(!0)-(l.outerWidth(!0)-i.next("input").width()))}else i.width(u.outerWidth(!0)-(i.outerWidth(!0)-i.width()))}})});var c=s(t);n?f.animate({left:c.left,top:c.top},"fast"):f.css({left:c.left,top:c.top})}function d(e,t){if(!u(this)||!this._triggered||!this._editView.editing){this._colWidthResize=!0;return}p(this,e,t)}function v(t,n){var r=e(n),i=t._editView.editRow,s=t._editComps,o=g(r),u=t._getTrs().index(r),a=t._getRowData(u);e.each(s,function(i,s){var f=s.model.name,l=y(t,r,s),c,h,p;r.attr("_insert")?t._changeData.insert[o][f]=l:(c=w(t,n)[f],p=t._changeData.update[o],String(l)===String(c)?(m(r,s.model,!1),p&&delete p[f],e.isEmptyObject(p)&&delete t._changeData.update[o]):(m(r,s.model,!0),p=t._changeData.update[o]=p||{},p[f]=l)),s.model.renderer?h=s.model.renderer(l,a,u):h=l==undefined?"":l,r.find("td[abbr='"+f+"'] >div").html(h)})}function m(e,t,n){e.find("td[abbr='"+t.name+"']").toggleClass("grid-cell-dirty",n)}function g(t){return e(t).attr("_grid_row_id")}function y(e,t,n){var r,i=w(e,t),s=n.instance;switch(n.type){case"omCalendar":r=s.val();case"omNumberField":r=s.val();break;case"omCombo":r=s.omCombo("value");break;case"text":r=s.val();break;case"custom":if(n.model.editor.getValue)return n.model.editor.getValue.call(s,i,n.model.name);default:}return r}function b(e,t,n){var r,i=n.name;if(t.attr("_insert"))r=w(e,t)[i];else{var s=e._changeData.update[g(t)];s&&s[i]!=null?r=s[i]:r=w(e,t)[i]}return r}function w(t,n){var r=g(n);return e(n).attr("_insert")?t._changeData.insert[r]:t._rowIdDataMap[r]}function E(t){var n=t._editView.editRow.find(">.grid-edit-form"),r={},i=r.rules={},s=r.messages={},o=t._getColModel();e.each(o,function(t,n){var r=n.editor.rules;if(r){var o=i[n.editor.name||n.name]={},u=s[n.editor.name||n.name]={};if(r.length>0&&!e.isArray(r[0])){var a=[];a.push(r),r=a}for(var f=0,l=r.length;f<l;f++){var c=r[f][0];o[c]=r[f][1]==undefined?!0:r[f][1],r[f][2]&&(u[c]=r[f][2])}}}),e.extend(r,{onkeyup:function(e){this.element(e)},errorPlacement:function(e,t){},showErrors:function(n,r){r&&r.length>0?e.each(r,function(n,r){var i=e(r.element),s=i.attr("name"),o=t._errorHolders[s];if(o){var u=i.offset(),a=t.element.offset();o.css({left:u.left-a.left+i.outerWidth(),top:u.top-a.top+i.outerHeight()}).html(r.message),i.is(":focus")&&o.show()}}):e.each(this.currentElements,function(n,r){var i=t._errorHolders[e(r).attr("name")];i&&i.empty().hide()});var i=t._editView.editBtn.find("input.ok"),s=!0;e.each(t._errorHolders,function(e,t){if(!t.is(":empty"))return s=!1}),s?i.omButton("enable"):i.omButton("disable"),this.defaultShowErrors()}}),t._validator=n.validate(r),e.each(t._editComps,function(e,n){var r=n.model.editor;if(r.editable&&r.rules){var i=r.name||n.model.name,s=t._errorHolders[i],o=n.type=="omCombo"?n.instance.next("input"):n.instance;o.mouseover(function(){s&&!s.is(":empty")&&s.show()}).mouseout(function(){s&&s.hide()})}})}var t=Object.prototype.hasOwnProperty;e.omWidget.addInitListener("om.omGrid",function(){var a=this,c=a.element,p=a.options,v=this._getColModel();a._triggered=!1,a._globalEditable=!1,p.editMode=p.editMode||"all",a._allEditMode=p.editMode=="all";for(var m=0,y=v.length;m<y;m++){a._globalEditable=v[m].editor?!0:!1;if(a._globalEditable)break}if(!u(a))return;a._editComps={},a._errorHolders={},a._colWidthResize,p._onRefreshCallbacks.push(o),p._onResizableCallbacks.push(d),p._onResizeCallbacks.push(h),this.tbody.delegate("tr.om-grid-row","dblclick",function(e){n.call(this,a)}),this.tbody.delegate("tr.om-grid-row","click",function(e){a._triggered&&a._editView.editing&&(a._validator?a._validator.valid()&&n.call(this,a):n.call(this,a))});var b;c.parent().scroll(function(){a._triggered&&(b&&clearTimeout(b),b=setTimeout(function(){var e=s(a);a._editView.editBtn.animate({left:e.left,top:e.top},a._editView.editing?"fast":0),b=null},300))}),e.extend(this,{cancelEdit:function(t){var n=this._editView,r=this.options;if(!u(this)||!this._triggered||this._triggered&&!n.editing)return;n.view.hide(),n.editing=!1,this._rowAdding&&(this.deleteRow(this._getTrs().index(this.tbody.find("tr[_grid_row_id='"+a._editView.rowId+"']"))),this._rowAdding=!1),f(this),t&&e(t).blur(),r.onCancelEdit&&r.onCancelEdit.call(this)},cancelChanges:function(){this.cancelEdit();if(i(this))return;r(this),f(this),this.refresh()},editRow:function(e){if(!u(this))return;n.call(this._getTrs().eq(e)[0],this)},deleteRow:function(t){if(!u(this)||this._triggered&&this._editView.editing)return;var n=this._getTrs(),r=this;e.isArray(t)||(t=[t]),t.sort(function(e,t){return t-e}),e(t).each(function(e,t){var i=n.eq(t),s=i.next(),o=g(i);i.attr("_insert")?(delete r._changeData.insert[o],i.remove(),s.hasClass("rowExpand-rowDetails")&&s.remove()):(r._changeData["delete"][o]=r._rowIdDataMap[o],i.attr("_delete","true").hide(),s.hasClass("rowExpand-rowDetails")&&s.hide())}),this._refreshHeaderCheckBox()},getChanges:function(n){var r={update:[],insert:[],"delete":[]},i=n?n:"update",s=this._changeData,o;if(i==="update"){var u=s[i];for(o in u)t.call(u,o)&&r[i].push(e.extend(!0,{},this._rowIdDataMap[o],u[o]));i=n?n:"insert"}if(i==="insert"){var a=s[i];for(o in a)t.call(a,o)&&r[i].push(a[o]);i=n?n:"delete"}if(i==="delete"){var f=s[i];for(o in f)t.call(f,o)&&r[i].push(f[o])}return n?r[n]:r},insertRow:function(t,n,r){var i=this.options,s=this._getColModel(),o=this.element;if(!u(this)||this._rowAdding)return;e.isPlainObject(t)&&(n=t,t=0),t===!0&&(n={},t=0,r=!0);var a=this._getTrs(),f={};t="begin"==t||t==undefined?0:"end"==t?a.length:t;for(var l=0,c=s.length;l<c;l++)f[s[l].name]="";this._changeData.insert[this._guid]=e.extend(!0,f,n);var h=this._buildRowCellValues(s,f,t),p=[],d=i.rowClasses;isRowClassesFn=typeof d=="function",rowCls=isRowClassesFn?d(t,f):d[t%d.length],tdTmp="<td align='$' abbr='$' class='grid-cell-dirty $'><div align='$' class='$' style='width:$px'>$</div></td>",p.push("<tr class='om-grid-row "+rowCls+"' _grid_row_id="+this._guid++ +" _insert='true'>"),this._getHeaderCols().each(function(t){var n=e(this).attr("axis"),r=!1,i,o,u;if(n=="indexCol")i="<a class='om-icon'></a>";else if(n=="checkboxCol")i='<span class="checkbox"/>';else if(n.substring(0,3)=="col"){var a=n.substring(3);i=h[a],s[a].wrap&&(r=!0)}else i="";o=[this.align,this.abbr,n,this.align,r?"wrap":"",e("div",e(this)).width(),i],u=0,p.push(tdTmp.replace(/\$/g,function(){return o[u++]}))}),p.push("</tr>");var v=e(p.join(" ")),m,g;t==0?v.prependTo(o.find(">tbody")):(m=a.eq(t-1),g=m.next(),m=g.hasClass("rowExpand-rowDetails")?g:m,m.after(v)),r||(this.editRow(t),this._rowAdding=!0)},saveChanges:function(){this.cancelEdit();if(i(this))return;var n=this._changeData.update,s=this.element.find("tr.om-grid-row"),o=[];for(var u in n)t.call(n,u)&&e.extend(!0,this._rowIdDataMap[u],n[u]);var a=this;s.each(function(t,n){var r=e(n);r.attr("_delete")?r.remove():o.push(w(a,n))}),this.pageData.data.rows=o,r(this),f(this),this.refresh()},onBeforeEdit:function(e,t){},onAfterEdit:function(e,t){},onCancelEdit:function(){},getData:function(){var e=this.pageData.data,t=this._getTrs(),n=this;return u(this)&&l(this)&&(e={total:e.total},e.rows=[],t.each(function(t,r){e.rows.push(n._getRowData(t))})),e},_getRowData:function(t){var n=this._getTrs().eq(t),r=g(n),s;if(i(this))return this.pageData.data.rows[t];if(n.attr("_insert"))s=this._changeData.insert[r];else{var o=this._rowIdDataMap[r],u=this._changeData.update;s=o,u[r]&&(s=e.extend(!0,{},o,u[r]))}return s}})})}(jQuery),function(e){e.omWidget.addInitListener("om.omGrid",function(){var t=this,n=this.options,r=n.rowDetailsProvider,i=n.colModel,s=this.thead;if(!(r&&i.length>0))return;s.find("th:first").before('<th align="center" axis="expenderCol" class="expenderCol" rowspan='+(e.isArray(i[0])?i.length:1)+'><div style="text-align: center; width: 14px;"></div></th>');var o=-1,u=0;i=this._getColModel(),e(i).each(function(e){i[e].width=="autoExpand"?o=e:u+=i[e].width});var f=s.find('th[axis="expenderCol"]').width();if(o!=-1)s.find('th[axis="col'+o+'"] >div').css("width","-="+f);else if(n.autoFit){var l=f/u;s.find('th[axis^="col"] >div').each(function(t){e(this).css("width","-="+parseInt(i[t].width*l))})}var c=this._getHeaderCols().size();this.tbody.delegate("td.expenderCol >div","click",function(n){var i=e(this),s=i.closest("tr"),o=s.next("tr");if(o.hasClass("rowExpand-rowDetails"))o.toggle();else{var u=t._getTrs().index(s);rowData=t._getRowData(u),rowDetails=r?r(rowData,u):"&#160;",s.after('<tr class="rowExpand-rowDetails"><td colspan="'+(c-1)+'"><div class="rowExpand-rowDetails-content">'+rowDetails+"</div></td></tr>")}return i.toggleClass("rowExpand-expanded").parent().attr("rowspan",i.hasClass("rowExpand-expanded")?2:1),!1})})}(jQuery),function(e){function n(t,n){var r=t._oldPage,i=t.pageData.nowPage;return"input"===n?r!=e(".pControl input",t.element.closest(".om-grid")).val():"reload"===n?!0:r!=i}var t=[{cls:"pFirst",type:"first"},{cls:"pPrev",type:"prev"},{cls:"pNext",type:"next"},{cls:"pLast",type:"last"},{cls:"pReload",type:"reload"}];e.omWidget.addInitListener("om.omGrid",function(){var r=this,i=this._getColModel(),s=this._getHeaderCols().filter("[axis^='col']"),o=this.pDiv;e(s).each(function(t){var n=i[t].sort;if(n){var o=e(this).click(function(){var e=i[t].name,u=o.hasClass("asc")?"asc":o.hasClass("desc")?"desc":null,a=u=="asc"?"desc":"asc";s.removeClass("asc desc"),o.addClass(a);var f=r._extraData;delete f.sortBy,delete f.sortDir;switch(n){case"serverSide":f.sortBy=e,f.sortDir=a,r.reload();return;case"clientSide":n=function(t,n){var r=t[e],i=n[e];return r==i?0:r>i?1:-1};break;default:}var c=r.pageData.data;u==null?c.rows=c.rows.sort(n):c.rows=c.rows.reverse(),r.refresh()});o.children().first().append('<img class="om-grid-sortIcon" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></img>')}});for(var u=0,f=t.length;u<f;u++)(function(u){o.find("."+t[u].cls).click(function(){var o=n(r,t[u].type);s.each(function(t){var n=e(this);o&&(n.hasClass("asc")||n.hasClass("desc"))&&"serverSide"!==i[t].sort&&n.removeClass("asc desc")})})})(u);e(".pControl input",o).keydown(function(t){var o=n(r,"input");t.keyCode==e.om.keyCode.ENTER&&s.each(function(t){var n=e(this);o&&(n.hasClass("asc")||n.hasClass("desc"))&&"serverSide"!==i[t].sort&&n.removeClass("asc desc")})}),this.clearSort=function(){var e=this._extraData;e.sortBy=undefined,e.sortDir=undefined,this._getHeaderCols().removeClass("asc desc")}})}(jQuery),function(e){e.omWidget("om.omItemSelector",{options:{width:"300px",height:"300px",dataSource:[],value:[],clientFormatter:!1,autoSort:!1,preProcess:function(e){return e},onError:jQuery.noop,onSuccess:jQuery.noop,onBeforeItemSelect:jQuery.noop,onBeforeItemDeselect:jQuery.noop,onItemSelect:jQuery.noop,onItemDeselect:jQuery.noop},_create:function(){this.element.addClass("om-itemselector om-widget").html('<table style="height:100%;width:100%" cellpadding="0" cellspacing="0"><tr><td class="om-itemselector-leftpanel"></td><td class="om-itemselector-toolbar"></td><td class="om-itemselector-rightpanel"></td></tr></table>');var t=e("td",this.element),n=e("<thead></thead>"),r=e("<th></th>").attr({axis:"checkboxCol",align:"center"}).append(e('<div class="header"><span class="checkbox"/><span class="om-itemselector-title"/></div>'));e("<tr></tr>").append(r).appendTo(n),this.leftPanel=e('<table cellspacing="0" cellpadding="0"></table>').append(n).append('<tr><td><div class="om-itemselector-up"><span class="upbtn"/></div><div class="om-itemselector-items"><dl></dl></div><div class="om-itemselector-down"><span class="downbtn"/></div></tr></td>').appendTo(t.eq(0)),this.toolbar=e("<div></div>").appendTo(t.eq(1)),this.rightPanel=this.leftPanel.clone().appendTo(t.eq(2))},_init:function(){var t=this.options,n=t.dataSource;this.leftPanel.find(".om-itemselector-title").html(e.om.lang._get(t,"omItemSelector","availableTitle")),this.rightPanel.find(".om-itemselector-title").html(e.om.lang._get(t,"omItemSelector","selectedTitle")),this.element.css({width:t.width,height:t.height}),this._buildToolbar(),this._resizePanel(),this._bindEvents();if(typeof n=="string"){var r=this;e.ajax({url:n,method:"GET",dataType:"json",success:function(e,n){if(r._trigger("onSuccess",null,e,n)===!1)return;e=t.preProcess(e),t.dataSource=e,r._buildList()},error:function(e,t,n){r._trigger("onError",null,e,t,n)}})}else this._buildList();this._refreshPageButton(this.leftPanel),this._refreshPageButton(this.rightPanel)},_buildToolbar:function(){var t="",n=["add","space","remove"];for(var r=0,i=n.length;r<i;r++){var s=n[r];t+='<div class="om-icon om-itemselector-tbar-'+s+'" title="'+(e.om.lang._get({},"omItemSelector",s+"IconTip")||"")+'"></div>'}this.toolbar.html(t)},_resizePanel:function(){var t=this,n=t.leftPanel,r=t.rightPanel,i=e(".om-itemselector-items",n),s=e(".om-itemselector-items",r),o=n.parent().innerHeight()-i.offset().top+n.offset().top,u=(e("tr",t.element).innerWidth()-t.toolbar.outerWidth())/2,f=n.outerWidth(u).innerWidth();i.outerHeight(o).width(f),s.outerHeight(o).width(f),t.element.data("dltop",e(".om-itemselector-items >dl",n).offset().top)},_buildList:function(){var t=this.options;dataSource=t.dataSource,value=t.value,fmt=t.clientFormatter,leftHtml="",rightHtml="",inArray=function(e,t){for(var n=0,r=t.length;n<r;n++)if(e.value===t[n])return!0;return!1},buildHtml=fmt?function(e,t){return'<dt _index="'+e+'"><span class="checkbox"/>'+fmt(t,e)+"</dt>"}:function(e,t){return'<dt _index="'+e+'"><span class="checkbox"/>'+t.text+"</dt>"},e.isArray(dataSource)&&jQuery.isArray(value)&&e.each(dataSource,function(e,t){inArray(t,value)?rightHtml+=buildHtml(e,t):leftHtml+=buildHtml(e,t)}),e(".om-itemselector-items>dl",this.leftPanel).html(leftHtml),e(".om-itemselector-items>dl",this.rightPanel).html(rightHtml);var n=e(".om-itemselector-items"),r=e(">dl>dt",n).outerHeight(),i=n.outerHeight(),s=r-i%r;n.outerHeight(i+s)},_bindEvents:function(){var t=this,n=t.toolbar;t.leftPanel.delegate(".om-itemselector-items>dl>dt","click.omItemSelector",function(n){e(this).toggleClass("om-state-highlight"),t._refreshHeaderCheckbox(t.leftPanel)}),t.rightPanel.delegate(".om-itemselector-items>dl>dt","click",function(n){e(this).toggleClass("om-state-highlight"),t._refreshHeaderCheckbox(t.rightPanel)}),this.leftPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){e(".om-itemselector-items>dl>dt",t.element).removeClass("om-state-highlight"),e(this).addClass("om-state-highlight"),t._moveItemsToTarget(".om-state-highlight",!0)}),this.rightPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){e(".om-itemselector-items>dl>dt",t.element).removeClass("om-state-highlight"),e(this).addClass("om-state-highlight"),t._moveItemsToTarget(".om-state-highlight",!1)}),e(".om-itemselector-tbar-add",n).click(function(){t._moveItemsToTarget(".om-state-highlight",!0)}),e(".om-itemselector-tbar-remove",n).click(function(){t._moveItemsToTarget(".om-state-highlight",!1)}),e(".header span.checkbox",t.leftPanel).click(function(){var n=t.leftPanel,r=e(".om-itemselector-items>dl>dt",n);e(this).toggleClass("selected"),e("div.om-itemselector-up:visible",n).length>0&&(r=e(t._getPageItems(n,r))),e(this).hasClass("selected")?r.addClass("om-state-highlight"):r.removeClass("om-state-highlight")}),e(".header span.checkbox",t.rightPanel).click(function(){var n=t.rightPanel,r=e(".om-itemselector-items>dl>dt",n);e(this).toggleClass("selected"),e("div.om-itemselector-up:visible",n).length>0&&(r=e(t._getPageItems(n,r))),e(this).hasClass("selected")?r.addClass("om-state-highlight"):r.removeClass("om-state-highlight")}),t.element.delegate("div.om-itemselector-up:not([disabled])","click",function(){t._page(e(this),!0),t._refreshHeaderCheckbox(e(this).parentsUntil("table").last().parent())}),t.element.delegate("div.om-itemselector-down:not([disabled])","click",function(){t._page(e(this),!1),t._refreshHeaderCheckbox(e(this).parentsUntil("table").last().parent())})},_page:function(e,t){var n=t?e.next():e.prev(),r=n.children("dl"),i=n.outerHeight()-2,s=r.outerHeight(),o=r.offset().top,u,a=this.element.data("dltop")+20;t?(r.offset({top:o+i}),u=n.next(),((o=r.offset().top)>0||r.outerHeight()-o-a>i)&&u.removeAttr("disabled").removeClass("om-itemselector-down-disabled"),o>0&&o<i&&e.attr("disabled","disabled").addClass("om-itemselector-up-disabled")):(r.offset({top:o-i}),u=n.prev(),u.removeAttr("disabled").removeClass("om-itemselector-up-disabled"),(o=r.offset().top)<0&&s+o-a<=i&&e.attr("disabled","disabled").addClass("om-itemselector-down-disabled"))},_refreshHeaderCheckbox:function(t){var n=e(".om-itemselector-items>dl>dt",t);n=e(this._getPageItems(t,n));var r=n.filter(".om-state-highlight").length;e(".header span.checkbox",t).toggleClass("selected",r>0&&n.length===r)},_refreshPageButton:function(t){var n=e(".om-itemselector-items",t),r=e(".om-itemselector-items >dl",t),i=e(".om-itemselector-up",t),s=e(".om-itemselector-down",t),o=n.outerHeight(),u=r.outerHeight(),f=r.offset().top,l=this.element.data("dltop")+20;u>20&&l-f>=u&&(r.offset({top:f+o}),f=r.offset().top),u>o?(i.is(":hidden")&&(n.outerHeight(o-i.outerHeight()*2),i.show(),s.show()),f>0&&f<o?i.attr("disabled","disabled").addClass("om-itemselector-up-disabled"):i.removeAttr("disabled").removeClass("om-itemselector-up-disabled"),f>0||u+f-l>o?s.removeAttr("disabled").removeClass("om-itemselector-down-disabled"):s.attr("disabled","disabled").addClass("om-itemselector-down-disabled")):i.is(":visible")&&(n.outerHeight(o+i.outerHeight()*2),i.hide(),s.hide())},_getPageItems:function(t,n){var r=e(".om-itemselector-items",t),i=r.outerHeight(),s=e(">dl",r),o=[],u=r.next(":visible").length>0,f=n.outerHeight(),l=i/f,c=s.offset().top,h=this.element.data("dltop");return c=u?h-c+20:h-c,o=e.grep(n,function(e,t){return t<l*(c/i+1)-1&&t>=l*(c/i)}),o},select:function(t){e.isArray(indexes)||(indexes=[indexes]);for(var n=0,r=t.length;n<r;n++)e('.om-itemselector-items>dl>dt[_index="'+t[n]+'"]').addClass("om-state-highlight")},_moveItemsToTarget:function(t,n){var r=this,i=n?this.leftPanel:this.rightPanel,s=e(".om-itemselector-items>dl>dt"+t,i);if(s.size()==0)return;var o=n?this.rightPanel:this.leftPanel,u=this.options,f=[];s.each(function(){f.push(u.dataSource[e(this).attr("_index")])});if(n){if(r._trigger("onBeforeItemSelect",null,f)===!1)return;s.appendTo(e(".om-itemselector-items>dl",o)).removeClass("om-state-highlight"),r._trigger("onItemSelect",null,f)}else{if(r._trigger("onBeforeItemDeselect",null,f)===!1)return;s.appendTo(e(".om-itemselector-items>dl",o)).removeClass("om-state-highlight"),r._trigger("onItemDeselect",null,f)}r._refreshHeaderCheckbox(i),r._refreshPageButton(i),r._refreshPageButton(o)},value:function(t){if(arguments.length==0){var n=this.options,r=e(".om-itemselector-items>dl>dt",this.rightPanel),i=[];return r.each(function(){i.push(n.dataSource[e(this).attr("_index")].value)}),i}e.isArray(t)&&(this.options.value=t,this._buildList())}}),e.om.lang.omItemSelector={availableTitle:"",selectedTitle:"",addIconTip:"",removeIconTip:""}}(jQuery),function(e){e.omWidget("om.omMenu",{options:{contextMenu:!1,maxWidth:200,minWidth:100,dataSource:"local"},show:function(t){var n=this,r=n.options,i,s,o=n.element,u=e(t).offset();if(r.contextMenu)i=t.pageY,s=t.pageX,t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0;else{var f=parseInt(e(t).css("borderBottomWidth").replace("px",""));i=u.top+e(t).height()+(f!="NaN"?f:0)+1,s=u.left+1}var l=o.parent();while(l.css("position")=="static"&&l[0].nodeName!="BODY")l=l.parent();i-=l.offset().top,s-=l.offset().left,s+o.outerWidth()>document.documentElement.clientWidth&&(s=s-o.outerWidth()-20),e(o).css({top:i,left:s}).show(),e(o).children("ul.om-menu").show();var c=e(o).width()*.7;e(o).children("ul.om-menu").children().each(function(t,n){e(n).find("span:first").hasClass("om-menu-item-sep")?e(n).find("span:first").width("98%"):e(n).find("span:first").width()>c&&e(n).find("span:first").width(e(n).attr("aria-haspopup")?c-15:c)})},hide:function(){this._hide()},disableItem:function(e){this.element.find("#"+e).addClass("om-state-disabled").unbind(".menuItem")},enableItem:function(e){var t=this,n=t.element,r=n.find("#"+e);r.removeClass("om-state-disabled"),t._bindLiEvent(r)},destroy:function(){var t=e(document),n;while(n=this.globalEvent.pop())t.unbind(".omMenu",n)},_create:function(){var e=this,t=e.options,n=e.element,r=t.dataSource;n.addClass("om-menu-container om-menu-content om-corner-all"),n.css("position","absolute");if(r)if(r!="local")typeof r=="string"?e._ajaxLoad(n,r):typeof r=="object"&&(n.append(e._appendNodes.apply(e,[r])),e._bindEvent());else{var i=n.children("ul").addClass("om-menu");e._parseDomMenu(i),e._bindEvent()}},_init:function(){var t=this.options,n=this.element;n.css({minWidth:t.minWidth-10,maxWidth:t.maxWidth-10}),e.browser.msie&&e.browser.version=="6.0"&&n.css("width",t.minWidth+30),e.browser.msie&&e.browser.version=="7.0"&&n.css("width",t.maxWidth-10)},_ajaxLoad:function(t,n){var r=this;e.ajax({url:n,method:"POST",dataType:"json",success:function(e){t.append(r._appendNodes.apply(r,[e])),r._bindEvent()}})},_appendNodes:function(t,n){var r=this,i=[],s=n==undefined?"om-menu":"om-menu-content",o=n==undefined?"block":"none",u=n==undefined?"om-menu-icon":"om-menu-icon om-menu-icon-child";i.push('<ul class="'+s+' om-corner-all" style="display:'+o+';">');var f=[];return e(t).each(function(t,n){n.children!=null?(n.disabled===!0||n.disabled=="true"?f.push('<li id="'+n.id+'" aria-haspopup="true"  class="om-state-disabled">'):f.push('<li id="'+n.id+'"  aria-haspopup="true">'),f.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),n.icon?f.push('<img class="'+u+'" src="'+n.icon+'">'):null,n.icon?f.push("<span>"+n.label+"</span>"):f.push('<span style="margin-left:2em;">'+
n.label+"</span>"),f.push('<span class="ui-icon-span" role="popup"></span>'),f.push("</a>"),f.push(r._appendNodes(n.children,t++)),f.push("</li>")):(n.disabled===!0||n.disabled=="true"?f.push('<li id="'+n.id+'"  class="om-state-disabled">'):f.push('<li id="'+n.id+'" >'),f.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">'),n.icon?f.push('<img class="'+u+'" src="'+n.icon+'">'):null,n.icon?f.push("<span>"+n.label+"</span>"):f.push('<span style="margin-left:2em;">'+n.label+"</span>"),f.push("</a>"),f.push("</li>")),(n.seperator=="true"||n.seperator==1)&&f.push('<li class="om-menu-sep-li"  ><span class="om-menu-item-sep">&nbsp;</span></li>');var i=e(r.element).attr("id")+"_"+n.id;e(r.element).data(i,n)}),i.push(f.join("")),i.push("</ul>"),i.join("")},_parseDomMenu:function(t){t.parent().attr("aria-haspopup")=="true"&&t.addClass("om-menu-content om-corner-all"),t.css("display","none");var n=t.children();for(var r=0;r<n.length;r++){var i=e(n[r]),s=i.children("ul");s.length>0&&(i.attr("aria-haspopup","true"),i.find("span[role='popup']").addClass("ui-icon-span"),this._parseDomMenu(s)),i.find("a").addClass("om-corner-all om-menu-indicator"),i.find("img").addClass("om-menu-icon")}},_showChildren:function(t){var n=this;if(t&&t.length>0){var r=t.children("ul").eq(0);r.css({minWidth:this.options.minWidth,top:t.position().top});var i=t.width();2*i+t.offset().left>document.documentElement.clientWidth&&(i=-i),r.css("left",i),r.show(),r.children().each(function(t,i){e(i).find("span:first").hasClass("om-menu-item-sep")?e(i).find("span:first").width("98%"):(r.width()>n.options.maxWidth?(r.width(n.options.maxWidth),width=n.options.maxWidth*.6):(r.attr("hasShow")==undefined&&(r.width(r.find("li:eq(0)>a:eq(0)").width()+15),r.attr("hasShow",!0)),width=r.width()*.6),e(i).find("span:first").width(width))})}},_hideChildren:function(e){e.children("ul").eq(0).hide()},_bindLiEvent:function(t){var n=this,r=n.element,i=n.options;e(t).bind("mouseenter.menuItem",function(){var t=e(this),r=t.parent().width();t.addClass("om-menu-item-hover"),e.browser.msie&&e.browser.version=="9.0"&&t.parent().width(r),t.attr("aria-haspopup")&&setTimeout(function(){n._showChildren(t)},200)}).bind("mouseleave.menuItem",function(){var t=e(this);t.removeClass("om-menu-item-hover"),setTimeout(function(){t.children("ul").hide()},200)}).bind("mousedown.menuItem",function(t){var s=e(r).data(e(r).attr("id")+"_"+this.id);i.onSelect&&n._trigger("onSelect",t,s)})},_bindEvent:function(){var t=this,n=t.element,r=n.find("ul"),i=n.find("li"),s=e(document),o;for(var u=0;u<i.length;u++)e(i[u]).hasClass("om-state-disabled")||t._bindLiEvent(i[u]);for(var f=0;f<r.length;f++)e(r[f]).bind("mouseleave.menuContainer",function(){var t=e(this);t.parent().attr("aria-haspopup")=="true"&&t.hide()});this.globalEvent=[],s.bind("mousedown.omMenu",o=function(){t._hide()}),this.globalEvent.push(o),s.bind("keyup.omMenu",o=function(r){var i=r.keyCode,s=e.om.keyCode;switch(i){case s.DOWN:t._selectNext();break;case s.UP:t._selectPrev();break;case s.LEFT:t._hideRight();break;case s.RIGHT:t._showRight();break;case s.ENTER:n.css("display")=="block"&&t._backfill(n),t._hide();break;case s.ESCAPE:t._hide();break;default:null}}),this.globalEvent.push(o),s.bind("keydown.omMenu",o=function(e){e.keyCode>=37&&e.keyCode<=40&&e.preventDefault()}),this.globalEvent.push(o)},_hide:function(){var t=this,n=t.element;n.find("ul").css("display","none"),n.find("li.om-menu-item-hover").each(function(t,n){e(n).removeClass("om-menu-item-hover")}),n.hide()},_findNext:function(e){var t,n=e;while((t=e.next("li")).length!==0){if(!t.hasClass("om-menu-sep-li")&&!t.hasClass("om-state-disabled"))return t;e=t}var r=n.parent().find("li:first");while(r.length!==0&&r!=n){if(!r.hasClass("om-menu-sep-li")&&!r.hasClass("om-state-disabled"))return r;r=r.next("li")}},_findPrev:function(e){var t,n=e;while((t=e.prev("li")).length!==0){if(!t.hasClass("om-menu-sep-li")&&!t.hasClass("om-state-disabled"))return t;e=t}var r=n.parent().children(),i=r.eq(r.length-1);while(i.length!==0&&i!=n){if(!i.hasClass("om-menu-sep-li")&&!i.hasClass("om-state-disabled"))return i;i=i.prev("li")}},_selectNext:function(){var e=this,t=e.element,n,r=t.find("li.om-menu-item-hover"),i=r.eq(r.length-1);if(r.length==0){n=t.find("li").eq(0);while(n.hasClass("om-state-disabled"))n=n.next("li");n.addClass("om-menu-item-hover")}else{n=e._findNext(i);if(n.length<=0)return;n.addClass("om-menu-item-hover"),i.removeClass("om-menu-item-hover")}this._hideChildren(i),this._showChildren(n)},_selectPrev:function(){var e=this,t=e.element,n,r=t.find("li.om-menu-item-hover"),i=r.eq(r.length-1);n=t.find("ul.om-menu > li");if(r.length==0){var s=n.eq(n.length-1),o=1;while(s.hasClass("om-state-disabled"))s=n.eq(n.length-o++);(n=s).addClass("om-menu-item-hover")}else{n=e._findPrev(i);if(n.length<=0)return;n.addClass("om-menu-item-hover"),i.removeClass("om-menu-item-hover")}this._hideChildren(i),this._showChildren(n)},_hideRight:function(){var e=this,t=e.element,n=t.find("li.om-menu-item-hover"),r=n.eq(n.length-1);r.removeClass("om-menu-item-hover"),e._hideChildren(r)},_showRight:function(){var e=this,t=e.element,n,r=t.find("li.om-menu-item-hover"),i=r.eq(r.length-1);i.attr("aria-haspopup")=="true"&&(n=i.children("ul").find("li").eq(0),n.addClass("om-menu-item-hover")),e._showChildren(n)},_backfill:function(e){var t=e.find("li.om-menu-item-hover");t.eq(t.length-1).mousedown()}})}(jQuery),function(e,t){var n='<div class="om-messageBox om-widget om-widget-content om-corner-all" tabindex="-1"><div class="om-messageBox-titlebar om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageBox-title"></span><a href="#" class="om-messageBox-titlebar-close om-corner-tr"><span class="om-icon om-icon-closethick"></span></a></div><div class="om-messageBox-content om-widget-content"><table><tr vailgn="top"><td class="om-messageBox-imageTd"><div class="om-messageBox-image"/>&nbsp;</td><td class="om-message-content-html"></td></tr></table></div><div class="om-messageBox-buttonpane om-widget-content om-corner-bottom om-helper-clearfix"><div class="om-messageBox-buttonset"></div></div></div>',r=function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return t<n?e(window).height():t}return e(document).height()},i=function(){if(e.browser.msie){var t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return t<n?e(window).width():t}return e(document).width()},s=function(e,t,n,r){if(e.hasClass("om-messageBox-waiting"))return;n?n(r):jQuery.noop(),e.remove(),t.remove()},o=function(t){var o=t.onClose,u=e(n).appendTo(document.body).css("z-index",1500).position({of:window,collision:"fit"}).omDraggable({containment:"document",cursor:"move",handle:".om-messageBox-titlebar"}).hide().keydown(function(t){t.keyCode&&t.keyCode===e.om.keyCode.ESCAPE&&(s(u,f,null,!1),t.preventDefault())}),f=e('<div class="om-widget-overlay"/>').appendTo(document.body).show().css({height:r(),width:i()}).css('z-index', 1003),l=u.find("span.om-messageBox-title").html(t.title).next().hover(function(){e(this).addClass("om-state-hover")},function(){e(this).removeClass("om-state-hover")}).focus(function(){e(this).addClass("om-state-focus")}).blur(function(){e(this).removeClass("om-state-focus")}).click(function(e){return s(u,f,null,!1),!1}).bind("mousedown mouseup",function(){e(this).toggleClass("om-state-mousedown")});u.find("div.om-messageBox-image").addClass("om-messageBox-image-"+t.type);var h=t.content;t.type=="prompt"&&(h=h||"",h+='<br/><input id="om-messageBox-prompt-input" type="text"/>'),u.find("td.om-message-content-html").html(h);var p=u.find("div.om-messageBox-buttonset");switch(t.type){case"confirm":p.html('<button id="confirm"></button><button id="cancel"></button>'),e.fn.omButton&&(p.find("button#confirm").omButton({width:60,onClick:function(e){s(u,f,o,!0)}}),p.find("button#cancel").omButton({width:60,onClick:function(e){s(u,f,o,!1)}}));break;case"prompt":p.html('<button id="confirm"></button><button id="cancel"></button>'),e.fn.omButton&&(p.find("button#confirm").omButton({width:60,onClick:function(t){var n=o?o(e("#om-messageBox-prompt-input").val()):jQuery.noop();n!==!1&&(u.remove(),f.remove())}}),p.find("button#cancel").omButton({width:60,onClick:function(e){s(u,f,o,!1)}}));break;case"waiting":u.addClass("om-messageBox-waiting"),f.addClass("om-messageBox-waiting"),l.hide(),p.parent().hide(),u.find(">.om-messageBox-content").addClass("no-button om-corner-bottom");break;default:p.html('<button id="confirm"></button>'),e.fn.omButton&&p.find("button#confirm").omButton({width:60,onClick:function(e){s(u,f,o,!0)}})}var v=e("button",p);v.width("100%"),u.show();var m=v.first()[0];m?m.focus():u.focus()};e.omMessageBox={alert:function(e){e=e||{},e.title=e.title||"",e.type=e.type||"alert",o(e)},confirm:function(e){e=e||{},e.title=e.title||"",e.type="confirm",o(e)},prompt:function(e){e=e||{},e.title=e.title||"",e.type="prompt",o(e)},waiting:function(t){if(t==="close"){e(".om-messageBox-waiting").remove();return}t=t||{},t.title=t.title||"",t.type="waiting",o(t)}}}(jQuery),function(e,t){e.omMessageTip={show:function(t){function o(t){s=setTimeout(function(){e.omMessageTip._close(i)},t)}t=e.extend({title:"",content:"&#160;",type:"alert"},t);var n='<div class="om-messageTip om-widget om-corner-all" tabindex="-1"><div class="om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageTip-title">'+t.title+'</span><a href="#" class="om-messageTip-titlebar-close om-corner-tr"><span class="om-icon-closethick"></span></a></div><div class="om-messageTip-content om-widget-content om-corner-bottom"><div class="om-messageTip-image om-messageTip-image-'+t.type+'"></div><div class="om-messageTip-content-body">'+t.content+"</div></div></div>",r=e(n).appendTo(document.body).css("z-index",3e3).hide(),i={d:r,l:t.onClose};r.find("a.om-messageTip-titlebar-close").bind("mouseenter mouseleave",function(){e(this).toggleClass("om-state-hover")}).bind("focus blur",function(){e(this).toggleClass("om-state-focus")}).bind("mousedown mouseup",function(){e(this).toggleClass("om-state-mousedown")}).click(function(t){return e.omMessageTip._close(i),!1}),r.slideDown("slow");var s;return t.timeout&&o(t.timeout),r.bind("mouseover",function(){clearTimeout(s)}).bind("mouseout",function(){s&&o(t.timeout)}),r},_close:function(e){e.d.slideUp("slow"),e.l&&e.l(),setTimeout(function(){e.d.remove()},1e3)}}}(jQuery),function(e){var t=function(e,t,n){var r=e.indexOf(".");if(isNaN(e)&&e!=".")for(;isNaN(e);)e=e.substring(0,e.length-1);if(!n.allowNegative&&e.indexOf("-")!=-1){var i=e.split("-");e=i.join("")}return!n.allowDecimals&&r!=-1||e.charAt(e.length-1)==="."?e.substring(0,r):(r!=-1&&(e=e.substring(0,r+n.decimalPrecision+1)),e.length>0?parseFloat(e):"")};e.omWidget("om.omNumberField",{options:{allowDecimals:!0,allowNegative:!0,decimalPrecision:2,disabled:!1,onBlur:function(e){},readOnly:!1},_create:function(){var n=this.options,r=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled"),this.element.keypress(function(t){t.which==null&&(t.charCode!=null||t.keyCode!=null)&&(t.which=t.charCode!=null?t.charCode:t.keyCode);var n=t.which;if(n===8||n==46&&t.button==-1||n===0)return;var r=String.fromCharCode(n);e.data(this,"character",r);var i=e.data(this,"allowed");(i.indexOf(r)===-1||e(this).val().indexOf("-")!==-1&&r=="-"||e(this).val().indexOf(".")!==-1&&r==".")&&t.preventDefault()}).focus(function(){e(this).addClass("om-state-focus")}).blur(function(i){e(this).removeClass("om-state-focus");var s=e.data(this,"character");this.value=t(this.value,s,n),r._trigger("onBlur",i,this.value)}).keydown(function(e){r._checkLast(this),229===e.which&&e.preventDefault()}).keyup(function(e){r._checkLast(this)}).bind("cut paste",function(e){return!1})},_init:function(){var t=this.element,n=this.options;typeof n.disabled!="boolean"&&(n.disabled=t.attr("disabled")),n.readOnly&&t.attr("readonly","readonly");var r=e.data(t[0],"character");this._buildAllowChars(),n.disabled?this.disable():this.enable()},_checkLast:function(t){var n=t.value,r=n.length;if(n&&e.data(t,"allowed").indexOf(n.charAt(r-1))===-1||n.indexOf(".")!=n.lastIndexOf(".")||n.indexOf("-")!=n.lastIndexOf("-"))t.value=n=n.substring(0,r-- -1)},_buildAllowChars:function(){var t="0123456789";this.options.allowDecimals&&(t+="."),this.options.allowNegative&&(t+="-"),this.options.readOnly&&(t=""),e.data(this.element[0],"allowed",t)},disable:function(){this.element.attr("disabled",!0).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",!1).removeClass("om-numberfield-disabled")}})}(jQuery),function(e){e.omWidget("om.omProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100},min:0,_create:function(){var t=this.element;t.addClass("om-progressbar om-widget om-widget-content om-corner-all"),this.textDiv=e("<div class='om-progressbar-text'></div>").appendTo(t),this.valueDiv=e("<div class='om-progressbar-value om-widget-header om-corner-left'></div>").appendTo(t)},_init:function(){var e=this.element.width();typeof this.options.width=="number"&&(e=this.options.width,this.element.width(e)),this.textDiv.width(Math.floor(e)),this.oldValue=this._value(),this._refreshValue()},value:function(e){if(e===undefined)return this._value();this.options.value=e,this._refreshValue()},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this,t=e.value(),n=e.options.onChange,r=e._percentage(),i=e.options.text,s="";e.valueDiv.toggle(t>e.min).toggleClass("om-corner-right",t===e.options.max).width(r.toFixed(0)+"%"),typeof i=="function"?s=i.call(t,t):typeof i=="string"&&(s=i.replace("{value}",t)),e.textDiv.html(s),e.oldValue!==t&&(n&&e._trigger("onChange",null,t,e.oldValue),e.oldValue=t)}})}(jQuery),function(e){e.omWidget("om.omScrollbar",{options:{thick:8},_create:function(){var t=this.options;this._vScrollbar=e("<div class='om-widget om-scrollbar om-corner-all'></div>").width(t.thick).appendTo("body").hide(),this._vScrollbar.type="v",this._hScrollbar=e("<div class='om-widget om-scrollbar om-corner-all'></div>").height(t.thick).appendTo("body").hide(),this._hScrollbar.type="h"},_init:function(){this.element.css("overflow","hidden"),this._buildEvent()},destroy:function(){this._vScrollbar.remove(),this._hScrollbar.remove()},_buildEvent:function(){var t=this,n=this.element,r=[this._vScrollbar,this._hScrollbar];e(r).each(function(i,s){s._hover=!1,s._enable=!0;var o=s.type,u=0;s.omDraggable({axis:o==="v"?"y":"x",containment:n,onStart:function(e,t){u=o==="v"?n.scrollTop():n.scrollLeft()},onDrag:function(e,r){var i=e.position,a=e.originalPosition;o=="v"?n.scrollTop(u+t._getInt((i.top-a.top)*n.innerHeight()/s.outerHeight())):n.scrollLeft(u+t._getInt((i.left-a.left)*n.innerWidth()/s.outerWidth()))}}).hover(function(){e(r).each(function(e,t){t._hover=!0,clearTimeout(t._timer)}),e(this).addClass("scrollbar-state-hover")},function(){e(r).each(function(e,n){n._hover=!1,t._setTimer(n.type)}),e(this).removeClass("scrollbar-state-hover")})});var i=e.browser.mozilla?"DOMMouseScroll":"mousewheel";n.bind(i,function(e){t._mousewheelListener.call(t,e)}),e(r).each(function(e,n){n.bind(i,function(e){t._mousewheelListener.call(t,e)})}),n.hover(function(){e(r).each(function(e,n){n._hover=!0,clearTimeout(n._timer),t._resize(n),n._enable&&n.fadeIn("fast")})},function(){e(r).each(function(e,n){n._hover=!1,t._setTimer(n.type)})})},_mousewheelListener:function(e){var t=this;if(!t._vScrollbar._enable)return;var n=0;e.wheelDelta?n=-e.wheelDelta:n=e.detail*40;var r=n/120*10,i=t._vScrollbar,s=t.element,o=s.offset().top+t._getInt(s.css("border-top-width"))+t._getInt(s.css("padding-top"))+t._getInt(s.css("padding-top-width")),u=i.position().top-o,a=s.height(),f=a-i.outerHeight();r+u<0?(i.css("top",o),s.scrollTop(0)):r+u>f?(i.css("top",o+f),s.scrollTop(s[0].scrollHeight-s.height())):(i.css("top","+="+r),s.scrollTop(s.scrollTop()+parseInt(r*s.innerHeight()/i.outerHeight()))),e.preventDefault()},_getScrollbar:function(e){return"h"===e?this._hScrollbar:this._vScrollbar},_setTimer:function(e){var t=this;clearTimeout(this._getScrollbar(e)._timer),function(e){setTimeout(function(){var n=t._getScrollbar(e);n._hover||n.fadeOut("fast")},200)}(e)},refresh:function(){var t=[this._vScrollbar,this._hScrollbar],n=this;e(t).each(function(e,t){n._resize(t)})},_resize:function(e){var t=this.element,n=e.type,r=0,i=t.offset(),s=t.width(),o=t.height(),u=t.outerWidth(),a=t.outerHeight(),f=this._getInt(t.css("border-left-width")),l=this._getInt(t.css("border-right-width")),c=this._getInt(t.css("border-top-width")),h=this._getInt(t.css("border-bottom-width")),p=this._getInt(t.css("padding-left")),d=this._getInt(t.css("padding-top"));"v"===n?(r=t[0].scrollHeight,r>o?(e._enable=!0,e.outerHeight(this._getInt(o*t.innerHeight()/r)),e.css({left:i.left+u-e.outerWidth()-l,top:i.top+c+d+this._getInt(t.scrollTop()*o/r)})):e._enable=!1):"h"===n&&(r=t[0].scrollWidth,r>t.innerWidth()?(e._enable=!0,e.outerWidth(this._getInt((p+s)*s/r)),e.css({left:i.left+f+p+this._getInt(t.scrollLeft()*s/r),top:i.top+a-e.outerHeight()-h})):e._enable=!1),e._enable?e.fadeIn("fast"):e.fadeOut("fast")},_getInt:function(e){return parseInt(e)||0}})}(jQuery),function(e){e.omWidget("om.omSlider",{options:{autoPlay:!0,interval:5e3,directionNav:!1,pauseOnHover:!0,controlNav:!0,activeNavCls:"nav-selected",effect:"fade",animSpeed:400,startSlide:0,delay:200,onBeforeSlide:function(e){},onAfterSlide:function(e){}},slideTo:function(e){opts=this.element.data("omSlider:opts"),this._slideTo(this.element,e)},next:function(){opts=this.element.data("omSlider:opts"),this._next(this.element)},prev:function(){opts=this.element.data("omSlider:opts"),this._prev(this.element)},destroy:function(){var t=this.element,n=this.options,r=this._getSliderVars(t);clearTimeout(r.slideTimer),clearInterval(r.autoPlayTimer),r.customNav&&e(n.controlNav).children().unbind(".omSlider").removeData("sid").removeClass(n.activeNavCls)},_getSliderVars:function(e){return e.data("omSlider:vars")},_runSlideEffect:function(t,n,r){var i=this,s=this._getSliderVars(t),o=t.find("ul.om-slider-content:first"),u=o.children(),f=this.options,l=0,c=0,h=r?r:f.effect;f.effect=="random"&&o.addClass("om-slider-effect-"+h),o.stop();if(h!="slide-v"&&h!="slide-h")return!1;var p=h=="slide-v";if(f.effect=="random"){var d=0;u.each(function(t){if(t===s.currentSlide)return!1;d-=p?e(this).height():e(this).width()}),o.css(p?"top":"left",d)}u.each(function(t){if(t==n)return!1;p?l-=e(this).height():c-=e(this).width()}),s.running=!0,o.animate({top:l,left:c},f.animSpeed,function(){s.running=!1,i._trigger("onAfterSlide",null,n)})},_runFadeEffect:function(t,n){var r=this,i=this._getSliderVars(t),s=t.find("ul.om-slider-content:first").children(),o=this.options;s.each(function(t){var s=e(this);t==n?(i.running=!0,s.fadeIn(o.animSpeed,function(){i.running=!1,r._trigger("onAfterSlide",null,n)})):t==i.currentSlide&&s.fadeOut(o.animSpeed)})},_runNoEffect:function(t,n){var r=this,i=this._getSliderVars(t),s=this.options,o=t.find("ul.om-slider-content:first").children();o.each(function(t){var s=e(this);t==n?(s.show(),r._trigger("onAfterSlide",null,n)):t==i.currentSlide&&s.hide()})},_toggleControlNav:function(t,n){var r=this._getSliderVars(t),i=this.options,s=t;r.customNav&&(s=e("body"));var o=s.find(r.controlNav).children();o.each(function(t){e(this).toggleClass(i.activeNavCls,t==n)})},_slideTo:function(e,t){var n=this._getSliderVars(e),r=e.find("ul.om-slider-content:first"),i=this.options,s=this;if(isNaN(t)||t<0||t>=n.totalSlides)return;if(this._trigger("onBeforeSlide",null,t)===!1)return!1;if(i.effect=="random"){var o=["fade","slide-h","slide-v"],u=o[Math.floor(Math.random()*3)];r.removeClass().addClass("om-slider-content"),r.removeAttr("style"),r.find("li").removeAttr("style"),u=="slide-h"||u=="slide-v"?s._runSlideEffect(e,t,u):s._runFadeEffect(e,t)}else i.effect=="slide-h"||i.effect=="slide-v"?s._runSlideEffect(e,t):i.effect=="fade"||i.effect===!0?s._runFadeEffect(e,t):s._runNoEffect(e,t);return n.controlNav&&s._toggleControlNav(e,t),n.currentSlide=t,e},_next:function(e){var t=this._getSliderVars(e),n=0;return t.currentSlide+2<=t.totalSlides&&(n=t.currentSlide+1),this._slideTo(e,n)},_prev:function(e){var t=this._getSliderVars(e),n=t.totalSlides-1;return t.currentSlide!=0&&(n=t.currentSlide-1),this._slideTo(e,n)},_processDirectionNav:function(t){var n=this._getSliderVars(t),r=e('<div class="om-slider-directionNav">').appendTo(t),i=this;e('<a class="om-slider-prevNav"></a>').appendTo(r).click(function(){if(n.running)return!1;i._prev(t)}),e('<a class="om-slider-nextNav"></a>').appendTo(r).click(function(){if(n.running)return!1;i._next(t)}),t.hover(function(){r.show()},function(){r.hide()})},_processControlNav:function(t){var n=this._getSliderVars(t),r=this.options,i=this,s;if(r.controlNav===!0||r.controlNav==="classical"){var o=e('<ul class="om-slider-nav-classical"></ul>');n.controlNav=".om-slider-nav-classical";for(s=0;s<n.totalSlides;s++){var u=e("<li>"+(s+1)+"</li>");u.data("sid",s);var f=0;u.click(function(){i._slideTo(t,e(this).data("sid"))}),u.hover(function(){if(n.running||n.stop)return!1;var s=e(this);if(s.hasClass(r.activeNavCls))return!1;n.slideTimer=f=setTimeout(function(){i._slideTo(t,s.data("sid"))},r.delay)},function(){clearTimeout(f)}),o.append(u)}t.append(o)}else if(r.controlNav==="dot"){var o=e('<div class="om-slider-nav-dot"></div>');n.controlNav=".om-slider-nav-dot";for(s=0;s<n.totalSlides;s++){var u=e('<a href="javascript:void(0)">'+(s+1)+"</a>");u.data("sid",s);var f=0;u.click(function(){i._slideTo(t,e(this).data("sid"))}),u.hover(function(){if(n.running||n.stop)return!1;var s=e(this);if(s.hasClass(r.activeNavCls))return!1;n.slideTimer=f=setTimeout(function(){i._slideTo(t,s.data("sid"))},r.delay)},function(){clearTimeout(f)}),o.append(u)}o.appendTo(t).css({marginLeft:-1*o.width()/2})}else if(e(r.controlNav).length>0){n.controlNav=r.controlNav,n.customNav=!0;var o=e(r.controlNav);o.children().each(function(s){var o=e(this);o.data("sid",s);var u=0;o.bind("click.omSlider",function(){i._slideTo(t,e(this).data("sid"))}),o.bind("mouseover.omSlider",function(){if(n.running||n.stop)return!1;var s=e(this);if(s.hasClass(r.activeNavCls))return!1;n.slideTimer=u=setTimeout(function(){i._slideTo(t,s.data("sid"))},r.delay)}).bind("mouseout.omSlider",function(){clearTimeout(u)})})}},_create:function(){function u(n,o){if(isNaN(o)||o<0||o>=s.totalSlides)return;var u=n.find("ul.om-slider-content:first"),l=u.children(),c=0,p=0;i.effect=="slide-h"?(l.each(function(t){if(t==o)return!1;p-=e(this).width()}),setTimeout(function(){u.css({left:p,top:c})},0)):i.effect=="slide-v"?(l.each(function(t){if(t==o)return!1;c-=e(this).height()}),setTimeout(function(){u.css({left:p,top:c})},0)):u.children().eq(o).show(),s.controlNav&&r._toggleControlNav(n,o),i.autoPlay&&(s.autoPlayTimer=t=setInterval(function(){r._next(n)},i.interval)),i.pauseOnHover&&n.hover(function(){s.paused=!0,clearInterval(t)},function(){s.paused=!1,i.autoPlay&&(s.autoPlayTimer=t=setInterval(function(){r._next(n)},i.interval))}),i.directionNav&&r._processDirectionNav(n)}var t=0,n=this.element,r=this,i=this.options,s={currentSlide:0,totalSlides:0,running:!1,paused:!1,stop:!1,controlNav:".om-slider-nav-classical"};n.data("omSlider",n).data("omSlider:vars",s).data("omSlider:opts",i).addClass("om-slider"),i.startSlide>0&&(s.currentSlide=i.startSlide);var o=n.children();o.wrapAll('<ul class="om-slider-content"></ul>').wrap('<li class="om-slider-item"></li>'),(i.effect=="slide-v"||i.effect=="slide-h")&&n.find(".om-slider-content").addClass("om-slider-effect-"+i.effect),s.totalSlides=o.length,this._processControlNav(n),i.startSlide>0&&(i.effect=="slide-h"||i.effect=="slide-v")?e(window).load(function(){u(n,i.startSlide)}):u(n,i.startSlide)}})}(jQuery),function(e){var t="om-suggestion-list-row",n="om-state-hover";e.omWidget("om.omSuggestion",{options:{disabled:!1,readOnly:!1,minChars:1,delay:500,cacheSize:10,method:"GET",listMaxHeight:300,queryName:"key",crossDomain:!1,preProcess:function(e,t){return t},onBeforeSuggest:function(e,t){},onSuggesting:function(e,t){},onSuccess:function(e,t,n){},onError:function(e,t,n,r){},onSelect:function(e,t,n,r){}},_create:function(){this.element.addClass("om-suggestion om-widget om-state-default om-state-nobg"),this.dropList=e('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children().first().hide()},_init:function(){var n=this,r=this.options,i=this.element.attr("autocomplete","off"),s=this.dropList;r.minChars<0&&(r.minChars=0),r.cacheSize<0&&(r.cacheSize=0),r.delay<0&&(r.delay=0),r.disabled?this.disable():this.enable(),r.readOnly?i.attr("readonly","readonly"):i.removeAttr("readonly"),i.focus(function(){e(this).addClass("om-state-focus")}).blur(function(){e(this).removeClass("om-state-focus")}).keydown(function(t){t.keyCode==e.om.keyCode.TAB&&s.hide()}).keyup(function(o){var u=o.keyCode,l=e.om.keyCode;switch(u){case l.DOWN:s.css("display")!=="none"?n._selectNext():s.find("."+t).size()>0&&s.show();break;case l.UP:s.css("display")!=="none"?n._selectPrev():s.find("."+t).size()>0&&s.show();break;case l.ENTER:if(s.css("display")==="none")return;return s.hide(),n._triggerOnSelect(o),!1;case l.ESCAPE:s.hide();break;case l.TAB:break;default:if(r.disabled||r.readOnly)return!1;if(r.delay>0){var h=e.data(i,"delayTimer");h&&clearTimeout(h),h=setTimeout(function(){n._suggest()},r.delay),e.data(i,"delayTimer",h)}else n._suggest()}}).mousedown(function(e){e.stopPropagation()}),s.mousedown(function(e){e.stopPropagation()}),e(document).bind("mousedown.omSuggestion",this.globalEvent=function(){s.hide()})},clearCache:function(){e.removeData(this.element,"cache")},showMessage:function(t){var n=this.element,r=this.dropList.empty().css("height","auto");e("<div>"+t+"<div>").appendTo(r),r.parent().css("left",n.offset().left).css("top",n.offset().top+n.outerHeight());var i=this.options.listWidth;i?i!=="auto"&&r.parent().width(i):r.parent().width(n.outerWidth()),r.show();var s=this.options.listMaxHeight;return s!=="auto"&&r.height()>s&&r.height(s).css("overflow","auto"),this},disable:function(){return this.options.disabled=!0,this.element.attr("disabled","disabled").addClass("om-state-disabled")},enable:function(){return this.options.disabled=!1,this.element.removeAttr("disabled").removeClass("om-state-disabled")},setData:function(e){var t=this.options;e&&(t.dataSource=e),t.cacheSize>0&&this.clearCache()},getData:function(){var t=e.data(this.element,"records");return t||null},getDropList:function(){return this.dropList},destroy:function(){e(document).unbind("mousedown.omSuggestion",this.globalEvent),this.dropList.parent().remove()},_clear:function(){return this.element.val(""),this.dropList.find("."+t).removeClass(n)},_selectNext:function(){var e=this.dropList,t=e.find("."+n).index(),r=this._clear();t+=1,t>=r.size()&&(t=0),this._scrollToAndSelect(r,t,e)},_selectPrev:function(){var e=this.dropList,t=e.find("."+n).index(),r=this._clear();t-=1,t<0&&(t=r.size()-1),this._scrollToAndSelect(r,t,e)},_scrollToAndSelect:function(t,r,i){if(t.size()<1)return;var s=e(t.get(r)).addClass(n),o=s.position().top;if(o<=0)i.scrollTop(i.scrollTop()+o);else{var u=o+s.outerHeight()-i.height();u>0&&i.scrollTop(i.scrollTop()+u)}this._select(r)},_select:function(t){var n=this.element,r=e.data(n,"records"),i,s;r.valueField?(i=r.data[t],s=i[r.valueField]):(i=r[t],s=i),n.val(s),e.data(n,"lastStr",s)},_suggest:function(){var t=this.element,n=t.val(),r=e.data(t,"lastStr");if(r&&r===n)return;e.data(t,"lastStr",n);var i=this.options,s=e.data(t,"cache");if(n.length>0&&n.length>=i.minChars){if(s){var o=s[n];if(o){e.data(t,"records",o),this._buildDropList(o,n);return}}if(i.onBeforeSuggest&&this._trigger("onBeforeSuggest",null,n)===!1){this.dropList.empty().hide();return}var u=this,a={url:i.dataSource,type:i.method,dataType:i.crossDomain?"jsonp":"json",data:{},success:function(r,s){var o=i.onSuccess;if(o&&u._trigger("onSuccess",null,r,s)===!1)return;var a=i.preProcess;a&&(r=a(n,r)),typeof r=="undefined"&&(r=[]);if(i.cacheSize>0){var f=e.data(t,"cache")||{___keys:[]},h=f.___keys;if(h.length==i.cacheSize){var p=h[0];f.___keys=h.slice(1),f[p]=undefined}f[n]=r,f.___keys.push(n),e.data(t,"cache",f)}e.data(t,"records",r),u._buildDropList(r,n)},error:function(e,t,n){var r=i.onError;r&&u._trigger("onError",null,e,t,n)}};a.data[i.queryName]=n,e.ajax(a);var f=i.onSuggesting;f&&u._trigger("onSuggesting",null,n)}else this.dropList.empty().hide()},_buildDropList:function(r,i){var s=this.element,o=this.dropList.empty().css("height","auto"),u=r.valueField?!1:!0,f=this.options.clientFormatter,l=this;u?f?e(r).each(function(e){l._addRow(f(this,e),o)}):e(r).each(function(e){l._addRow(this,o)}):f&&e(r.data).each(function(e){l._addRow(f(this,e),o)});var h=o.find("."+t);if(h.size()>0){o.parent().css("left",parseInt(s.offset().left)).css("top",s.offset().top+s.outerHeight());var p=this.options.listWidth;p?p!=="auto"&&o.parent().width(p):o.parent().width(s.outerWidth()),h.mouseover(function(){h.removeClass(n),e(this).addClass(n)}).mousedown(function(e){var t=o.find("."+n).index();l._select(t),o.hide(),l._triggerOnSelect(e)}),o.show();var d=this.options.listMaxHeight;d!=="auto"&&o.height()>d&&o.height(d).css("overflow","auto"),o.scrollTop(0)}},_addRow:function(n,r){e('<div class="'+t+'">'+n+"</div>").appendTo(r)},_triggerOnSelect:function(t){var r=this.options.onSelect;if(r){var i=this.dropList.find("."+n).index();if(i<0)return;var s=e.data(this.element,"records"),o,u;s.valueField?(o=s.data[i],u=o[s.valueField]):(o=s[i],u=o),this._trigger("onSelect",t,o,u,i)}}})}(jQuery),function(){function i(e,t){return t.content&&$(e).html(t.content),$(e).omPanel(t)}function s(){return $.browser.msie&&parseInt($.browser.version)==7}var e="om-tabs-"+((1+Math.random())*65536|0).toString(16).substring(1)+"-",t=0,n="om-tabs-activated om-state-active",r="om-tabs-scroll-disabled";$.omWidget("om.omTabs",{options:{width:"auto",height:"auto",border:!0,tabWidth:"auto",tabHeight:27,scrollable:!0,closable:!1,position:"top",switchMode:"click",autoPlay:!1,interval:1e3,active:0,lazyLoad:!1,tabMenu:!1,onBeforeActivate:function(e,t){},onActivate:function(e,t){},onBeforeClose:function(e,t){},onClose:function(e,t){},onBeforeCloseAll:function(e){},onCloseAll:function(){},onAdd:function(e,t){},onBeforeAdd:function(e,t){},onLoadComplete:function(e,t){}},add:function(e){this._add(e)},close:function(e){this._close(e)},closeAll:function(){this._closeAll()},activate:function(e){this._activate(e)},getAlter:function(e){return this._getAlter(e)},getActivated:function(){return this._getActivated()},getLength:function(){return this._getLength()},setDataSource:function(e){if(e.index===undefined||!e.url&&!e.content)return;this._setDataSource(e)},reload:function(e,t,n){this._reload(e,t,n)},doLayout:function(){this._doLayout()},_create:function(){this._makeSketch(),this._collectItems(),this.history=[]},_init:function(){this._render(),this._afterRender(),this._buildEvent()},_makeSketch:function(){this.element.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom" />').find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all" />'),this.$menu=$("<div></div>").appendTo($("body"))},_collectItems:function(){var n=this,r=this.element,s=this.options,o=[],u=[];r.find(">div.om-tabs-headers a").each(function(){var l=this.getAttribute("href",2),c=l.split("#")[0],p;c&&(c===location.toString().split("#")[0]||(p=$("base")[0])&&c===p.href)&&(l=this.hash,this.href=l);var d=$(this),v=d.attr("tabId")||d.attr("id")||e+t++;d.attr("tabId",v);var m={tabId:v,title:d.text(),_closeMode:"visibility",header:!1,closed:!0,onSuccess:function(e,t,r){n._trigger("onLoadComplete",null,m.tabId)},onError:function(e,t,r){n._trigger("onLoadComplete",null,m.tabId)}},y=$(">"+l,r)[0];!y&&l.indexOf("#")!=0&&(s.lazyLoad===!1?m.url=l:u.push({tabId:v,url:l,loaded:!1}));var b=new i(y||$("<div></div>")[0],m);o.push(b)}),$lis=r.find(">div.om-tabs-headers ul li"),$('<span class="left-placeholder"></span>').insertBefore($lis.eq(0)),$('<span class="right-placeholder"></span>').insertAfter($lis.eq($lis.length-1)),u.length>0&&(this.loadInfo=u),this.items=o},_render:function(){var e=this,t=this.element,n=this
.options,r=this.items,i=t.find(">div.om-tabs-headers");typeof n.active=="number"&&(n.active<0&&(n.active=0),n.active>r.length-1&&(n.active=r.length-1)),n.border!==!1&&t.children(":first").addClass("header-no-border");if(n.width=="fit")t.outerWidth(t.parent().width());else if(n.width!="auto"){t.css("width",n.width);var s=isNaN(n.width)&&n.width.indexOf("%")!=-1;t.children(":first").outerWidth(s?"100%":n.width)}n.height=="fit"?t.outerHeight(t.parent().height()):n.height!="auto"&&t.css("height",n.height);if(n.closable&&n.tabMenu&&$.fn.omMenu){var o=t.attr("id");this.menu=this.$menu.omMenu({contextMenu:!0,dataSource:[{id:o+"_001",label:""},{id:o+"_002",label:""},{id:o+"_003",label:""}],onSelect:function(t,n){t.id==o+"_001"?e.close(e.getAlter($(e.$currentLi).find("a.om-tabs-inner").attr("tabid"))):t.id==o+"_002"?i.find("ul li").each(function(t,n){var r=$(e.$currentLi).find("a.om-tabs-inner").attr("tabid"),i=$(n).find("a.om-tabs-inner").attr("tabid");if(r===i)return;e.close(e.getAlter(i))}):t.id==o+"_003"&&e.closeAll()}})}this._renderHeader(),this._renderBody()},_renderHeader:function(){var e=this.element,t=this.options,r=this.history;$headers=e.find(">div.om-tabs-headers"),$lis=$headers.find("ul li"),$lis.addClass("om-state-default om-corner-top"),$lis.each(function(e){var i=$(this).find("a:first");s()&&i.attr("hideFocus","true"),i.addClass("om-tabs-inner"),e===t.active||t.active===i.attr("tabId")?($(this).addClass(n),t.activeTabId=i.attr("tabId"),t.active=e,$.inArray(t.activeTabId,r)||r.push(t.activeTabId)):$(this).removeClass(n),i.css({width:t.tabWidth,height:t.tabHeight}),$('<span class="lileft"></span>').insertBefore(i),t.closable===!0||$.isArray(t.closable)&&-1!==$.inArray(e,t.closable)?(i.next(".om-icon-close").length<=0&&$('<a class="om-icon om-icon-close"></a>').insertAfter(i),$('<span class="liright"></span>').insertAfter(i.next(".om-icon-close"))):(i.next().remove(),$('<span class="liright"></span>').insertAfter(i))});var i=$lis.find("a.om-tabs-inner").height();$lis.parent().css({height:++i,"line-height":i+"px"}),$headers.height(i),this._checkScroller()&&this._enableScroller()},_renderBody:function(){var e=this.element,t=this.options,n=this.items,r=e.find(">div.om-tabs-panels");r.children().detach();if(t.height!=="auto"){var i=e.innerHeight(),s=e.find(">div.om-tabs-headers").outerHeight();r.css("height",i-s)}e.toggleClass("om-tabs-noborder",!t.border);var o=n.length;while(o--)n[o].addClass("om-state-nobd").parent().prependTo(r)},_afterRender:function(){var e=this.element,t=this.options,n=this.items,r=n.length;e.children().each(function(){$(this).is(".om-tabs-headers,.om-tabs-panels")||$(this).remove()});if(!t.lazyLoad)$(n).omPanel("reload");else{var i=$(n[t.active]),s=i.omPanel("option","tabId"),o=this._getUnloadedUrl(s);i.omPanel("open"),i.omPanel("reload",o),this._removeLoadInfo(s)}while(r--){var i=$(n[r]);r==t.active?i.omPanel("open"):i.omPanel("close")}e.css("height",e.height()),e.css("height",t.height)},_buildEvent:function(){var e=this,t=this.element,n=this.options,r=t.find(">div.om-tabs-headers a.om-icon-close");r.unbind("click.omtabs").bind("click.omtabs",function(t){var n=$(t.target).prev().attr("tabId");return e._close(n),!1});var i=t.find(">div.om-tabs-headers a.om-tabs-inner");n.switchMode.indexOf("mouseover")!=-1?i.bind("mouseover.omtabs",function(){var n=$(this).attr("tabId"),r=$.data(t,"activateTimer");typeof r!="undefined"&&clearTimeout(r),r=setTimeout(function(){return e._activate(n),!1},100),$.data(t,"activateTimer",r)}):n.switchMode.indexOf("click")!=-1&&i.bind("click.omtabs",function(){e._activate($(this).attr("tabId"))}),i.bind("click.omtabs",function(){return!1}),n.autoPlay!=0?n.autoInterId=setInterval(function(){t.omTabs("activate","next")},n.interval):clearInterval(n.autoInterId);if(n.switchMode.indexOf("mouseover")==-1){var s=t.find(">div.om-tabs-headers li"),o=function(e,t){t.is(":not(.om-state-disabled)")&&t.addClass("om-state-"+e)},u=function(e,t){t.removeClass("om-state-"+e)};s.bind("mouseover.omtabs",function(){o("hover",$(this))}),s.bind("mouseout.omtabs",function(){u("hover",$(this))}),n.closable&&n.tabMenu&&s.each(function(t,n){$(n).bind("contextmenu",function(t){$.fn.omMenu&&(e.$currentLi=this,$(e.menu).omMenu("show",t))})})}t.find(">div.om-tabs-headers >span").bind("click.omtabs",function(t){if($(this).hasClass("om-tabs-scroll-disabled"))return!1;var n=$(this).parent().find("ul").children("li:last").outerWidth(!0);return $(this).hasClass("om-tabs-scroll-left")&&e._scroll(n,e._scrollCbFn()),$(this).hasClass("om-tabs-scroll-right")&&e._scroll(-n,e._scrollCbFn()),!1})},_purgeEvent:function(){var e=this.element,t=this.options,n=e.find(">div.om-tabs-headers");n.children().unbind(".omtabs"),n.find(">ul >li >a").unbind(".omtabs"),t.autoInterId&&clearInterval(t.autoInterId)},_activate:function(e){var t=this.element,r=this.options,i=this.items,s,o=t.find(">div.om-tabs-headers ul");if(r.activeTabId===e||r.active===e)return!1;e=e||0;var u,a=e;e=="next"?e=(r.active+1)%i.length:e=="prev"&&(e=(r.active-1)%i.length),typeof e=="number"?a=this._getAlter(e):typeof e=="string"&&(e=this._getAlter(e));if(r.onBeforeActivate&&this._trigger("onBeforeActivate",null,e)===!1)return!1;u=o.find("li a[tabId="+a+"]"),u.parent().addClass(n).siblings().removeClass(n),r.activeTabId=a,r.active=e;var f=i.length;for(f=i.length;f--;f>=0){var l=i[f];if(l.omPanel("option","tabId")==a){l.omPanel("open");if(s=this._getUnloadedUrl(a))l.omPanel("reload",s),this._removeLoadInfo(a)}}for(f=i.length;f--;f>=0){var l=i[f];l.omPanel("option","tabId")!=a&&l.omPanel("close")}if(this._checkScroller()){o.stop(!0,!0),t.clearQueue();var c=o.prev(),h=o.next(),p=u.parent().offset().left,d=p+u.parent().outerWidth(!0),v=c.offset().left+c.outerWidth(!0)+4-p,m=h.offset().left-d;v>=0?this._scroll(v,this._scrollCbFn()):m<=0?this._scroll(m,this._scrollCbFn()):this._scrollCbFn()()}var g=this.history,y=$.inArray(a,g);y===-1?g.push(a):g.push(g.splice(y,1)[0]),r.onActivate&&this._trigger("onActivate",null,e)},_getUnloadedUrl:function(e){var t=this.loadInfo;for(var n in t)if(t[n].tabId===e&&t[n].loaded===!1)return t[n].url;return null},_removeLoadInfo:function(e){var t=this.loadInfo,n,r;if(t){n=t.length;while(r=t[--n])if(r.tabId===e){t.splice(n,1);break}}},_addLoadInfo:function(e,t){this.loadInfo.push({tabId:e,loaded:!1,url:t})},_getAlter:function(e){var t=this.element,n;return typeof e=="number"?n=t.find(">div.om-tabs-headers li:eq("+e+") a.om-tabs-inner").attr("tabId"):typeof e=="string"&&t.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(t){if($(this).attr("tabId")==e)return n=t,!1}),n===undefined?null:n},_getActivated:function(){return this.options.activeTabId},_add:function(n){var r=this,o=this.element,u=this.options,l=this.items,c=o.find(">div.om-tabs-headers ul"),h=n.tabId?n.tabId:e+t++;n.index=n.index||"last";if(n.index=="last"||n.index>l.length-1)n.index=l.length;n.title=n.title||"New Title "+h,n.url=$.trim(n.url),n.content=$.trim(n.content),n.url?n.content=undefined:(n.url=undefined,n.content=n.content||"New Content "+h);if(u.onBeforeAdd&&r._trigger("onBeforeAdd",null,n)==0)return!1;var p=$('<li class="om-state-default om-corner-top"> </li>'),v=$('<a class="om-tabs-inner"></a>').html(n.title).attr({href:"#"+h,tabId:h}).css({width:u.tabWidth,height:u.tabHeight}).appendTo(p);$('<span class="lileft"></span>').insertBefore(v),s()&&v.attr("hideFocus","true"),n.closable===!0||n.closable==undefined&&u.closable?(v.after('<a class="om-icon om-icon-close"></a>'),$('<span class="liright"></span>').insertAfter(v.next(".om-icon-close"))):$('<span class="liright"></span>').insertAfter(v);var m={tabId:h,title:v.text(),_closeMode:"visibility",header:!1,closed:!0,onSuccess:function(e,t,n){r._trigger("onLoadComplete",null,h)},onError:function(e,t,n){r._trigger("onLoadComplete",null,h)}};$.extend(m,n),n.url&&(u.lazyLoad||n.lazyLoad)&&(r.loadInfo.push({tabId:h,url:n.url,loaded:!1}),m.url=null);var g=new i($("<div>"+(n.content||"")+"</div>")[0],m);n.index==l.length?(l[n.index]=g,p.insertBefore(c.find("span.right-placeholder"))):(l.splice(n.index,0,g),c.children().eq(n.index).before(p)),c.innerWidth()-p.position().left<500&&c.width(c.width()+500),this._checkScroller()&&this._enableScroller(),l[n.index].addClass("om-state-nobd").parent().insertAfter(n.index>0?o.find(">div.om-tabs-panels").children().eq(n.index-1):0),this._purgeEvent(),this._buildEvent(),this._trigger("onAdd",null,m),n.activateNew!==!1&&this._activate(n.index)},_close:function(e){var t=this.element,n=this.options,r=this.items,i=t.find(">div.om-tabs-headers"),s=t.find(">div.om-tabs-panels"),o=t.height(),u=e,a=this.history;e=e===undefined?n.active:e,typeof e=="string"?e=this._getAlter(e):u=this._getAlter(e);if(n.onBeforeClose&&this._trigger("onBeforeClose",null,e)==0)return!1;this._removeLoadInfo(this._getAlter(e)),i.find("li").eq(e).remove(),s.children().find(">.om-panel-body").eq(e).empty().remove(),r.splice(e,1),s.children().length==0&&s.css({height:o-i.outerHeight()});for(var f=a.length-1;f>=0;f--)if(u===a[f]){a.splice(f,1);break}n.onClose&&this._trigger("onClose",null,e);if(r.length==0){n.active=-1,n.activeTabId=null;return}e==n.active?(n.active=-1,this._activate(a.length>0?a.pop():0)):(e<n.active&&n.active--,this._checkScroller()&&this._enableScroller())},_closeAll:function(){var e=this.element,t=this.options,n=this.items,r=e.find(">div.om-tabs-headers"),i=e.find(">div.om-tabs-panels"),s=e.height();if(t.onBeforeCloseAll&&this._trigger("onBeforeCloseAll")===!1)return!1;for(var o=0,u=n.length;o<u;o++)this._removeLoadInfo(n[o].omPanel("option","tabId"));r.find("li").remove(),i.empty(),n.splice(0,n.length),i.css({height:s-r.outerHeight()}),t.active=-1,t.activeTabId=null,this.history=[],t.onCloseAll&&this._trigger("onCloseAll")},_checkScroller:function(){var e=this.element,t=this.options;if(!t.scrollable)return!1;var n=e.find(">div.om-tabs-headers ul"),r=4;n.children().each(function(){r+=$(this).outerWidth(!0)});if(r>n.parent().innerWidth()){if(!n.hasClass("om-tabs-scrollable")){var i=$("<span></span>").insertBefore(n).addClass("om-tabs-scroll-left"),s=$("<span></span>").insertAfter(n).addClass("om-tabs-scroll-right"),o=(n.height()-i.height())/2;n.addClass("om-tabs-scrollable")}return!0}return n.removeClass("om-tabs-scrollable").siblings().remove(),!1},_scrollCbFn:function(){var e=this;return function(){e._enableScroller()}},_enableScroller:function(){var e=this.element.find(">div.om-tabs-headers"),t=e.children("ul"),n=t.prev(),i=t.next(),s=t.children(":last"),o=e.offset().left,u=i.offset().left,a=t.offset().left,f=s.offset().left+s.outerWidth(!0);n.toggleClass(r+" om-tabs-scroll-disabled-left",a>=o),i.toggleClass(r+" om-tabs-scroll-disabled-right",f<=u)},_scroll:function(e,t){var n=this;$self=this.element,$ul=$self.find(">div.om-tabs-headers ul"),$li=$ul.children(":last");if(e==0)return;var i=e>0?$ul.prev().offset():$ul.next().offset(),s=function(s){if(e>0&&$ul.prev().hasClass(r)||e<0&&$ul.next().hasClass(r)){$ul.stop(!0,!0),$self.clearQueue();return}var o=!1;e=e>0?"+="+Math.min(i.left-$ul.offset().left,e):"-="+Math.min($li.offset().left+$li.outerWidth(!0)-i.left,Math.abs(e)),n.isScrolling=!0,$ul.animate({left:e+"px"},"normal","swing",function(){!!t&&t(),n.isScrolling=!1,s()})};$self.queue(s),$self.queue().length==1&&!n.isScrolling&&$self.dequeue()},_getLength:function(){return this.items.length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},_setDataSource:function(e){var t=this.element,n=this.items,r=this.options,i=this._getAlter(e.index);e.url=$.trim(e.url),e.content=$.trim(e.content),e.url?r.lazyLoad!==!1?(this._addLoadInfo(i,e.url),n[e.index].omPanel("option","url",e.url)):(this._removeLoadInfo(i),n[e.index].omPanel("reload",e.url)):n[e.index].html(e.content)},_reload:function(e,t,n){var r=this.element,i=this.items,s=this._getAlter(e);t?(this._removeLoadInfo(s),i[e].omPanel("reload",t)):n?i[e].html(n):(i[e].omPanel("reload",this._getUnloadedUrl(s)),this._removeLoadInfo(s))}})}(jQuery),function(e){e.omWidget("om.omTooltip",{options:{width:"auto",minWidth:null,maxWidth:null,height:"auto",maxHeight:null,minHeight:null,delay:300,anchor:!1,trackMouse:!1,showOn:"mouseover",lazyLoad:!1,url:null,offset:[5,5],anchorOffset:0,region:null,html:null,contentEL:null},_create:function(){this.tipContent=e('<div class="tip-body"></div>'),this.tipAnchor=e('<div class="tip-anchor"></div>'),this.regionMap={right:"left",top:"bottom",left:"right",bottom:"top"},this.tip=e('<div class="tip"></div>').append(this.tipContent)},_init:function(){var t=this,n=t.options;this.tipContent.empty(),this.tip.find("div.tip-anchor").remove(),n.anchor&&t.tip.append(t.tipAnchor),t.adjustWidth=6,t.adjustHeight=6,n.width!="auto"?this.tip.css("width",n.width-t.adjustWidth):this.tip.css("width","auto"),n.height!="auto"?this.tip.css("height",n.height-t.adjustHeight):this.tip.css("height","auto"),n.minWidth&&this.tip.css("minWidth",n.minWidth-t.adjustWidth),n.maxWidth&&this.tip.css("maxWidth",n.maxWidth-t.adjustWidth),n.maxHeight&&this.tip.css("maxHeight",n.maxHeight-t.adjustHeight),n.minHeight&&this.tip.css("minHeight",n.minHeight-t.adjustHeight);if(n.url&&!n.lazyLoad)t._ajaxLoad(n.url);else if(n.html)this.tip.find(".tip-body").append(n.html);else{var r=e(n.contentEL).clone();e(n.contentEL).remove(),this.tip.find(".tip-body").append(r.show())}this._bindEvent()},_ajaxLoad:function(t){var n=this;e.ajax({url:t,method:"POST",dataType:"html",success:function(e,t){n.tip.find(".tip-body").append(e)},error:function(t,r,i){n.tip.find(".tip-body").append(e.om.lang.omTooltip.FailedToLoad)}})},_bindEvent:function(){var e=this,t=e.options,n=e.element;t.showOn=="mouseover"?n.bind("mouseover.tooltip",function(n){e.showTime&&clearTimeout(e.showTime),e.showTime=setTimeout(function(){e.show(n)},t.delay)}):t.showOn=="click"&&(e.showTime=n.bind("click.tooltip",function(n){setTimeout(function(){e.show(n)},t.delay)})),t.trackMouse&&n.bind("mousemove.tooltip",function(t){e._adjustPosition(t)}),n.bind("mouseleave.tooltip",function(){e.showTime&&clearTimeout(e.showTime),e.hideTime=setTimeout(function(){e.hide()},t.delay)}),e.tip.bind("mouseover.tooltip",function(){e.hideTime&&clearTimeout(e.hideTime)}).bind("mouseleave.tooltip",function(){setTimeout(function(){e.hide()},t.delay)})},show:function(t){var n=this,r=n.options;e(document.body).find(n.tip).length<=0?(r.url&&r.lazyLoad&&n._ajaxLoad(r.url),n.tip.appendTo(document.body).fadeIn(),n._adjustPosition(t)):(n._adjustPosition(t),n.tip.fadeIn())},_adjustPosition:function(t){var n=this,r=n.options,i=n.element,s,o,u=e(i).offset();if(t&&!r.region)s=t.pageY+r.offset[0],o=t.pageX+r.offset[1],n.tip.find(".tip-anchor").css({top:r.anchorOffset+3,left:"-9px"}).addClass("tip-anchor-left");else{var f=parseInt(e(i).css("borderBottomWidth").replace("px",""));s=u.top+e(i).height()+(isNaN(f)?0:f)+r.offset[0],o=u.left+r.offset[1],r.region=="right"?(o=u.left+r.offset[1]+e(i).width()+n.adjustWidth,s=s-n.element.height()+n.adjustHeight+r.offset[0],n.tip.find(".tip-anchor").css({top:r.anchorOffset+3,left:"-9px"})):r.region=="left"?(o=u.left-n.tip.width()-n.adjustWidth-r.offset[1]-2,s=s-n.element.height()-n.adjustHeight-r.offset[0],n.tip.find(".tip-anchor").css({top:r.anchorOffset+3,left:n.tip.outerWidth()-2})):r.region=="top"?(s=s-(n.element.height()+n.tip.height()+n.adjustHeight+2)-r.offset[0],o+=r.offset[1],n.tip.find(".tip-anchor").css({top:n.tip.outerHeight()-3,left:r.anchorOffset+3})):r.region=="bottom"&&(s+=r.offset[0],o+=r.offset[1],n.tip.find(".tip-anchor").css({top:-9,left:r.anchorOffset+3})),n.tip.find(".tip-anchor").addClass("tip-anchor-"+n.regionMap[r.region])}o+n.tip.width()>document.documentElement.clientWidth&&(o=o-n.tip.width()-20),s+n.tip.height()>document.documentElement.clientHeight&&(s=s-(n.element.height()+n.tip.height())-20),n.tip.css({top:s-e(document).scrollTop(),left:o-e(document).scrollLeft()})},hide:function(){this.tip.hide()},destroy:function(){clearTimeout(this.showTime),clearTimeout(this.hideTime),this.element.unbind(".tooltip"),this.tip.remove()}}),e.om.lang.omTooltip={FailedToLoad:""}}(jQuery),function(e){var t={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};e.omWidget("om.omTree",{_swapClass:function(e,t,n){var r=e.filter("."+t);e.filter("."+n).removeClass(n).addClass(t),r.removeClass(t).addClass(n)},_getParentNode:function(t){if(t){var n=e(t).parent().parent();if(n&&n.hasClass("om-tree-node"))return n}return null},_setParentCheckbox:function(e){var t=this._getParentNode(e);if(t){var n=t.find(">ul >li >div.tree-checkbox"),r=n.length,i=n.filter(".checkbox_full").length,s=n.filter(".checkbox_part").length,o=t.find(">div.tree-checkbox");o.removeClass("checkbox_full checkbox_part"),i==r?o.addClass("checkbox_full"):(i>0||s>0)&&o.addClass("checkbox_part"),this._setParentCheckbox(t)}},_setChildCheckbox:function(e,t){var n=e.find(">ul").find(".tree-checkbox");n.removeClass("checkbox_part checkbox_full"),t&&n.addClass("checkbox_full")},_applyEvents:function(t){var n=this,r=n.options,i=r.onClick,s=r.onDblClick,o=r.onRightClick,u=r.onDrag,f=r.onSelect,l=r.onDrop;t.find("span").bind("click",function(t){var r=n.element.data("nodes")[e(this).parent().attr("id")];return i&&n._trigger("onClick",t,r),n.select(r),!1}).bind("dblclick",function(t){var r=e(this).parent(),i=n.element.data("nodes")[r.attr("id")];r.hasClass("hasChildren")&&r.find("span.folder").removeClass("folder").addClass("placeholder"),r.has("ul").length>0&&e(t.target,this)&&n.toggler(r),r.find("span.placeholder").removeClass("placeholder").addClass("folder"),s&&n._trigger("onDblClick",t,i)}).bind("contextmenu",function(t){var r=n.element.data("nodes")[e(this).parent().attr("id")];o&&n._trigger("onRightClick",t,r)}).bind("mouseover mouseout",function(t){return t.type=="mouseover"?e(this).addClass("hover"):t.type=="mouseout"&&e(this).removeClass("hover"),!1}),n._bindHitEvent(t),t.find("div.tree-checkbox").click(function(t){var r=e(this).parent(),i=n.findByNId(r.attr("id"));n._toggleCheck(r,n.isCheck(i))}),n.options.draggable&&(t.omDraggable({revert:"invalid",onStart:function(e,t){var r=n.findByNId(e.helper.attr("id"));u&&n._trigger("onDrag",t,r)}}),t.omDroppable({greedy:!0,accept:"li.om-tree-node",onDragOver:function(n,r){var i=t.filter(".treenode-droppable");i.length>0?i.removeClass("treenode-droppable"):e(this).addClass("treenode-droppable")},onDragOut:function(t,n){e(this).removeClass("treenode-droppable")},onDrop:function(t,r){var i,s,o=t,u=this,f=u.find(">ul");e(this).removeClass("treenode-droppable"),o.css("left",""),o.css("top","");var h=n.findByNId(u.attr("id")),p=n.findByNId(o.attr("id"));u.has("ul").length>0?i=h:(s=h,p.pid=h.pid);var d=n.findByNId(o.parent().find("li").attr("id"));n.remove(p),n.insert(p,i,s,!0),l&&n._trigger("onDrop",r,d)}})),t.bind("mousedown",function(e){e.stopPropagation()})},_bindHitEvent:function(t){var n=this;t.find("div.hitarea").click(function(){var t=e(this).parent();t.hasClass("hasChildren")&&t.find("span.folder").removeClass("folder").addClass("placeholder"),n.toggler(t),t.find("span.placeholder").removeClass("placeholder").addClass("folder")})},options:{initExpandLevel:0,lineHover:!1,showIcon:!0,showLine:!0,showCheckbox:!1,cascadeCheck:!0,draggable:!1,filter:null,nodeCount:0,simpleDataModel:!1},_create:function(){this.element.data("nodes",[]).data("selected","").data("init_dataSource",[]).addClass("om-tree om-widget")},updateNode:function(e){var t=this,n=t.options,r=e.find("li");t._applyEvents(r),n.control&&t._treeController(t,n.control)},toggler:function(n){var r=this,i=r.options,s=n.attr("id"),o=r.findByNId(s),u=n.hasClass(t.expandable);if(u){var f=i.onBeforeExpand;if(f&&!1===r._trigger("onBeforeExpand",null,o))return r}else{var l=i.onBeforeCollapse;if(l&&!1===r._trigger("onBeforeCollapse",null,o))return r}var c=n.find(n.find(">.hitarea"));r._swapClass(c,t.collapsableHitarea,t.expandableHitarea),r._swapClass(c,t.lastCollapsableHitarea,t.lastExpandableHitarea),r._swapClass(n,t.collapsable,t.expandable),r._swapClass(n,t.lastCollapsable,t.lastExpandable),n.find(">ul").each(function(){if(u){e(this).show();var t=i.onExpand;t&&r._trigger("onExpand",null,o)}else{e(this).hide();var n=i.onCollapse;n&&r._trigger("onCollapse",null,o)}})},_init:function(){var e=this,t=e.options,n=e.element,r=t.dataSource;n.empty(),r&&(typeof r=="string"?e._ajaxLoad(n,r):typeof r=="object"&&(t.simpleDataModel&&(r=e._transformToNodes(r)),n.data("init_dataSource",r),e._appendNodes.apply(e,[n,r]),e.updateNode(n)))},_ajaxLoad:function(t,n){var r=this,i=this.options,s=i.onBeforeLoad,o=i.onSuccess,u=i.onError;s&&r._trigger("onBeforeLoad",null,r.findByNId(t.parent().attr("id"))),e.ajax({url:n,method:"POST",dataType:"json",cache:!1,success:function(e){i.simpleDataModel&&(e=r._transformToNodes(e)),t.data("init_dataSource",e),r._appendNodes.apply(r,[t,e]),r.updateNode(t),o&&r._trigger("onSuccess",null,e)},error:function(e,t,n){u&&r._trigger("onError",null,e,t,n)}})},check:function(t){this._toggleCheck(e("#"+t.nid),!1)},uncheck:function(t){this._toggleCheck(e("#"+t.nid),!0)},_toggleCheck:function(e,t){var n=e.find(">div.tree-checkbox"),r=this,i=r.options,s=i.onCheck;t?n.removeClass("checkbox_part checkbox_full"):n.removeClass("checkbox_part").addClass("checkbox_full"),r.options.cascadeCheck&&(r._setChildCheckbox(e,!t),r._setParentCheckbox(e)),s&&r._trigger("onCheck",null,r.findByNId(e.attr("id")))},checkAll:function(e){e?this.element.find(".tree-checkbox").removeClass("checkbox_part").addClass("checkbox_full"):this.element.find(".tree-checkbox").removeClass("checkbox_part checkbox_full")},isCheck:function(t){return e("#"+t.nid).find(">div.tree-checkbox").hasClass("checkbox_full")},getChecked:function(t){var n=this,r=[],i=t?".checkbox_full":":not(.checkbox_full)";return this.element.find(".tree-checkbox").filter(i).each(function(t,i){r.push(n.element.data("nodes")[e(this).parent().attr("id")])}),r},select:function(t){var n=this,r=this.options,i=r.onBeforeSelect,s=r.onSelect;if(i&&!1===n._trigger("onBeforeSelect",null,t))return n;var o=e("#"+t.nid);e(" >span",o).addClass("selected");var u=n.element.data("selected"),f=o.attr("id");u!=""&&u!=f&&e("#"+u+" >span").removeClass("selected"),n.element.data("selected",f),s&&n._trigger("onSelect",null,t)},unselect:function(t){var n=this,r=e("#"+t.nid);e(" >span",r).removeClass("selected");var i=n.element.data("selected"),s=r.attr("id");i==s&&n.element.data("selected","")},getSelected:function(){var e=this.element.data("selected");return e?this.element.data("nodes")[e]:null},findNodes:function(e,t,n,r){var i=[],s,o=n?n.children:this.element.data("init_dataSource");r=r!=0?!0:r;if(o&&(s=o.length)>0)for(var u=0;u<s;u++)i=this._searchNode.apply(o[u],[e,t,this._searchNode,i,!1,r]);return i.length>0?i:null},findNode:function(e,t,n,r){var i,s,o=n?n.children:this.element.data("init_dataSource");r=r!=0?!0:r;if(o&&(s=o.length)>0)for(var u=0;u<s;u++){i=this._searchNode.apply(o[u],[e,t,this._searchNode,[],!0,r]);if(i!=null)return i}return null},findByNId:function(e){return this.element.data("nodes")[e]||null},findNodesBy:function(e,t,n){var r,i=t?t.children:this.element.data("init_dataSource");n=n!=0?!0:n;var s=[];if(i&&(len=i.length)>0)for(var o=0;o<len;o++)e.call(i[o],i[o])===!0&&s.push(i[o]),n&&i[o].children&&(r=this.findNodesBy(e,i[o],n),r&&(s=s.concat(r)));return s.length>0?s:null},findNodeBy:function(e,t,n){var r,i=t?t.children:this.element.data("init_dataSource");n=n!=0?!0:n;if(i&&(o=i.length)>0)for(var s=0,o=i.length;s<o;s++){if(e.call(i[s],i[s])===!0)return i[s];if(n){r=this.findNodeBy(e,i[s],n);if(r!=null)return r}}return null},_searchNode:function(t,n,r,i,s,o){if(!s)return this[t]==n&&i.push(this),this.children&&this.children.length&&o&&e.each(this.children,r,[t,n,r,i,!1,o]),i;if(this[t]==n)return this;if(this.children&&this.children.length&&o)for(var u in this.children){var f=r.apply(this.children[u],[t,n,r,[],!0,o]);if(f)return f}},getParent:function(e){var t=this.element.data("nodes")["pid"+e.nid];return t?this.findByNId(t):null},getChildren:function(e){return e.children},getData:function(){return this.options.dataSource},setData:function(e){this.options.dataSource=e},expand:function(n){if(n.nid){var r=t.expandable,i=e("#"+n.nid),s=e(">div."+t.hitarea,i).filter(function(){return r?e(this).parent("."+r).length:!0}).parent().parentsUntil(this.element).andSelf().filter(function(){return e(this).filter("li").hasClass(r)});this.toggler(s)}},collapse:function(n){n.nid&&this._collapseHandler(t.collapsable,e("#"+n.nid))},expandAll:function(){this._collapseHandler(t.expandable,this.element,!0)},collapseAll:function(){this._collapseHandler(t.collapsable,this.element,!0)},_collapseHandler:function(n,r,i){var s=(i?"":">")+"div."+t.hitarea;this.toggler(e(s,r).filter(function(){return n?e(this).parent("."+n).length:!0}).parent())},refresh:function(t){var n=this,r=n.element,i=n.getData();if(!t){r.empty();if(typeof i=="string")n._ajaxLoad(r,i);else if(typeof i=="object"){n.setData([]);for(var s=0,o=i.length;s<o;s++)n.insert(i[s])}}else{var u=e("#"+t.nid).next(),f=r.data("nodes")["pid"+t.nid];n.remove(t),n.insert(t,n.findByNId(f),n.findByNId(u.attr("id")))}},_transformToNodes:function(e){var t,n;if(!e)return[];var r=[],i=[];for(t=0,n=e.length;t<n;t++)i[e[t].id]=e[t];for(t=0,n=e.length;t<n;t++)if(i[e[t].pid]){var s=e[t].pid;i[s].children||(i[s].children=[]),i[s].children.push(e[t])}else r.push(e[t]);return r},_appendNodes:function(n,r,i,s){var o=this,u=[],f=o.options.showCheckbox,l=o.element.attr("id")?o.element.attr("id"):"treeId"+parseInt(Math.random()*1e3);o.element.attr("id",l);for(var c=0,h=r.length;c<h;c++){var p=r[c],d=c==r.length-1,v="om-tree-node "+(f?"treenode-checkable ":"")+(p.hasChildren?"hasChildren ":""),m=l+"_"+ ++o.options.nodeCount;p.nid=m;var g=o.element.data("nodes");g[p.nid]=p,typeof n=="string"?(g["pid"+p.nid]=n,d&&(n=null)):g["pid"+p.nid]=n.parent("li").attr("id");var y=[];p.children&&p.children.length>0&&y.push(o._appendNodes(p.nid,p.children).join(""));var w=0;p.children&&(w=p.children.length)>0||p.hasChildren?p.expanded?v=v+"open "+t.collapsable+" "+(d?t.lastCollapsable:""):v=v+t.expandable+" "+(d?t.lastExpandable:""):v+=d?t.last:"",u.push("<li id='",p.nid,"' class='",v,"'>");if(p.hasChildren||w>0){var E="";e.each(v.split(" "),function(){E+=this+"-hitarea "}),u.push("<div class='",t.hitarea+" "+E,"'/>")}f&&u.push("<div class='tree-checkbox'/>");var S=p.classes?p.classes:"";o.options.showIcon&&(p.hasChildren||p.children&&p.children.length>0?S+=" folder ":S+=" file "),u.push("<span class='",S,"'>","<a href='#'>",p.text,"</a></span>");if(p.hasChildren||w>0)u.push("<ul"," style='display:",p.expanded?"block":"none","'>"),u.push(y.join("")),u.push("</ul>");u.push("</li>")}return i?s?e("#"+i.nid).after(u.join("")):e("#"+i.nid).before(u.join("")):n&&n.append(u.join("")),u},remove:function(n,r){var i,s=this,o=r?r.children:s.element.data("init_dataSource");for(var u in o){if(o[u]==n){var f=[];f=s._findChildrenId(n,f),f.push(n.nid);for(var l=0,c=f.length;l<c;l++)delete s.element.data("nodes")[f[l]],delete s.element.data("nodes")["pid"+f[l]];n.nid==s.element.data("selected")&&this.element.data("selected",null);var h=e("#"+n.nid).prev();return e("#"+n.nid).next().length<1&&h.length>0&&(h.hasClass(t.collapsable)?(h.addClass(t.lastCollapsable),h.find("div.hitarea").first().addClass(t.lastCollapsableHitarea)):h.hasClass(t.expandable)?(h.addClass(t.lastExpandable),h.find("div.hitarea").first().addClass(t.lastExpandableHitarea)):h.addClass(t.last)),e("#"+n.nid).remove(),o.splice(u,1),r&&r.nid&&o.length<1&&s._changeToFolderOrFile(r,!1),!0}if(o[u].children){i=s.remove(n,o[u]);if(i)return!0}}return!1},_findChildrenId:function(e,t){if(e.children)for(var n=0,r=e.children,i=r.length;n<i;n++)t.push(r[n].nid),r[n].children&&this._findChildrenId(r[n],t);return t},insert:function(n,r,i,s){if(!n)return;var o=this,u=[],f,l,c=e.isArray(n);c?u=n:u.push(n),i&&(r=r||o.findByNId(o.element.data("nodes")["pid"+i.nid]));var h,p=r?r.children:o.element.data("init_dataSource");r&&(!r.children||r.children.length<1)&&(r.hasChildren||(o._changeToFolderOrFile(r,!0),o._bindHitEvent(e("#"+r.nid))),p=r.children=[]),f=r?e("#"+r.nid).children("ul").first():o.element,l=f.find("li"),i&&(h=e.inArray(i,p))>=0?(o._appendNodes(f,u,i,s),p.splice(h,0,n)):(o._appendNodes(f,u,i,s),c?e.merge(p,n):p.push(n));var d=f.find("li").filter("."+t.last+",."+t.lastCollapsable+",."+t.lastExpandable).not(f.find("li").filter(":last-child:not(ul)"));d.removeClass(t.last+" "+t.lastCollapsable+" "+t.lastExpandable),d.find(" >div").removeClass(t.lastCollapsableHitarea+" "+t.lastExpandableHitarea);var v=f.find("li").not(l);o._applyEvents(v)},_changeToFolderOrFile:function(n,r){var i=e("#"+n.nid),s=this;if(r){var o=e("<ul/>").css("display","block").appendTo(i);i.addClass("open "+t.collapsable),s._swapClass(i,t.last,t.lastCollapsable),n.children=[]}else i.find("ul").remove(),i.find("div."+t.hitarea).remove(),i.filter("."+t.lastCollapsable+",."+t.lastExpandable).removeClass(t.lastCollapsable+" "+t.lastExpandable).addClass(t.last),i.removeClass("open "+t.collapsable+" "+t.expandable);s.options.showIcon&&s._swapClass(i.children("span"),"file","folder");var u=i.filter(":has(>ul)").prepend('<div class="'+t.hitarea+'"/>').find("div."+t.hitarea);u.each(function(){var t="";e.each(e(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "}),e(this).addClass(t)})},modify:function(t,n,r){if(t&&n){var i=this,s=e("#"+t.nid).next(),o;r=r||this.findByNId(i.element.data("nodes")["pid"+t.nid]);if(s.is("ul")||s.is("li"))o=i.findByNId(s.attr("id"));i.remove(t,r),i.insert(n,r,o)}},disable:function(){},enable:function(){}})}(jQuery),function(e){e.extend(e.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var n=e.data(this[0],"validator");return n?n:(n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){n.cancelSubmit=!0}),n.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){n.submitButton=this}),this.submit(function(t){function r(){if(n.settings.submitHandler){if(n.submitButton)var t=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm);return n.settings.submitHandler.call(n,n.currentForm),n.submitButton&&t.remove(),!1}return!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r=this[0];if(t){var i=e.data(r.form,"validator").settings,s=i.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(n)),s[r.name]=o,n.messages&&(i.messages[r.name]=e.extend(i.messages[r.name],n.messages));break;case"remove":if(!n)return delete s[r.name],o;var u={};return e.each(n.split(/\s/),function(e,t){u[t]=o[t],delete o[t]}),u}}var f=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(r),e.validator.classRules(r),e.validator.attributeRules(r),e.validator.staticRules(r)),r);if(f.required){var l=f.required;delete f.required,f=e.extend({required:l},f)}return f}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return arguments.length==1?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!=Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!=Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{validateOnEmpty:!1,messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,focusCleanup:!1,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight
.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.settings.validateOnEmpty?(!this.checkable(e)||e.name in this.submitted)&&this.element(e):!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");n.settings[r]&&n.settings[r].call(n,this[0])}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t=this.groups={};e.each(this.settings.groups,function(n,r){e.each(r.split(/\s/),function(e,r){t[r]=n})});var n=this.settings.rules;e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",r).validateDelegate(":radio, :checkbox, select, option","click",r),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.clean(t),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t);return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&e.grep(this.errorList,function(e){return e.element.name==t.name}).length==1&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.clean(t),this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);var n=e(t).rules(),r=!1;for(var i in n){var s={method:i,parameters:n[i]};try{var o=e.validator.methods[i].call(this,t.value.replace(/\r/g,""),t,s.parameters);if(o=="dependency-mismatch"){r=!0;continue}r=!1;if(o=="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!o)return this.formatAndAdd(t,s),!1}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",u),u}}if(r)return;return this.objectLength(n)&&this.successList.push(t),!0},customMetaMessage:function(t,n){if(!e.metadata)return;var r=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return r&&r.messages&&r.messages[n]},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor==String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),r=/\$?\{(\d+)\}/g;typeof n=="function"?n=n.call(this,t.parameters,e):r.test(n)&&(n=jQuery.format(n.replace(r,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,n=this.validElements();n[e];e++)this.settings.unhighlight.call(this,n[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r=this.errorsFor(t);r.length?(r.removeClass().addClass(this.settings.errorClass),r.attr("generated")&&r.html(n)):(r=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!n&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var n=this.currentForm;return e(document.getElementsByName(t)).map(function(e,r){return r.form==n&&r.name==t&&r||null})},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&this.pendingRequest==0&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor==String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},r=e(t);for(var i in e.validator.methods){var s=r.attr(i);s&&(n[i]=s)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1){delete t[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=i.param!==undefined?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=r!=undefined?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";switch(n.nodeName.toLowerCase()){case"select":var i=e(n).val();return i&&i.length>0;case"input":if(this.checkable(n))return this.getLength(t,n)>0;default:return e.trim(t).length>0}},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n);this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,r=typeof r=="string"&&{url:r}||r;if(this.pending[n.name])return"pending";if(i.old===t)return i.valid;i.old=t;var s=this;this.startRequest(n);var o={};return o[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,success:function(r){s.settings.messages[n.name].remote=i.originalMessage;var o=r===!0;if(o){var u=s.formSubmitted;s.prepareElement(n),s.formSubmitted=u,s.successList.push(n),s.showErrors()}else{var l={},h=r||s.defaultMessage(n,"remote");l[n.name]=i.message=e.isFunction(h)?h(t):h,s.showErrors(l)}i.valid=o,s.stopRequest(n,o)}},r)),"pending"},minlength:function(t,n,r){return this.optional(n)||this.getLength(e.trim(t),n)>=r},maxlength:function(t,n,r){return this.optional(n)||this.getLength(e.trim(t),n)<=r},rangelength:function(t,n,r){var i=this.getLength(e.trim(t),n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(Date.parse(e.replace(/-/g,"/"))))},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},accept:function(e,t,n){return n=typeof n=="string"?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},equalTo:function(t,n,r){var i=e(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()});return t==i.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode=="abort"&&(t[i]&&t[i].abort(),t[i]=r)});else{var n=e.ajax;e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i=="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&e.each({focus:"focusin",blur:"focusout"},function(t,n){function r(t){return t=e.event.fix(t),t.type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=n,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);if(i.is(t))return r.apply(i,arguments)})}})}(jQuery)