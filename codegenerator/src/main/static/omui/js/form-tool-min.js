// json2.js
if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
// json2form.js
(function(a){a.json2form=a.json2form||{};a.fn.json2form=function(d){var d=a.extend({url:null,elem:this.attr("id"),type:"POST"},d||{});if(d.url){a.ajax({type:d.type,url:d.url,data:a.extend({json2form:d.elem},d.data||{}),dataType:"json",async:false,success:function(i){d.data=i}})}if(!a("#"+d.elem).attr("loadedInit")){if(d.data.init){for(var e in d.data.init){var b=d.data.init[e];if(a("#"+d.elem+" input[name='"+e+"']")){var g=a("#"+d.elem+" input[name='"+e+"']").attr("type");var f=a("#"+d.elem+" input[name='"+e+"']").attr("name");var h=a("#"+d.elem+" input[name='"+e+"']");switch(g){case"checkbox":case"radio":for(var c in b){h.after('<input type="'+g+'"  name="'+f+'" value="'+b[c].value+'" />'+b[c].display)}h.remove();break}}if(a("#"+d.elem+" select[name='"+e+"']")){for(var c in b){a("#"+d.elem+" select[name='"+e+"']").append("<option value='"+b[c].value+"'>"+b[c].display+"</option>")}}}}if(d.data.label){a("#"+d.elem+" label").each(function(){var i=a(this).attr("for");if(d.data.label[i]){a(this).html(d.data.label[i])}})}}if(d.data){a("#"+d.elem+" input,select,textarea").each(function(){var l=a(this).attr("type")==undefined?this.type:a(this).attr("type");var k=a(this).attr("name");var i=d.data[k];if(!a("#"+d.elem).attr("loadedInit")&&a(this).attr("loadurl")){switch(l){case"checkbox":case"radio":case"select":case"select-one":case"select-multiple":var m=this;a.ajax({type:d.type,url:a(this).attr("loadurl"),dataType:"json",async:false,success:function(o){if(l=="select"||l=="select-one"||l=="select-multiple"){a(m).empty()}for(var n in o){if(l=="select"||l=="select-one"||l=="select-multiple"){a(m).append("<option value='"+o[n].value+"'>"+o[n].display+"</option>")}else{a(m).after('<input type="'+l+'"  name="'+k+'" value="'+o[n].value+'" />'+o[n].display)}}if(l=="checkbox"||l=="radio"){a(m).remove()}}});break}}if(i){switch(l){case undefined:case"text":case"password":case"hidden":case"button":case"reset":case"textarea":case"submit":if(typeof(i)=="string"){a(this).val(i.toUpperCase()=="NULL"?"":i)}else{a(this).val(i+"")}break;case"checkbox":case"radio":a(this).attr("checked","");if(i.constructor==Array){for(var j in i){if(i[j]==a(this).val()){a(this).attr("checked",true)}}}else{if(i==a(this).val()){a(this).attr("checked",true)}}break;case"select":case"select-one":case"select-multiple":a(this).find("option:selected").attr("selected",false);if(i.constructor==Array){for(var j in i){a(this).find("option[value='"+i[j]+"']").attr("selected",true)}}else{a(this).find("option[value='"+i+"']").attr("selected",true)}break}}})}a("#"+d.elem).attr("loadedInit","true")}})(jQuery);